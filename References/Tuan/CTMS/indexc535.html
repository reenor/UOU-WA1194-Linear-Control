<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

	
<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=MotorSpeed&section=SimulinkControl by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:10:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

		<script type="text/javascript" src="jquery.js"></script>
					
		<link rel='stylesheet' type='text/css' href='style.css' />
		<script type="text/javascript">
	
			var example = "MotorSpeed"; 
			var section = "SimulinkControl"; 
			var aux = ""; 
			var effects = Boolean(1); 
			var tips = Boolean(1); 
			$.fx.off = !effects;
			
			$(document).keydown(function(e){
				if (!$("#search_field").is(":focus")){
					if (e.keyCode == 39) { 
						window.location = "index9ba6.html?example=MotorPosition&amp;section=SystemModeling";
					}
					if (e.keyCode == 37) { 
						window.history.back()
					}
				}
			});		
			
		</script>
			
		<meta http-equiv="Content-Type" Content="text/html; charset=utf-8" />
		<meta http-equiv="PRAGMA" Content="NO-CACHE" />
		
		<title>Control Tutorials for MATLAB and Simulink - Motor Speed: Simulink Control</title>
			
	</head>

	<body>
	
		
		<div id="container">
		
			<form id="search_form"><input id="search_field" type="text" name="q" placeholder="Search Control Tutorials"/></form>
			<form class="option_form" method="post" onclick="submit()"><div>Effects</div><input type="hidden" name="effects" value="0"/><input type="checkbox" name="effects" value="1" checked='true' /></form>
			<form class="option_form" method="post" onclick="submit()"><div>Tips</div><input type="hidden" name="tips" value="0"/><input type="checkbox" name="tips" value="1" checked='true' /></form>	
				
			<div style="clear:both"></div>
		
			<div id="header">
		
				

				
				
				<div id="menu_container">
				
					<ul class="menu">
						<li class="heading" id="Tips"><a href="index80e7.html?aux=Extras_Tips">TIPS</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
				
					<ul class="menu">
						<li class="heading" id="About"><a>ABOUT</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="About_Tutorials"><a href="index64fe.html?aux=About_Tutorials">Tutorials</a></li>
							<li class="item" id="About_Contact"><a href="mailto:ControlTutorialsMatlabSimulink@gmail.com">Contact</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Basics"><a>BASICS</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Basics_Matlab"><a href="index87b6.html?aux=Basics_Matlab">MATLAB</a></li>
							<li class="item" id="Basics_Simulink"><a href="indexe9ea.html?aux=Basics_Simulink">Simulink</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Index"><a>INDEX</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Index_Tutorials"><a href="index5e52.html?aux=Index_Tutorials">Tutorials</a></li>
							<li class="item" id="Index_Commands"><a href="index111e.html?aux=Index_Commands">Commands</a></li>
							<li class="item" id="Index_Animations"><a href="indexc3c5.html?aux=Index_Animations">Animations</a></li>
							<li class="item" id="Index_Extras"><a href="indexb290.html?aux=Index_Extras">Extras</a></li>
						</div></div>
					</ul>
									
					<ul class="menu">
						<li class="heading" id="Next"><a href="index9ba6.html?example=MotorPosition&amp;section=SystemModeling">NEXT&nbsp;&#x25BA;</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
											
				</div>

			</div>
			
			<div id="body_container">
			
				<div id="gradient_container"></div>
			
				<div id="top">
				
					<a href="index1304.html?aux=Home"><img id="CTMS_logo" src="Images/CTMS_logo.png"></a>
				
					<ul class="example">
					
						<li class="item" id="Introduction"><a href="index87ee.html?example=Introduction&amp;section=SimulinkControl"><img class="icon" src="Images/Introduction_Icon.png"><div class="tab">INTRODUCTION</div></a></li>
						<li class="item" id="CruiseControl"><a href="index8e57.html?example=CruiseControl&amp;section=SimulinkControl"><img class="icon" src="Images/CruiseControl_Icon.png"><div class="tab">CRUISE&nbsp;CONTROL</div></a></li>
						<li class="item" id="MotorSpeed"><a href="indexc535.html?example=MotorSpeed&amp;section=SimulinkControl"><img class="icon" src="Images/MotorSpeed_Icon.png"><div class="tab">MOTOR&nbsp;SPEED</div></a></li>
						<li class="item" id="MotorPosition"><a href="index4c9e.html?example=MotorPosition&amp;section=SimulinkControl"><img class="icon" src="Images/MotorPosition_Icon.png"><div class="tab">MOTOR&nbsp;POSITION</div></a></li>
						<li class="item" id="Suspension"><a href="index24af.html?example=Suspension&amp;section=SimulinkControl"><img class="icon" src="Images/Suspension_Icon.png"><div class="tab">SUSPENSION</div></a></li>
						<li class="item" id="InvertedPendulum"><a href="indexd477.html?example=InvertedPendulum&amp;section=SimulinkControl"><img class="icon" src="Images/InvertedPendulum_Icon.png"><div class="tab">INVERTED&nbsp;PENDULUM</div></a></li>
						<li class="item" id="AircraftPitch"><a href="index9a32.html?example=AircraftPitch&amp;section=SimulinkControl"><img class="icon" src="Images/AircraftPitch_Icon.png"><div class="tab">AIRCRAFT&nbsp;PITCH</div></a></li>
						<li class="item" id="BallBeam"><a href="index7413.html?example=BallBeam&amp;section=SimulinkControl"><img class="icon" src="Images/BallBeam_Icon.png"><div class="tab">BALL&nbsp;&amp;&nbsp;BEAM</div></a></li>
					
					</ul> 
		
				</div>
				
				<div id="content_container">
					<div class="content">
   <div class="content_fx">
      <h1>DC Motor Speed: Simulink Controller Design</h1>
      <!--introduction-->
      <!--/introduction-->
      <h2>Contents</h2>
      <div>
         <ul>
            <li><a href="#2">Extracting a linear model into MATLAB</a></li>
            <li><a href="#4">Open-loop response</a></li>
            <li><a href="#6">Closed-loop response with lag compensator</a></li>
            <li><a href="#8">Closed-loop response with lead compensator</a></li>
         </ul>
      </div>
      <p>From the <a href="index5d5e.html?example=MotorSpeed&amp;section=SimulinkModeling">DC Motor Speed: Simulink Modeling</a> page we generated two different DC motor models in Simulink. We will now employ these models within Simulink to simulate
         the system response and design different approaches to control.
      </p>
      <h2>Extracting a linear model into MATLAB<a name="2"></a></h2>
      <p>A linear model of the system can be extracted from the Simulink model into the MATLAB workspace. This can accomplished employing
         the MATLAB command <tt>linmod</tt> or from directly within Simulink as we will do here. We will specifically use the base Simulink model developed from first
         principles shown below. You can download this model <a href="Content/MotorSpeed/Simulink/Control/Motor_Model.mdl">here</a>, or you can refer to the <a href="index5d5e.html?example=MotorSpeed&amp;section=SimulinkModeling">DC Motor Speed: Simulink Modeling</a> page to recreate the model yourself.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Control/figures/Picture4.png" alt=""> </p>
      <p>Recall that the physical parameters have to be set if they have not previously been defined in the workspace.</p><pre class="codeinput">J = 0.01;
b = 0.1;
K = 0.01;
R = 1;
L = 0.5;
</pre><p>We then need to identify the inputs and outputs of the model we wish to extract. First right-click on the signal representing
         the Voltage input in the Simulink model. Then choose <b>Linearization &gt; Input Point</b> from the resulting menu. Similarly, right-click on the signal representing the Speed output and select <b>Linearization &gt; Output Point</b> from the resulting menu. The input and output signals should now be identified on your model by arrow symbols as shown in
         the figure below.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Control/figures/inputoutput.png" alt=""> </p>
      <p>In order to perform the extraction, select from the menus at the top of the model window <b>Tools &gt; Control Design &gt; Linear Analysis</b>. This will cause the <b>Linear Analysis Tool</b> to open. Within the <b>Linear Analysis Tool</b> window, the <b>Operating Point</b> to be linearized about can remain the default, <tt>Model Initial Condition</tt>. In order to perform the linearization, next click the <b>Linearize</b> button identified by the green triangle. The result of this linearization is the <tt>linsys1</tt> object which now appears in the <b>Linear Analysis Workspace</b> as shown below. Furthermore, the open-loop step response of the linearized system was also generated automatically.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Control/figures/linearize.png" alt=""> </p>
      <p>The open-loop step response above is consistent with the response generated in the <a href="index123f.html?example=MotorSpeed&amp;section=SystemAnalysis">DC Motor Speed: System Analysis</a> page The reason the responses match so closely is because this Simulink model uses only linear components. Note that this
         process can be used extract linear approximations of models with nonlinear elements too.
      </p>
      <p>We will further verify the model extraction by looking at the model itself. The linearized model can be exported by simply
         dragging the object into the <b>MATLAB Workspace</b>. This object can then be used within MATLAB in the same manner as an object created directly from the MATLAB command line.
         Specifically, entering the command <tt>zpk(linsys1)</tt> in the MATLAB command window demonstrates that the resulting model has the following form.
      </p>
      <p><span class="eqn_num">(1)</span><img class="display_eqn" src="Content/MotorSpeed/Simulink/Control/html/MotorSpeed_SimulinkControl_eq17823.png" alt="$$ P(s) = \frac {\dot{\Theta}(s)}{V(s)} = \frac{2}{(s+9.997)(s+2.003)} \qquad  [ \frac{rad/sec}{V} ] $$"></p>
      <p>This model matches the one generated in the <a href="index9e20.html?example=MotorSpeed&amp;section=SystemModeling">DC Motor Speed: System Modeling</a> page. This can be seen by repeating the MATLAB commands given below.
      </p><pre class="codeinput">s = tf(<span class="string">'s'</span>);
P_motor = K/((J*s+b)*(L*s+R)+K^2);
zpk(P_motor)
</pre><pre class="codeoutput">
ans =
 
           2
  -------------------
  (s+9.997) (s+2.003)
 
Continuous-time zero/pole/gain model.

</pre><h2>Open-loop response<a name="4"></a></h2>
      <p>The open-loop step response can also be generated directly within Simulink, without extracting any models to the MATLAB workspace.
         In order to simulate the step response, the details of the simulation must first be set. This can be accomplished by selecting
         <b>Configuration Parameters</b> from the <b>Simulation</b> menu. Within the resulting menu, define the length for which the simulation is to run in the <b>Stop time</b> field. We will enter "3" since 3 seconds will be long enough for the step response to reach steady state. Within this window
         you can also specify various aspects of the numerical solver, but we will just use the default values for this example.
      </p>
      <p>Next we need to add an input signal and a means for displaying the output of our simulation. This is done by doing the following:</p>
      <div>
         <ul>
            <li>Remove the In1 and Out1 blocks.</li>
            <li>Insert a Step block from the Simulink/Sources library and connect it with a line to the Voltage input of the motor subsystem.</li>
            <li>To view the Speed output, insert a Scope from the Simulink/Sinks library and connect it to the Speed output of the motor subsystem.</li>
            <li>To provide a appropriate unit step input at t=0, double-click the Step block and set the <b>Step time</b> to "0".
            </li>
         </ul>
      </div>
      <p>The final model should appear as shown in the following figure.</p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Control/figures/Picture8.png" alt=""> </p>
      <p>Then run the simulation (press <b>Ctrl-T</b> or select <b>Start</b> from the <b>Simulation</b> menu). When the simulation is finished, double-click on the scope and hit its autoscale button. You should see the following
         output.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Control/figures/scope1.png" alt=""> </p>
      <p>This response is identical to that obtained by MATLAB above using the extracted model. This is again to be expected because
         this Simulink model includes only linear blocks.
      </p>
      <h2>Closed-loop response with lag compensator<a name="6"></a></h2>
      <p>In the <a href="index9e58.html?example=MotorSpeed&amp;section=ControlRootLocus">DC Motor Speed: Root Locus Controller Design</a> page a lag compensator was designed with the following transfer function.
      </p>
      <p><span class="eqn_num">(2)</span><img class="display_eqn" src="Content/MotorSpeed/Simulink/Control/html/MotorSpeed_SimulinkControl_eq12575.png" alt="$$ C_{lag}(s) = 44\frac{s + 1}{s + 0.01} $$"></p>
      <p>To generate the closed-loop step response with this compensator in Simulink, we will begin with the "Motor_Model.mdl" file
         described above. We will then put the lag compensator in series with the motor subsystem and will feed back the motor's speed
         for comparison to a desired reference.
      </p>
      <p>More specifically, follow the steps given below:</p>
      <div>
         <ul>
            <li>Remove the Input and Output ports of the model.</li>
            <li>Insert a Sum block from the Simulink/Math Operations library. Then double-click on the block and enter "|+-" for its <b>List of signs</b> where the symbol "|" serves as a spacer between ports of the block.
            </li>
            <li>Insert a Transfer Function block from the Simulink/Continuous library. Then double-click on the block and edit the <b>Numerator coefficients</b> field to "[44 44]" and the <b>Denominator coefficients</b> field to "[1 0.01]".
            </li>
            <li>Insert a Step block from the Simulink/Sources library. Then double-click on the block and set the <b>Step time</b> to "0".
            </li>
            <li>Insert a Scope block from the Simulink/Sinks library.</li>
         </ul>
      </div>
      <p>Then connect and label the components as shown in the following figure</p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Control/figures/Picture3.png" alt=""> </p>
      <p>You can download our version of the closed-loop system model here, <a href="Content/MotorSpeed/Simulink/Control/Motor_Model_lag.mdl">Motor_Model_lag.mdl</a>.
      </p>
      <p>Then run the simulation (press <b>Ctrl-T</b> or select <b>Start</b> from the <b>Simulation</b> menu). When the simulation is finished, double-click on the scope and hit its autoscale button. You should see the following
         output.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Control/figures/scope2.png" alt=""> </p>
      <p>This step response matches exactly the closed-loop performance observed in the <a href="index9e58.html?example=MotorSpeed&amp;section=ControlRootLocus">DC Motor Speed: Root Locus Controller Design</a> page where the lag compensator was originally designed. Note that while we used the physics-based Simulink model developed
         in the <a href="index5d5e.html?example=MotorSpeed&amp;section=SimulinkModeling">DC Motor Speed: Simulink Modeling</a> page for simulating the closed-loop system, we could have equivalently used the Simscape version of the DC motor model.
      </p>
      <h2>Closed-loop response with lead compensator<a name="8"></a></h2>
      <p>We have shown in the above and in other pages of this example that the lag compensator we have designed meets all of the given
         design requirements. Instead of a lag compensator, we could have also designed a lead compensator to meet the given requirements.
         More specifically, we could have designed a lead compensator to achieve a similar DC gain and phase margin to that achieved
         by the lag compensator, but with a larger gain crossover frequency. You can refer back to the <a href="index5e29.html?example=MotorSpeed&amp;section=ControlFrequency">DC Motor Speed: Frequency Domain Methods for Controller Design</a> page for more details on the design of the lag compensator, but the fact that the DC gains and phase margins are similar
         indicate that the responses under lag and lead control would have similar amounts of error in steady state and similar amounts
         of overshoot. The difference in response would come in that the larger gain crossover frequency provided by the lead compensator
         would make the system response faster than with the lag compensator. We will specifically use the following lead compensator.
      </p>
      <p><span class="eqn_num">(3)</span><img class="display_eqn" src="Content/MotorSpeed/Simulink/Control/html/MotorSpeed_SimulinkControl_eq79171.png" alt="$$ C_{lead}(s) = 160000\frac{s + 35}{s + 1035} $$"></p>
      <p>To see the precise effect of the lead compensator as compared to our lag compensator, let's modify our Simulink model from
         above as follows:
      </p>
      <div>
         <ul>
            <li>Disconnect the Step block and Scope block from the rest of the model.</li>
            <li>Copy the blocks forming the closed-loop of the model: the Sum block, the Transfer Function block, and the DC Motor subsystem.
               Then paste a copy of this loop below the original blocks.
            </li>
            <li>Double-click on the Transfer Function block and edit the <b>Numerator coefficients</b> field to "[160000 5.6e6]" and the <b>Denominator coefficients</b> field to "[1 1035]".
            </li>
            <li>Insert a Mux block from the Simulink\Signal Routing library and connect the outputs of the two Motor subsystem blocks to the
               inputs of the Mux and connect the output of the Mux to the Scope.
            </li>
            <li>Connect the Step block to the Sum block of the original feedback system. Then branch off from this line and connect it to
               the Sum block of the lead compensated system as well.
            </li>
         </ul>
      </div>
      <p>The Mux block serves to bundle the two signals into a single line, this way the Scope will plot both speed signals on the
         same set of axes. When you are done, your model should appear as follows.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Control/figures/Picture9.png" alt=""> </p>
      <p>Running the simulation and observing the output produced by the scope, you will see that both responses have a steady-state
         error that approaches zero. Zooming in on the graphs you can generate a figure like the one shown below. Comparing the two
         graphs, the purple response belonging to the lead compensated system has a much smaller settle time and slightly larger, but
         similar, overshoot as compared to the yellow response produced by the lag compensated system.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Control/figures/Picture10.png" alt=""> </p>
      <p>It is generally preferred that a system respond to a command quickly. Why then might we prefer to use the lag compensator
         even though it is slower than the lead compensator? The advantage of the lag compensator in this case is that by responding
         more slowly it requires less control effort than the lead compensator. Less control effort means that less power is consumed
         and that the various components can be sized smaller since they do not have to supply as much energy or withstand the higher
         voltages and current required of the lead compensator.
      </p>
      <p>We will now modify our simulation to explicitly observe the control effort requirements of our two feedback systems. We will
         do this by sending our various signals to the workspace for plotting and further manipulation if desired. Specifically, delete
         the Scope and Mux blocks from your Simulink model. Then insert four To Workspace blocks from the Simulink\Sinks library. Double-click
         on each of the blocks and change their <b>Save format</b> from <tt>Structure</tt> to <tt>Array</tt>. Also provide a <b>Variable name</b> within each block that will make sense to you. You can then connect the blocks to the existing model and label them as shown
         below. You can download our version of this Simulink model here, <a href="Content/MotorSpeed/Simulink/Control/Motor_Model_leadlag.mdl">Motor_Model_leadlag.mdl</a>.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Control/figures/Picture11.png" alt=""> </p>
      <p>Then change the simulation stop time to 1 second and run the model. The act of running the simulation will send to the MATLAB
         workspace a series of arrays corresponding to the variables set-up in your model with the To Workspace blocks. Furthermore,
         the time vector used by that run of the simulation is stored in the default variable <tt>tout</tt>. You can now plot the results of your simulation from the workspace. Enter the following code to see how to specifically
         plot the control effort variables.
      </p>
      <p>
         </p><pre class="codeinput">
         subplot(2,1,1)
         plot(tout,ulag);
         xlabel(<span class="string">'time (seconds)'</span>)
         ylabel(<span class="string">'control effort (volts)'</span>)
         title(<span class="string">'Control Effort Under Lag Compensation'</span>)
         subplot(2,1,2)
         plot(tout,ulead);
         xlabel(<span class="string">'time (seconds)'</span>)
         ylabel(<span class="string">'control effort (volts)'</span>)
         title(<span class="string">'Control Effort Under Lead Compensation'</span>)
         </pre>
         
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Control/figures/Picture12.png" alt=""> </p>
      <p>Examination of the above shows that the control effort required by the lead compensator is above 150,000 Volts, which is well
         above anything that could be supplied or withstood by a typical DC motor. This exemplifies the tradeoff inherent between achieving
         small tracking error and keeping the amount of control effort required small. Optimal control techniques have been developed
         to achieve an optimal balance between competing goals. One such technique is explored in the <a href="indexcff8.html?example=AircraftPitch&amp;section=ControlStateSpace">Aircraft Pitch: State Space Methods for Controller Design</a> page.
      </p>
      <p class="footer"><br>
         Published with MATLAB&reg; 7.14<br></p>
   </div>
</div>
<!--
##### SOURCE BEGIN #####
%% DC Motor Speed: Simulink Controller Design
%
%%
% From the  
% < ?example=MotorSpeed&section=SimulinkModeling DC Motor Speed: Simulink Modeling> page
% we generated two different DC motor models in Simulink. We will now employ 
% these models within Simulink to simulate the system response and design 
% different approaches to control.
%
%% Extracting a linear model into MATLAB
% A linear model of the system can be extracted from
% the Simulink model into the MATLAB workspace. This can accomplished
% employing the MATLAB command |linmod| or from directly within Simulink as
% we will do here. We will specifically use the base Simulink model
% developed from first principles shown below. You can download this model
% <Content/MotorSpeed/Simulink/Control/Motor_Model.mdl here>, or you can refer to the 
% < ?example=MotorSpeed&section=SimulinkModeling
% DC Motor Speed: Simulink Modeling> page to recreate the model yourself.
%
% <<Content/MotorSpeed/Simulink/Control/figures/Picture4.png>>
%
% Recall that the physical parameters have to be set if they have not
% previously been defined in the workspace.

J = 0.01;
b = 0.1;
K = 0.01;
R = 1;
L = 0.5;
%%
% We then need to identify the inputs and outputs
% of the model we wish to extract. First right-click on the signal
% representing the Voltage input in the Simulink model. Then choose
% *Linearization > Input Point* from the resulting menu. Similarly,
% right-click on the signal representing the Speed output and select
% *Linearization > Output Point* from the resulting menu. The input and
% output signals should now be identified on your model by arrow symbols 
% as shown in the figure below.
%
% <<Content/MotorSpeed/Simulink/Control/figures/inputoutput.png>>
%
% In order to perform the extraction, select from the menus at the top
% of the model window *Tools > Control Design > Linear Analysis*. This will
% cause the *Linear Analysis Tool* to open. Within the *Linear Analysis
% Tool* window, the *Operating Point* to be linearized about can remain the
% default, |Model Initial Condition|. In order to perform the
% linearization, next click the *Linearize* button identified by the green
% triangle. The result of this linearization is the |linsys1| object
% which now appears in the *Linear Analysis Workspace* as shown below.
% Furthermore, the open-loop step response of the linearized system was
% also generated automatically.
%
% <<Content/MotorSpeed/Simulink/Control/figures/linearize.png>>
%
% The open-loop step response above is consistent with the response generated in the  
% < ?example=MotorSpeed&section=SystemAnalysis DC Motor Speed: System Analysis> page
% The reason the responses match so closely is because this Simulink model
% uses only linear components. Note that this process can be used
% extract linear approximations of models with nonlinear elements too.
%
% We will further verify the model extraction by looking at the model
% itself. The linearized model can be
% exported by simply dragging the object into the *MATLAB Workspace*.
% This object can then be used within MATLAB in the same manner as an
% object created directly from the MATLAB command line. Specifically,
% entering the command |zpk(linsys1)| in the MATLAB command window
% demonstrates that the resulting model has the following form.
%
% $$ P(s) = \frac {\dot{\Theta}(s)}{V(s)} = \frac{2}{(s+9.997)(s+2.003)} \qquad  [ \frac{rad/sec}{V} ] $$
%
% This model matches the one generated in the
% < ?example=MotorSpeed&section=SystemModeling DC Motor Speed: System Modeling> page.
% This can be seen by repeating the MATLAB commands given below.

s = tf('s');
P_motor = K/((J*s+b)*(L*s+R)+K^2);
zpk(P_motor)

%% Open-loop response
% The open-loop step response can also be generated directly within
% Simulink, without extracting any models to the MATLAB workspace. In order
% to simulate the step response, the details of the simulation must 
% first be set. This can be accomplished by selecting *Configuration
% Parameters* from the *Simulation* menu. Within the resulting menu, define
% the length for which the simulation is to run in the *Stop time* field.
% We will enter "3" since 3 seconds will be long enough for the step
% response to reach steady state. Within this window you can also specify
% various aspects of the numerical solver, but we will just use the default
% values for this example.  
%
% Next we need to add an input signal and a means for displaying the output
% of our simulation. This is done by doing the following:
%
% * Remove the In1 and Out1 blocks.
% * Insert a Step block from the Simulink/Sources library and connect it
% with a line to the Voltage input of the motor subsystem. 
% * To view the Speed output, insert a Scope from the Simulink/Sinks
% library and connect it to the Speed output of the motor subsystem. 
% * To provide a appropriate unit step input at t=0, double-click the Step
% block and set the *Step time* to "0".  
%
% The final model should appear as shown in the following figure.
%
% <<Content/MotorSpeed/Simulink/Control/figures/Picture8.png>>
%
%%
% Then run the simulation (press *Ctrl-T* or select *Start* from the
% *Simulation* menu). When the simulation is finished, double-click on the
% scope and hit its autoscale button. You should see the following output.
%
% <<Content/MotorSpeed/Simulink/Control/figures/scope1.png>>
%
% This response is identical to that obtained by MATLAB above using the
% extracted model. This is again to be expected because this Simulink model
% includes only linear blocks.
%
%% Closed-loop response with lag compensator
%
% In the 
% < ?example=MotorSpeed&section=ControlRootLocus DC Motor Speed: Root Locus Controller Design> page
% a lag compensator was designed with the
% following transfer function.  
%
% $$ C_{lag}(s) = 44\frac{s + 1}{s + 0.01} $$
%
% To generate the closed-loop step response with this compensator in
% Simulink, we will begin with the "Motor_Model.mdl" file described above. We will
% then put the lag compensator in series with the motor subsystem and will
% feed back the motor's speed for comparison to a desired reference.   
%
% More specifically, follow the steps given below: 
%
% * Remove the Input and Output ports of the model. 
% * Insert a Sum block from the Simulink/Math Operations library. Then
% double-click on the block and enter "|+-" for its *List of signs* where
% the symbol "|" serves as a spacer between ports of the block.
% * Insert a Transfer Function block from the Simulink/Continuous library.
% Then double-click on the block and edit the
% *Numerator coefficients* field to "[44 44]" and the *Denominator
% coefficients* field to "[1 0.01]". 
% * Insert a Step block from the Simulink/Sources library. Then
% double-click on the block and set the *Step time* to "0".
% * Insert a Scope block from the Simulink/Sinks library.
%
% Then connect and label the components as shown in the following figure
%
% <<Content/MotorSpeed/Simulink/Control/figures/Picture3.png>> 
%
% You can download our version of the closed-loop system model here,
% <Content/MotorSpeed/Simulink/Control/Motor_Model_lag.mdl Motor_Model_lag.mdl>.
%
% Then run the simulation (press *Ctrl-T* or select *Start* from the
% *Simulation* menu). When the simulation is finished, double-click on the
% scope and hit its autoscale button. You should see the following output.
%
% <<Content/MotorSpeed/Simulink/Control/figures/scope2.png>>
%
%%
% This step response matches exactly the closed-loop performance observed in the
% < ?example=MotorSpeed&section=ControlRootLocus DC Motor Speed: Root Locus Controller Design> page
% where the lag compensator was originally
% designed. Note that while we used the physics-based Simulink model
% developed in the 
% < ?example=MotorSpeed&section=SimulinkModeling DC Motor Speed: Simulink Modeling> page
% for simulating the closed-loop system, we could have equivalently used 
% the Simscape version of the DC motor model. 
%
%% Closed-loop response with lead compensator
%
% We have shown in the above and in other pages of this example that the
% lag compensator we have designed meets all of the given design
% requirements. Instead of a lag compensator, we could have also designed a
% lead compensator to meet the given requirements. More specifically, we
% could have designed a lead compensator to achieve a similar DC gain and
% phase margin to that achieved by the lag compensator, but with a larger
% gain crossover frequency. You can refer back to the
% < ?example=MotorSpeed&section=ControlFrequency DC Motor Speed: Frequency Domain Methods for Controller Design> page
% for more details on the design of the lag
% compensator, but the fact that the DC gains and phase margins are similar
% indicate that the responses under lag and lead control would have similar
% amounts of error in steady state and similar amounts of overshoot. The
% difference in response would come in that the larger gain crossover
% frequency provided by the lead compensator would make the system response
% faster than with the lag compensator. We will specifically use the
% following lead compensator.
%
% $$ C_{lead}(s) = 160000\frac{s + 35}{s + 1035} $$
%
%%
% To see the precise effect of the lead compensator as compared to our lag
% compensator, let's modify our Simulink model from above as follows:
%
% * Disconnect the Step block and Scope block from the rest of the model.
% * Copy the blocks forming the closed-loop of the model: the Sum block,
% the Transfer Function block, and the DC Motor subsystem. Then paste a
% copy of this loop below the original blocks.
% * Double-click on the Transfer Function block and edit the
% *Numerator coefficients* field to "[160000 5.6e6]" and the *Denominator
% coefficients* field to "[1 1035]". 
% * Insert a Mux block from the Simulink\Signal Routing library and connect
% the outputs of the two Motor subsystem blocks to the inputs of the Mux
% and connect the output of the Mux to the Scope.
% * Connect the Step block to the Sum block of the original feedback
% system. Then branch off from this line and connect it to the Sum block of
% the lead compensated system as well.
%
% The Mux block serves to bundle the two signals into a single line, this
% way the Scope will plot both speed signals on the same set of axes. When you
% are done, your model should appear as follows.
%
% <<Content/MotorSpeed/Simulink/Control/figures/Picture9.png>>
%
%%
% Running the simulation and observing the output produced by the scope,
% you will see that both responses have a steady-state error that
% approaches zero. Zooming in on the graphs you can generate a figure like
% the one shown below. Comparing the two graphs, the purple response
% belonging to the lead compensated system has a much smaller settle time
% and slightly larger, but similar, overshoot as compared to the yellow
% response produced by the lag compensated system. 
%
% <<Content/MotorSpeed/Simulink/Control/figures/Picture10.png>>
%
% It is generally preferred that a system respond to a command quickly. Why
% then might we prefer to use the lag compensator even though it is slower
% than the lead compensator? The advantage of the lag compensator in this
% case is that by responding more slowly it requires less control effort
% than the lead compensator. Less control effort means that less power is
% consumed and that the various components can be sized smaller since they
% do not have to supply as much energy or withstand the higher voltages and
% current required of the lead compensator.
%
%%
% We will now modify our simulation to explicitly observe the control
% effort requirements of our two feedback systems. We will do this by
% sending our various signals to the workspace for plotting and further
% manipulation if desired. Specifically, delete the Scope and Mux blocks
% from your Simulink model. Then insert four To Workspace blocks from the
% Simulink\Sinks library. Double-click on each of the blocks and change
% their *Save format* from |Structure| to |Array|. Also provide a *Variable
% name* within each block that will make sense to you. You can
% then connect the blocks to the existing model and label them as shown
% below. You can download our version of this Simulink model here,
% <Content/MotorSpeed/Simulink/Control/Motor_Model_leadlag.mdl Motor_Model_leadlag.mdl>.
%
% <<Content/MotorSpeed/Simulink/Control/figures/Picture11.png>>
%
% Then change the simulation stop time to 1 second and run the model. The
% act of running the simulation will send to the MATLAB workspace a series
% of arrays corresponding to the variables set-up in your model with the To
% Workspace blocks. Furthermore, the time vector used by that run of the
% simulation is stored in the default variable |tout|. You can now plot the
% results of your simulation from the workspace. Enter the following code
% to see how to specifically plot the control effort variables.
%%
% <html>
% </p><pre class="codeinput">
% subplot(2,1,1)
% plot(tout,ulag);
% xlabel(<span class="string">'time (seconds)'</span>)
% ylabel(<span class="string">'control effort (volts)'</span>)
% title(<span class="string">'Control Effort Under Lag Compensation'</span>)
% subplot(2,1,2)
% plot(tout,ulead);
% xlabel(<span class="string">'time (seconds)'</span>)
% ylabel(<span class="string">'control effort (volts)'</span>)
% title(<span class="string">'Control Effort Under Lead Compensation'</span>)
% </pre>
% </html>
%%
%
% <<Content/MotorSpeed/Simulink/Control/figures/Picture12.png>>
%
% Examination of the above shows that the control effort required by the
% lead compensator is above 150,000 Volts, which is well above anything
% that could be supplied or withstood by a typical DC motor. This
% exemplifies the tradeoff inherent between achieving small tracking error
% and keeping the amount of control effort required small. Optimal control
% techniques have been developed to achieve an optimal balance between
% competing goals. One such technique is explored in the
% < ?example=AircraftPitch&section=ControlStateSpace
% Aircraft Pitch: State Space Methods for Controller Design> page.
##### SOURCE END #####
-->				</div>
				
				<div id="left">

					<ul class="section">
						<li class="heading" id="System">SYSTEM<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SystemModeling"><a href="index9e20.html?example=MotorSpeed&amp;section=SystemModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SystemAnalysis"><a href="index123f.html?example=MotorSpeed&amp;section=SystemAnalysis">ANALYSIS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Control">CONTROL<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="ControlPID"><a href="index84c7.html?example=MotorSpeed&amp;section=ControlPID">PID<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlRootLocus"><a href="index9e58.html?example=MotorSpeed&amp;section=ControlRootLocus">ROOT&nbsp;LOCUS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlFrequency"><a href="index5e29.html?example=MotorSpeed&amp;section=ControlFrequency">FREQUENCY<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlStateSpace"><a href="indexd22e.html?example=MotorSpeed&amp;section=ControlStateSpace">STATE-SPACE<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlDigital"><a href="indexf267.html?example=MotorSpeed&amp;section=ControlDigital">DIGITAL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Simulink">SIMULINK<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SimulinkModeling"><a href="index5d5e.html?example=MotorSpeed&amp;section=SimulinkModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SimulinkControl"><a href="indexc535.html?example=MotorSpeed&amp;section=SimulinkControl">CONTROL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
		
				</div>
			
				<div style="clear:both"></div>
				
				<div id="bottombar"><span style="color:#FF5500;font-weight:bold">.</div>
				
			</div>
			
		</div>
	
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=MotorSpeed&section=SimulinkControl by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:10:33 GMT -->
</html>

	inkControl by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:10:33 GMT -->
</html>

	
	
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=MotorSpeed&section=SimulinkControl by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:10:33 GMT -->
</html>

	inkControl by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:10:33 GMT -->
</html>

	pier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:10:33 GMT -->
</html>

	inkControl by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:10:33 GMT -->
</html>

	