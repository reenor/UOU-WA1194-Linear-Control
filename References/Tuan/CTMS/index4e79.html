<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

	
<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=Introduction&section=ControlDigital by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:05:00 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

		<script type="text/javascript" src="jquery.js"></script>
					
		<link rel='stylesheet' type='text/css' href='style.css' />
		<script type="text/javascript">
	
			var example = "Introduction"; 
			var section = "ControlDigital"; 
			var aux = ""; 
			var effects = Boolean(1); 
			var tips = Boolean(1); 
			$.fx.off = !effects;
			
			$(document).keydown(function(e){
				if (!$("#search_field").is(":focus")){
					if (e.keyCode == 39) { 
						window.location = "index5af4.html?example=Introduction&amp;section=SimulinkModeling";
					}
					if (e.keyCode == 37) { 
						window.history.back()
					}
				}
			});		
			
		</script>
			
		<meta http-equiv="Content-Type" Content="text/html; charset=utf-8" />
		<meta http-equiv="PRAGMA" Content="NO-CACHE" />
		
		<title>Control Tutorials for MATLAB and Simulink - Introduction: Digital Controller Design</title>
			
	</head>

	<body>
	
		
		<div id="container">
		
			<form id="search_form"><input id="search_field" type="text" name="q" placeholder="Search Control Tutorials"/></form>
			<form class="option_form" method="post" onclick="submit()"><div>Effects</div><input type="hidden" name="effects" value="0"/><input type="checkbox" name="effects" value="1" checked='true' /></form>
			<form class="option_form" method="post" onclick="submit()"><div>Tips</div><input type="hidden" name="tips" value="0"/><input type="checkbox" name="tips" value="1" checked='true' /></form>	
				
			<div style="clear:both"></div>
		
			<div id="header">
		
				

				
				
				<div id="menu_container">
				
					<ul class="menu">
						<li class="heading" id="Tips"><a href="index80e7.html?aux=Extras_Tips">TIPS</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
				
					<ul class="menu">
						<li class="heading" id="About"><a>ABOUT</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="About_Tutorials"><a href="index64fe.html?aux=About_Tutorials">Tutorials</a></li>
							<li class="item" id="About_Contact"><a href="mailto:ControlTutorialsMatlabSimulink@gmail.com">Contact</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Basics"><a>BASICS</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Basics_Matlab"><a href="index87b6.html?aux=Basics_Matlab">MATLAB</a></li>
							<li class="item" id="Basics_Simulink"><a href="indexe9ea.html?aux=Basics_Simulink">Simulink</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Index"><a>INDEX</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Index_Tutorials"><a href="index5e52.html?aux=Index_Tutorials">Tutorials</a></li>
							<li class="item" id="Index_Commands"><a href="index111e.html?aux=Index_Commands">Commands</a></li>
							<li class="item" id="Index_Animations"><a href="indexc3c5.html?aux=Index_Animations">Animations</a></li>
							<li class="item" id="Index_Extras"><a href="indexb290.html?aux=Index_Extras">Extras</a></li>
						</div></div>
					</ul>
									
					<ul class="menu">
						<li class="heading" id="Next"><a href="index5af4.html?example=Introduction&amp;section=SimulinkModeling">NEXT&nbsp;&#x25BA;</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
											
				</div>

			</div>
			
			<div id="body_container">
			
				<div id="gradient_container"></div>
			
				<div id="top">
				
					<a href="index1304.html?aux=Home"><img id="CTMS_logo" src="Images/CTMS_logo.png"></a>
				
					<ul class="example">
					
						<li class="item" id="Introduction"><a href="index4e79.html?example=Introduction&amp;section=ControlDigital"><img class="icon" src="Images/Introduction_Icon.png"><div class="tab">INTRODUCTION</div></a></li>
						<li class="item" id="CruiseControl"><a href="index6e12.html?example=CruiseControl&amp;section=ControlDigital"><img class="icon" src="Images/CruiseControl_Icon.png"><div class="tab">CRUISE&nbsp;CONTROL</div></a></li>
						<li class="item" id="MotorSpeed"><a href="indexf267.html?example=MotorSpeed&amp;section=ControlDigital"><img class="icon" src="Images/MotorSpeed_Icon.png"><div class="tab">MOTOR&nbsp;SPEED</div></a></li>
						<li class="item" id="MotorPosition"><a href="index7d62.html?example=MotorPosition&amp;section=ControlDigital"><img class="icon" src="Images/MotorPosition_Icon.png"><div class="tab">MOTOR&nbsp;POSITION</div></a></li>
						<li class="item" id="Suspension"><a href="index3cf8.html?example=Suspension&amp;section=ControlDigital"><img class="icon" src="Images/Suspension_Icon.png"><div class="tab">SUSPENSION</div></a></li>
						<li class="item" id="InvertedPendulum"><a href="index5759.html?example=InvertedPendulum&amp;section=ControlDigital"><img class="icon" src="Images/InvertedPendulum_Icon.png"><div class="tab">INVERTED&nbsp;PENDULUM</div></a></li>
						<li class="item" id="AircraftPitch"><a href="index3b26.html?example=AircraftPitch&amp;section=ControlDigital"><img class="icon" src="Images/AircraftPitch_Icon.png"><div class="tab">AIRCRAFT&nbsp;PITCH</div></a></li>
						<li class="item" id="BallBeam"><a href="index447e.html?example=BallBeam&amp;section=ControlDigital"><img class="icon" src="Images/BallBeam_Icon.png"><div class="tab">BALL&nbsp;&amp;&nbsp;BEAM</div></a></li>
					
					</ul> 
		
				</div>
				
				<div id="content_container">
					<div class="content">
   <div class="content_fx">
      <h1>Introduction: Digital Controller Design</h1>
      <!--introduction-->
      <p>In this section we will discuss converting continuous time models into discrete time (or difference equation) models. We will
         also introduce the z-transform and show how to use it to analyze and design controllers for discrete time systems.
      </p>
      <p>Key MATLAB commands used in this tutorial are: <a href="http://www.mathworks.com/help/toolbox/control/ref/c2d.html"><tt>c2d</tt></a> , <a href="http://www.mathworks.com/help/toolbox/control/ref/pzmap.html"><tt>pzmap</tt></a> , <a href="http://www.mathworks.com/help/toolbox/control/ref/zgrid.html"><tt>zgrid</tt></a> , <a href="http://www.mathworks.com/help/toolbox/control/ref/step.html"><tt>step</tt></a> , <a href="http://www.mathworks.com/help/toolbox/control/ref/rlocus.html"><tt>rlocus</tt></a></p>
      <!--/introduction-->
      <h2>Contents</h2>
      <div>
         <ul>
            <li><a href="#1">Introduction</a></li>
            <li><a href="#2">Zero-Hold Equivalence</a></li>
            <li><a href="#3">Conversion Using c2d</a></li>
            <li><a href="#4">Example: Mass-Spring-Damper</a></li>
            <li><a href="#9">Stability and Transient Response</a></li>
            <li><a href="#14">Discrete Root Locus</a></li>
         </ul>
      </div>
      <h2>Introduction<a name="1"></a></h2>
      <p>The figure below shows the typical continuous feedback system that we have been considering so far in this tutorial. Almost
         all of the continuous controllers can be built using analog electronics.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/Introduction/Control/Digital/figures/block1.png" alt=""> </p>
      <p>The continuous controller, enclosed in the dashed square, can be replaced by a digital controller, shown below, that performs
         same control task as the continuous controller. The basic difference between these controllers is that the digital system
         operates on discrete signals (or samples of the sensed signal) rather than on continuous signals.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/Introduction/Control/Digital/figures/block2.png" alt=""> </p>
      <p>Different types of signals in the above digital schematic can be represented by the following plots.</p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/Introduction/Control/Digital/figures/signals.png" alt=""> </p>
      <p>The purpose of this Digital Control Tutorial is to show you how to use MATLAB to work with discrete functions either in transfer
         function or state-space form to design digital control systems.
      </p>
      <h2>Zero-Hold Equivalence<a name="2"></a></h2>
      <p>In the above schematic of the digital control system, we see that the digital control system contains both discrete and the
         continuous portions. When designing a digital control system, we need to find the discrete equivalent of the continuous portion
         so that we only need to deal with discrete functions.
      </p>
      <p>For this technique, we will consider the following portion of the digital control system and rearrange as follows.</p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/Introduction/Control/Digital/figures/block3.png" alt=""> </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/Introduction/Control/Digital/figures/block4.png" alt=""> </p>
      <p>The <b>clock</b> connected to the <b>D/A and A/D converters</b> supplies a pulse every T seconds and each D/A and A/D sends a signal only when the pulse arrives. The purpose of having this
         pulse is to require that Hzoh(z) have only samples u(k) to work on and produce only samples of output y(k); thus, Hzoh(z)
         can be realized as a discrete function.
      </p>
      <p>The philosophy of the design is the following. We want to find a discrete function Hzoh(z) so that for a piecewise constant
         input to the continuous system H(s), the sampled output of the continuous system equals the discrete output. Suppose the signal
         u(k) represents a sample of the input signal. There are techniques for taking this sample u(k) and holding it to produce a
         continuous signal uhat(t). The sketch below shows that the uhat(t) is held constant at u(k) over the interval kT to (k+1)T.
         This operation of holding uhat(t) constant over the sampling time is called zero-order hold.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/Introduction/Control/Digital/figures/zohfig.png" alt=""> </p>
      <p>The zero-order held signal uhat(t) goes through H2(s) and A/D to produce the output y(k) that will be the piecewise same signal
         as if the discrete signal u(k) goes through Hzoh(z) to produce the discrete output y(k).
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/Introduction/Control/Digital/figures/block7.png" alt=""> </p>
      <p>Now we will redraw the schematic, placing Hzoh(z) in place of the continuous portion.</p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/Introduction/Control/Digital/figures/block6.png" alt=""> </p>
      <p>By placing Hzoh(z), we can design digital control systems dealing with only discrete functions.</p>
      <p><b>Note:</b> There are certain cases where the discrete response does not match the continuous response due to a hold circuit implemented
         in digital control systems. For information, see Lagging effect associated with the hold.
      </p>
      <h2>Conversion Using c2d<a name="3"></a></h2>
      <p>There is a MATLAB function called c2d that converts a given continuous system (either in transfer function or state-space
         form) to a discrete system using the zero-order hold operation explained above. The basic command for this in MATLAB is <tt>sys_d = c2d(sys,Ts,'zoh')</tt></p>
      <p>The sampling time (Ts in sec/sample) should be smaller than 1/(30*BW), where BW is the closed-loop bandwidth frequency.</p>
      <h2>Example: Mass-Spring-Damper<a name="4"></a></h2>
      <p><b>Transfer Function</b></p>
      <p>Suppose you have the following continuous transfer function</p>
      <p><span class="eqn_num">(1)</span><img class="display_eqn" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_eq25408.png" alt="$$&#xA;\frac{X(s)}{F(s)} = \frac{1}{Ms^2+bs+k}&#xA;$$"></p>
      <p>Assuming the closed-loop bandwidth frequency is greater than 1 rad/sec, we will choose the sampling time (Ts) equal to 1/100
         sec. Now, create an new m-file and enter the following commands.
      </p><pre class="codeinput">M = 1;
b = 10;
k = 20;

s = tf(<span class="string">'s'</span>);
sys = 1/(M*s^2+b*s+k);

Ts = 1/100;
sys_d = c2d(sys,Ts,<span class="string">'zoh'</span>)
</pre><pre class="codeoutput">
sys_d =
 
  4.837e-05 z + 4.678e-05
  -----------------------
  z^2 - 1.903 z + 0.9048
 
Sample time: 0.01 seconds
Discrete-time transfer function.

</pre><p><b>State-Space</b></p>
      <p>The continuous time state-space model is as follows:</p>
      <p><span class="eqn_num">(2)</span><img class="display_eqn" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_eq71952.png" alt="$$&#xA;\mathbf{\dot{x}} = \left[ \begin{array}{c} \dot{x} \\ \ddot{x} \end{array} \right] = \left[ \begin{array}{cc} 0 &amp; 1 \\ -\frac{k}{m}  &amp; -\frac{b}{m} \end{array} \right] \left[ \begin{array}{c} x \\ \dot{x} \end{array} \right] + \left[ \begin{array}{c} 0 \\ \frac{1}{m} \end{array} \right] F(t)&#xA;$$"></p>
      <p><span class="eqn_num">(3)</span><img class="display_eqn" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_eq73060.png" alt="$$&#xA;y = \left[ \begin{array}{cc} 1 &amp; 0 \end{array} \right] \left[&#xA;\begin{array}{c} x \\ \dot{x} \end{array} \right]&#xA;$$"></p>
      <p>All constants are the same as before.  The following m-file converts the above continuous state-space to discrete state-space.</p><pre class="codeinput">A = [0       1;
    -k/M   -b/M];

B = [  0;
    1/M];

C = [1 0];

D = [0];

Ts = 1/100;

sys = ss(A,B,C,D);
sys_d = c2d(sys,Ts,<span class="string">'zoh'</span>)
</pre><pre class="codeoutput">
sys_d =
 
  a = 
             x1        x2
   x1     0.999  0.009513
   x2   -0.1903    0.9039
 
  b = 
              u1
   x1  4.837e-05
   x2   0.009513
 
  c = 
       x1  x2
   y1   1   0
 
  d = 
       u1
   y1   0
 
Sample time: 0.01 seconds
Discrete-time state-space model.

</pre><p>From these matrices, the discrete state-space can be written as</p>
      <p><span class="eqn_num">(4)</span><img class="display_eqn" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_eq98907.png" alt="$$&#xA;\left[ \begin{array}{c} x(k) \\ v(k) \end{array} \right] =&#xA;\left[ \begin{array}{cc} 0.9990 &amp; 0.0095 \\ -0.1903 &amp; 0.9039  \end{array} \right] \left[ \begin{array}{c} x(k-1) \\ v(k-1) \end{array} \right] +&#xA;\left[ \begin{array}{c} 0 \\ 0.0095 \end{array} \right] F(k-1)&#xA;$$"></p>
      <p><span class="eqn_num">(5)</span><img class="display_eqn" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_eq84759.png" alt="$$&#xA;y(k-1) = \left[ \begin{array}{cc} 1 &amp; 0 \end{array} \right] \left[ \begin{array}{c} x(k-1) \\ v(k-1) \end{array} \right]&#xA;$$"></p>
      <p>Now you have the discrete time state-space model.</p>
      <h2>Stability and Transient Response<a name="9"></a></h2>
      <p>For continuous systems, we know that certain behaviors results from different pole locations in the s-plane. For instance,
         a system is unstable when any pole is located to the right of the imaginary axis. For discrete systems, we can analyze the
         system behaviors from different pole locations in the z-plane. The characteristics in the z-plane can be related to those
         in the s-plane by the expression
      </p>
      <p><span class="eqn_num">(6)</span><img class="display_eqn" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_eq58411.png" alt="$$&#xA;z = e^{sT}&#xA;$$"></p>
      <div>
         <ul>
            <li>T = Sampling time (sec/sample)</li>
            <li>s = Location in the s-plane</li>
            <li>z = Location in the z-plane</li>
         </ul>
      </div>
      <p>The figure below shows the mapping of lines of constant damping ratio (zeta) and natural frequency (Wn) from the s-plane to
         the z-plane using the expression shown above.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/Introduction/Control/Digital/figures/zgrid.gif" alt=""> </p>
      <p>If you noticed in the z-plane, the stability boundary is no longer imaginary axis, but is the unit circle <tt>z</tt>=1. The system is stable when all poles are located inside the unit circle and unstable when any pole is located outside.
      </p>
      <p>For analyzing the transient response from pole locations in the z-plane, the following three equations used in continuous
         system designs are still applicable.
      </p>
      <p><span class="eqn_num">(7)</span><img class="display_eqn" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_eq78275.png" alt="$$&#xA;\zeta \omega_n \geq \frac{4.6}{Ts}&#xA;$$"></p>
      <p><span class="eqn_num">(8)</span><img class="display_eqn" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_eq81911.png" alt="$$&#xA;\omega_n \geq \frac{1.8}{Tr}&#xA;$$"></p>
      <p><span class="eqn_num">(9)</span><img class="display_eqn" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_eq85838.png" alt="$$&#xA;\zeta = \frac{-\ln(\%OS/100)}{\sqrt{\pi^2+\ln(\%OS/100)^2}}&#xA;$$"></p>
      <p>where,</p>
      <div>
         <ul>
            <li>zeta = Damping ratio</li>
            <li>Wn = Natural frequency (rad/sec)</li>
            <li>Ts = Settling time</li>
            <li>Tr = Rise time</li>
            <li>Mp = Maximum overshoot</li>
         </ul>
      </div>
      <p>Important: The natural frequency (Wn) in z-plane has the unit of rad/sample, but when you use the equations shown above, the
         Wn must be in the unit of rad/sec.
      </p>
      <p>Suppose we have the following discrete transfer function</p>
      <p><span class="eqn_num">(10)</span><img class="display_eqn" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_eq22865.png" alt="$$&#xA;\frac{Y(z)}{F(z)} = \frac{1}{z^2-0.3z+0.5}&#xA;$$"></p>
      <p>Create an new m-file and enter the following commands. Running this m-file in the command window gives you the following plot
         with the lines of constant damping ratio and natural frequency.
      </p><pre class="codeinput">numDz = 1;
denDz = [1 -0.3 0.5];
sys = tf(numDz,denDz,-1); <span class="comment">% the -1 indicates that the sample time is undetermined</span>

pzmap(sys)
axis([-1 1 -1 1])
zgrid
</pre><img class="figure"vspace="5" hspace="5" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_01.png" alt=""> <p>From this plot, we see poles are located approximately at the natural frequency of 9pi/20T (rad/sample) and the damping ratio
         of 0.25. Assuming that we have a sampling time of 1/20 sec (which leads to Wn = 28.2 rad/sec) and using three equations shown
         above, we can determine that this system should have the rise time of 0.06 sec, a settling time of 0.65 sec and a maximum
         overshoot of 45% (0.45 more than the steady-state value). Let's obtain the step response and see if these are correct. Add
         the following commands to the above m-file and rerun it in the command window. You should get the following step response.
      </p><pre class="codeinput">sys = tf(numDz,denDz,1/20);
step(sys,2.5);
</pre><img class="figure"vspace="5" hspace="5" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_02.png" alt=""> <p>As you can see from the plot, the rise time, settling time and overshoot came out to be what we expected. This shows how you
         can use the locations of poles and the above three equations to analyze the transient response of the system.
      </p>
      <h2>Discrete Root Locus<a name="14"></a></h2>
      <p>The root-locus is the locus of points where roots of characteristic equation can be found as a single gain is varied from
         zero to infinity. The characteristic equation of an unity feedback system is
      </p>
      <p><span class="eqn_num">(11)</span><img class="display_eqn" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_eq09244.png" alt="$$&#xA;1+KG(z)Hzoh(z) = 0&#xA;$$"></p>
      <p>where G(z) is the compensator implemented in the digital controller and Hzoh(z) is the plant transfer function in z.</p>
      <p>The mechanics of drawing the root-loci are exactly the same in the z-plane as in the s-plane. Recall from the continuous Root-Locus
         Tutorial, we used the MATLAB function called sgrid to find the root-locus region that gives an acceptable gain (K). For the
         discrete root-locus analysis, we will use the function zgrid that has the same characteristics as sgrid. The command zgrid(zeta,
         Wn) draws lines of constant damping ratio (zeta) and natural frequency (Wn).
      </p>
      <p>Suppose we have the following discrete transfer function</p>
      <p><span class="eqn_num">(12)</span><img class="display_eqn" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_eq77084.png" alt="$$&#xA;\frac{Y(z)}{F(z)} = \frac{z-0.3}{z^2-1.6z+0.7}&#xA;$$"></p>
      <p>and the requirements are a damping ratio greater than 0.6 and a natural frequency greater than 0.4 rad/sample (these can be
         found from design requirements, sampling time (sec/sample) and three equations shown in the previous section). The following
         commands draw the root-locus with the lines of constant damping ratio and natural frequency. Create an new m-file and enter
         the following commands. Running this m-file should give you the following root-locus plot.
      </p><pre class="codeinput">numDz = [1 -0.3];
denDz = [1 -1.6 0.7];
sys = tf(numDz,denDz,-1);

rlocus(sys)
axis([-1 1 -1 1])

zeta = 0.4;
Wn = 0.3;
zgrid(zeta,Wn)
</pre><img class="figure"vspace="5" hspace="5" src="Content/Introduction/Control/Digital/html/Introduction_ControlDigital_03.png" alt=""> <p>From this plot, you should realize that the system is stable because all poles are located inside the unit circle. Also, you
         see two dotted lines of constant damping ratio and natural frequency. The natural frequency is greater than 0.3 outside the
         constant-Wn line, and the damping ratio is greater than 0.4 inside the constant-zeta line. In this example, we do have the
         root-locus drawn in the desired region. Therefore, a gain (K) chosen from one of the loci in the desired region should give
         you the response that satisfies design requirements.
      </p>
      <p class="footer"><br>
         Published with MATLAB&reg; 7.14<br></p>
   </div>
</div>
<!--
##### SOURCE BEGIN #####
%% Introduction: Digital Controller Design
%
% In this section we will discuss converting continuous time models into
% discrete time (or difference equation) models. We will also introduce
% the z-transform and show how to use it to analyze and design controllers 
% for discrete time systems.
%
% Key MATLAB commands used in this tutorial are:
% <http://www.mathworks.com/help/toolbox/control/ref/c2d.html |c2d|> , 
% <http://www.mathworks.com/help/toolbox/control/ref/pzmap.html |pzmap|> , 
% <http://www.mathworks.com/help/toolbox/control/ref/zgrid.html |zgrid|> , 
% <http://www.mathworks.com/help/toolbox/control/ref/step.html |step|> , 
% <http://www.mathworks.com/help/toolbox/control/ref/rlocus.html |rlocus|>
%
%% Introduction
%
% The figure below shows the typical continuous feedback system that we
% have been considering so far in this tutorial. Almost all of the continuous
% controllers can be built using analog electronics. 
%
% <<Content/Introduction/Control/Digital/figures/block1.png>>
%
% The continuous controller, enclosed in the dashed square, can be replaced
% by a digital controller, shown below, that performs same control task as 
% the continuous controller. The basic difference between these controllers 
% is that the digital system operates on discrete signals (or samples of the 
% sensed signal) rather than on continuous signals. 
% 
% <<Content/Introduction/Control/Digital/figures/block2.png>>
%
% Different types of signals in the above digital schematic can be
% represented by the following plots. 
%
% <<Content/Introduction/Control/Digital/figures/signals.png>>
%
% The purpose of this Digital Control Tutorial is to show you how to use
% MATLAB to work with discrete functions either in transfer function or 
% state-space form to design digital control systems. 
%
%% Zero-Hold Equivalence
%
% In the above schematic of the digital control system, we see that the
% digital control system contains both discrete and the continuous portions. 
% When designing a digital control system, we need to find the discrete 
% equivalent of the continuous portion so that we only need to deal with 
% discrete functions. 
%
% For this technique, we will consider the following portion of the digital
% control system and rearrange as follows. 
%
% <<Content/Introduction/Control/Digital/figures/block3.png>>
%
% <<Content/Introduction/Control/Digital/figures/block4.png>>
%
% The *clock* connected to the *D/A and A/D converters* supplies a pulse every
% T seconds and each D/A and A/D sends a signal only when the pulse arrives. 
% The purpose of having this pulse is to require that Hzoh(z) have only 
% samples u(k) to work on and produce only samples of output y(k); thus, 
% Hzoh(z) can be realized as a discrete function. 
%
% The philosophy of the design is the following. We want to find a discrete
% function Hzoh(z) so that for a piecewise constant input to the continuous 
% system H(s), the sampled output of the continuous system equals the discrete 
% output. Suppose the signal u(k) represents a sample of the input signal. 
% There are techniques for taking this sample u(k) and holding it to produce 
% a continuous signal uhat(t). The sketch below shows that the uhat(t) is 
% held constant at u(k) over the interval kT to (k+1)T. This operation of 
% holding uhat(t) constant over the sampling time is called zero-order
% hold. 
%
% <<Content/Introduction/Control/Digital/figures/zohfig.png>>
%
% The zero-order held signal uhat(t) goes through H2(s) and A/D to produce
% the output y(k) that will be the piecewise same signal as if the discrete 
% signal u(k) goes through Hzoh(z) to produce the discrete output y(k). 
%
% <<Content/Introduction/Control/Digital/figures/block7.png>>
%
% Now we will redraw the schematic, placing Hzoh(z) in place of the
% continuous portion.
%
% <<Content/Introduction/Control/Digital/figures/block6.png>>
%
% By placing Hzoh(z), we can design digital control systems dealing with
% only discrete functions. 
%
% *Note:* There are certain cases where the discrete response does not
% match the continuous response due to a hold circuit implemented in digital 
% control systems. For information, see Lagging effect associated with the hold.
%
%% Conversion Using c2d
%
% There is a MATLAB function called c2d that converts a given continuous
% system (either in transfer function or state-space form) to a discrete 
% system using the zero-order hold operation explained above. The basic 
% command for this in MATLAB is |sys_d = c2d(sys,Ts,'zoh')|
%
% The sampling time (Ts in sec/sample) should be smaller than 1/(30*BW),
% where BW is the closed-loop bandwidth frequency. 
%
%% Example: Mass-Spring-Damper
%
% *Transfer Function*
% 
% Suppose you have the following continuous transfer function 
%
% $$
% \frac{X(s)}{F(s)} = \frac{1}{Ms^2+bs+k}
% $$
%
% Assuming the closed-loop bandwidth frequency is greater than 1 rad/sec,
% we will choose the sampling time (Ts) equal to 1/100 sec. Now, create an 
% new m-file and enter the following commands. 
%
%%

M = 1;
b = 10;
k = 20;

s = tf('s');
sys = 1/(M*s^2+b*s+k);

Ts = 1/100;
sys_d = c2d(sys,Ts,'zoh')

%%
% *State-Space*
%
% The continuous time state-space model is as follows:
%
% $$
% \mathbf{\dot{x}} = \left[ \begin{array}{c} \dot{x} \\ \ddot{x} \end{array} \right] = \left[ \begin{array}{cc} 0 & 1 \\ -\frac{k}{m}  & -\frac{b}{m} \end{array} \right] \left[ \begin{array}{c} x \\ \dot{x} \end{array} \right] + \left[ \begin{array}{c} 0 \\ \frac{1}{m} \end{array} \right] F(t)
% $$
%
% $$
% y = \left[ \begin{array}{cc} 1 & 0 \end{array} \right] \left[
% \begin{array}{c} x \\ \dot{x} \end{array} \right]
% $$
%
% All constants are the same as before.  The following m-file converts the
% above continuous state-space to discrete state-space. 
%
%%

A = [0       1;  
    -k/M   -b/M];
  
B = [  0;
    1/M];   
     
C = [1 0];

D = [0];
     
Ts = 1/100;

sys = ss(A,B,C,D);
sys_d = c2d(sys,Ts,'zoh')

%%
%
% From these matrices, the discrete state-space can be written as 
%
% $$ 
% \left[ \begin{array}{c} x(k) \\ v(k) \end{array} \right] = 
% \left[ \begin{array}{cc} 0.9990 & 0.0095 \\ -0.1903 & 0.9039  \end{array} \right] \left[ \begin{array}{c} x(k-1) \\ v(k-1) \end{array} \right] +
% \left[ \begin{array}{c} 0 \\ 0.0095 \end{array} \right] F(k-1)
% $$
%
% $$
% y(k-1) = \left[ \begin{array}{cc} 1 & 0 \end{array} \right] \left[ \begin{array}{c} x(k-1) \\ v(k-1) \end{array} \right]
% $$
%
% Now you have the discrete time state-space model. 
%
%% Stability and Transient Response
%
% For continuous systems, we know that certain behaviors results from
% different pole locations in the s-plane. For instance, a system is 
% unstable when any pole is located to the right of the imaginary axis. 
% For discrete systems, we can analyze the system behaviors from different 
% pole locations in the z-plane. The characteristics in the z-plane can be 
% related to those in the s-plane by the expression 
%
% $$
% z = e^{sT}
% $$
%
% * T = Sampling time (sec/sample)
% * s = Location in the s-plane
% * z = Location in the z-plane 
%
% The figure below shows the mapping of lines of constant damping ratio
% (zeta) and natural frequency (Wn) from the s-plane to the z-plane using 
% the expression shown above. 
%
% <<Content/Introduction/Control/Digital/figures/zgrid.gif>>
%
% If you noticed in the z-plane, the stability boundary is no longer
% imaginary axis, but is the unit circle |z|=1. The system is stable when 
% all poles are located inside the unit circle and unstable when any pole 
% is located outside. 
%
% For analyzing the transient response from pole locations in the z-plane,
% the following three equations used in continuous system designs are still 
% applicable. 
%
% $$
% \zeta \omega_n \geq \frac{4.6}{Ts}
% $$
%
% $$
% \omega_n \geq \frac{1.8}{Tr}
% $$
%
% $$
% \zeta = \frac{-\ln(\%OS/100)}{\sqrt{\pi^2+\ln(\%OS/100)^2}}
% $$
%
% where,
% 
% * zeta = Damping ratio
% * Wn = Natural frequency (rad/sec)
% * Ts = Settling time
% * Tr = Rise time
% * Mp = Maximum overshoot 
%
% Important: The natural frequency (Wn) in z-plane has the unit of
% rad/sample, but when you use the equations shown above, the Wn must be 
% in the unit of rad/sec. 
%
% Suppose we have the following discrete transfer function 
%
% $$
% \frac{Y(z)}{F(z)} = \frac{1}{z^2-0.3z+0.5}
% $$
%
% Create an new m-file and enter the following commands. Running this
% m-file in the command window gives you the following plot with the lines 
% of constant damping ratio and natural frequency. 
%
%%

numDz = 1;
denDz = [1 -0.3 0.5];
sys = tf(numDz,denDz,-1); % the -1 indicates that the sample time is undetermined

pzmap(sys)
axis([-1 1 -1 1])
zgrid

%%
%
% From this plot, we see poles are located approximately at the natural
% frequency of 9pi/20T (rad/sample) and the damping ratio of 0.25. Assuming 
% that we have a sampling time of 1/20 sec (which leads to Wn = 28.2 rad/sec) 
% and using three equations shown above, we can determine that this system 
% should have the rise time of 0.06 sec, a settling time of 0.65 sec and a 
% maximum overshoot of 45% (0.45 more than the steady-state value). Let's 
% obtain the step response and see if these are correct. Add the following 
% commands to the above m-file and rerun it in the command window. You should 
% get the following step response. 
%
%%

sys = tf(numDz,denDz,1/20);
step(sys,2.5);

%%
%
% As you can see from the plot, the rise time, settling time and overshoot
% came out to be what we expected. This shows how you can use the locations 
% of poles and the above three equations to analyze the transient response 
% of the system. 
%
%% Discrete Root Locus
%
% The root-locus is the locus of points where roots of characteristic
% equation can be found as a single gain is varied from zero to infinity. 
% The characteristic equation of an unity feedback system is 
%
% $$
% 1+KG(z)Hzoh(z) = 0
% $$
%
% where G(z) is the compensator implemented in the digital controller and
% Hzoh(z) is the plant transfer function in z. 
%
% The mechanics of drawing the root-loci are exactly the same in the
% z-plane as in the s-plane. Recall from the continuous Root-Locus Tutorial, 
% we used the MATLAB function called sgrid to find the root-locus region that 
% gives an acceptable gain (K). For the discrete root-locus analysis, we will
% use the function zgrid that has the same characteristics as sgrid. The 
% command zgrid(zeta, Wn) draws lines of constant damping ratio (zeta) and 
% natural frequency (Wn). 
% 
% Suppose we have the following discrete transfer function 
%
% $$
% \frac{Y(z)}{F(z)} = \frac{z-0.3}{z^2-1.6z+0.7}
% $$
%
% and the requirements are a damping ratio greater than 0.6 and a natural
% frequency greater than 0.4 rad/sample (these can be found from design 
% requirements, sampling time (sec/sample) and three equations shown in the
% previous section). The following commands draw the root-locus with the 
% lines of constant damping ratio and natural frequency. Create an new 
% m-file and enter the following commands. Running this m-file should give 
% you the following root-locus plot. 
%
%%

numDz = [1 -0.3];
denDz = [1 -1.6 0.7];
sys = tf(numDz,denDz,-1);

rlocus(sys)
axis([-1 1 -1 1])

zeta = 0.4;
Wn = 0.3;
zgrid(zeta,Wn)

%%
%
% From this plot, you should realize that the system is stable because all
% poles are located inside the unit circle. Also, you see two dotted lines 
% of constant damping ratio and natural frequency. The natural frequency is 
% greater than 0.3 outside the constant-Wn line, and the damping ratio is 
% greater than 0.4 inside the constant-zeta line. In this example, we do 
% have the root-locus drawn in the desired region. Therefore, a gain (K) 
% chosen from one of the loci in the desired region should give you the 
% response that satisfies design requirements. 

##### SOURCE END #####
-->				</div>
				
				<div id="left">

					<ul class="section">
						<li class="heading" id="System">SYSTEM<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SystemModeling"><a href="indexf617.html?example=Introduction&amp;section=SystemModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SystemAnalysis"><a href="indexa13b.html?example=Introduction&amp;section=SystemAnalysis">ANALYSIS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Control">CONTROL<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="ControlPID"><a href="index6e33.html?example=Introduction&amp;section=ControlPID">PID<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlRootLocus"><a href="indexe528.html?example=Introduction&amp;section=ControlRootLocus">ROOT&nbsp;LOCUS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlFrequency"><a href="index7f35.html?example=Introduction&amp;section=ControlFrequency">FREQUENCY<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlStateSpace"><a href="index9b18.html?example=Introduction&amp;section=ControlStateSpace">STATE-SPACE<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlDigital"><a href="index4e79.html?example=Introduction&amp;section=ControlDigital">DIGITAL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Simulink">SIMULINK<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SimulinkModeling"><a href="index5af4.html?example=Introduction&amp;section=SimulinkModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SimulinkControl"><a href="index87ee.html?example=Introduction&amp;section=SimulinkControl">CONTROL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
		
				</div>
			
				<div style="clear:both"></div>
				
				<div id="bottombar"><span style="color:#FF5500;font-weight:bold">.</div>
				
			</div>
			
		</div>
	
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=Introduction&section=ControlDigital by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:05:11 GMT -->
</html>

	rolDigital by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:05:11 GMT -->
</html>

	
	
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=Introduction&section=ControlDigital by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:05:11 GMT -->
</html>

	rolDigital by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:05:11 GMT -->
</html>

	pier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:05:11 GMT -->
</html>

	rolDigital by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:05:11 GMT -->
</html>

	