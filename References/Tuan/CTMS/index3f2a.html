<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

	
<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?aux=Extras_Conversions by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:13:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

		<script type="text/javascript" src="jquery.js"></script>
					
		<link rel='stylesheet' type='text/css' href='style.css' />
		<script type="text/javascript">
	
			var example = ""; 
			var section = ""; 
			var aux = "Extras_Conversions"; 
			var effects = Boolean(1); 
			var tips = Boolean(1); 
			$.fx.off = !effects;
			
			$(document).keydown(function(e){
				if (!$("#search_field").is(":focus")){
					if (e.keyCode == 39) { 
						window.location = "indexb290.html?aux=Index_Extras";
					}
					if (e.keyCode == 37) { 
						window.history.back()
					}
				}
			});		
			
		</script>
			
		<meta http-equiv="Content-Type" Content="text/html; charset=utf-8" />
		<meta http-equiv="PRAGMA" Content="NO-CACHE" />
		
		<title>Control Tutorials for MATLAB and Simulink - Extras: Converting Between System Representations</title>
			
	</head>

	<body>
	
		
		<div id="container">
		
			<form id="search_form"><input id="search_field" type="text" name="q" placeholder="Search Control Tutorials"/></form>
			<form class="option_form" method="post" onclick="submit()"><div>Effects</div><input type="hidden" name="effects" value="0"/><input type="checkbox" name="effects" value="1" checked='true' /></form>
			<form class="option_form" method="post" onclick="submit()"><div>Tips</div><input type="hidden" name="tips" value="0"/><input type="checkbox" name="tips" value="1" checked='true' /></form>	
				
			<div style="clear:both"></div>
		
			<div id="header">
		
				

				
				
				<div id="menu_container">
				
					<ul class="menu">
						<li class="heading" id="Tips"><a href="index80e7.html?aux=Extras_Tips">TIPS</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
				
					<ul class="menu">
						<li class="heading" id="About"><a>ABOUT</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="About_Tutorials"><a href="index64fe.html?aux=About_Tutorials">Tutorials</a></li>
							<li class="item" id="About_Contact"><a href="mailto:ControlTutorialsMatlabSimulink@gmail.com">Contact</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Basics"><a>BASICS</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Basics_Matlab"><a href="index87b6.html?aux=Basics_Matlab">MATLAB</a></li>
							<li class="item" id="Basics_Simulink"><a href="indexe9ea.html?aux=Basics_Simulink">Simulink</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Index"><a>INDEX</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Index_Tutorials"><a href="index5e52.html?aux=Index_Tutorials">Tutorials</a></li>
							<li class="item" id="Index_Commands"><a href="index111e.html?aux=Index_Commands">Commands</a></li>
							<li class="item" id="Index_Animations"><a href="indexc3c5.html?aux=Index_Animations">Animations</a></li>
							<li class="item" id="Index_Extras"><a href="indexb290.html?aux=Index_Extras">Extras</a></li>
						</div></div>
					</ul>
									
					<ul class="menu">
						<li class="heading" id="Next"><a href="indexb290.html?aux=Index_Extras">NEXT&nbsp;&#x25BA;</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
											
				</div>

			</div>
			
			<div id="body_container">
			
				<div id="gradient_container"></div>
			
				<div id="top">
				
					<a href="index1304.html?aux=Home"><img id="CTMS_logo" src="Images/CTMS_logo.png"></a>
				
					<ul class="example">
					
						<li class="item" id="Introduction"><a href="indexf617.html?example=Introduction&amp;section=SystemModeling"><img class="icon" src="Images/Introduction_Icon.png"><div class="tab">INTRODUCTION</div></a></li>
						<li class="item" id="CruiseControl"><a href="index9b00.html?example=CruiseControl&amp;section=SystemModeling"><img class="icon" src="Images/CruiseControl_Icon.png"><div class="tab">CRUISE&nbsp;CONTROL</div></a></li>
						<li class="item" id="MotorSpeed"><a href="index9e20.html?example=MotorSpeed&amp;section=SystemModeling"><img class="icon" src="Images/MotorSpeed_Icon.png"><div class="tab">MOTOR&nbsp;SPEED</div></a></li>
						<li class="item" id="MotorPosition"><a href="index9ba6.html?example=MotorPosition&amp;section=SystemModeling"><img class="icon" src="Images/MotorPosition_Icon.png"><div class="tab">MOTOR&nbsp;POSITION</div></a></li>
						<li class="item" id="Suspension"><a href="index7abe.html?example=Suspension&amp;section=SystemModeling"><img class="icon" src="Images/Suspension_Icon.png"><div class="tab">SUSPENSION</div></a></li>
						<li class="item" id="InvertedPendulum"><a href="indexdeb1.html?example=InvertedPendulum&amp;section=SystemModeling"><img class="icon" src="Images/InvertedPendulum_Icon.png"><div class="tab">INVERTED&nbsp;PENDULUM</div></a></li>
						<li class="item" id="AircraftPitch"><a href="index1987.html?example=AircraftPitch&amp;section=SystemModeling"><img class="icon" src="Images/AircraftPitch_Icon.png"><div class="tab">AIRCRAFT&nbsp;PITCH</div></a></li>
						<li class="item" id="BallBeam"><a href="index9ee5.html?example=BallBeam&amp;section=SystemModeling"><img class="icon" src="Images/BallBeam_Icon.png"><div class="tab">BALL&nbsp;&amp;&nbsp;BEAM</div></a></li>
					
					</ul> 
		
				</div>
				
				<div id="content_container">
					<div class="content">
   <div class="content_fx">
      <h1>Extras: Converting Between System Representations</h1>
      <!--introduction-->
      <p>Key MATLAB Commands used in this tutorial are: <a href="http://www.mathworks.com/help/toolbox/control/ref/ss.html"><tt>tf</tt></a> , <a href="http://www.mathworks.com/help/toolbox/control/ref/ssdata.html"><tt>ssdata</tt></a></p>
      <!--/introduction-->
      <h2>Contents</h2>
      <div>
         <ul>
            <li><a href="#4">System variable conversions</a></li>
            <li><a href="#20">State-Space to Transfer Function</a></li>
            <li><a href="#25">Zeros at Infinity</a></li>
            <li><a href="#30">Transfer Function to State-Space</a></li>
            <li><a href="#35">State-Space to Zero/Pole and Transfer Function to Zero/Pole:</a></li>
            <li><a href="#44">Pole/Zero to State-Space and Pole/Zero to Transfer Function</a></li>
         </ul>
      </div>
      <p>A dynamic system is most commonly described in one of three ways:</p>
      <div>
         <ol>
            <li>By a set of state-space equations and the corresponding matrices</li>
            <li>By a transfer function using the symbolic s variable or numerator and denominator polynomials</li>
            <li>By a list of poles and zeros and the associated gain</li>
         </ol>
      </div>
      <p>From time to time, it is useful to convert between these various representations. MATLAB can do these conversions quickly
         and easily.
      </p>
      <p>In addition, beginning with version 5.0, MATLAB has the ability to represent systems in a generic sense in a system variable.
         System variables are used independently of the original system notation, and it is easy to both store a system variable from
         any representation and to extract any of the three system representations from a system variable.
      </p>
      <h2>System variable conversions<a name="4"></a></h2>
      <p>Suppose you have a transfer function of the form</p>
      <p><span class="eqn_num">(1)</span><img class="display_eqn" src="Content/Extras/html/Extras_Conversions_eq86387.png" alt="$$&#xA;G(s) = \frac{2s+1}{4s^2+3s+2}&#xA;$$"></p>
      <p>This can be represented in state space form with the following commands:</p><pre class="codeinput">s = tf(<span class="string">'s'</span>);
G = (2*s+1)/(4*s^2+3*s+2)
</pre><pre class="codeoutput">
G =
 
      2 s + 1
  ---------------
  4 s^2 + 3 s + 2
 
Continuous-time transfer function.

</pre><p>or equivalently by assigning the numerator and denominator coefficient vectors as follows:</p><pre class="codeinput">num = [2 1];
den = [4 3 2];
G = tf(num,den)
</pre><pre class="codeoutput">
G =
 
      2 s + 1
  ---------------
  4 s^2 + 3 s + 2
 
Continuous-time transfer function.

</pre><p>A state-space model can be extracted from the system variable G with the following command:</p><pre class="codeinput">[A,B,C,D] = ssdata(G)
</pre><pre class="codeoutput">A =
   -0.7500   -0.5000
    1.0000         0
B =
     1
     0
C =
    0.5000    0.2500
D =
     0
</pre><p>This state-space representation can be stored in another (equivalent) system variable, H, with the following commands which
         returns the following output showing the relationships between the state, input, and output variables
      </p><pre class="codeinput">H = ss(A,B,C,D)
</pre><pre class="codeoutput">
H =
 
  a = 
          x1     x2
   x1  -0.75   -0.5
   x2      1      0
 
  b = 
       u1
   x1   1
   x2   0
 
  c = 
         x1    x2
   y1   0.5  0.25
 
  d = 
       u1
   y1   0
 
Continuous-time state-space model.

</pre><p>To extract a zero-pole-gain model from this system variable, you enter the following command</p><pre class="codeinput">[z,p,k] = zpkdata(H,<span class="string">'v'</span>)
</pre><pre class="codeoutput">z =
   -0.5000
p =
  -0.3750 + 0.5995i
  -0.3750 - 0.5995i
k =
    0.5000
</pre><p>The 'v' causes the function to return a vectorized version of the zeros and poles, which is useful for SISO systems.</p>
      <p>We can now form another system variable, K, from this zpk representation with the following command</p><pre class="codeinput">K = zpk(z,p,k)
</pre><pre class="codeoutput">
K =
 
      0.5 (s+0.5)
  -------------------
  (s^2 + 0.75s + 0.5)
 
Continuous-time zero/pole/gain model.

</pre><p>Finally, given this system variable, we can extract a transfer function representation with the following command</p><pre class="codeinput">[num,den] = tfdata(K,<span class="string">'v'</span>)
</pre><pre class="codeoutput">num =
         0    0.5000    0.2500
den =
    1.0000    0.7500    0.5000
</pre><p>(Again, the 'v' is useful for SISO systems.) This returns the following transfer function representation which is equal to
         the original transfer function before all the conversions (although both the numerator and denominator are scaled by a factor
         of 4)
      </p>
      <h2>State-Space to Transfer Function<a name="20"></a></h2>
      <p>In addition to using system variab to convert between representations, you can convert between representations directly.</p>
      <p>Suppose you have a set of state-space equations and you would like to convert them to the equivalent transfer function. This
         is done using the command
      </p><pre class="codeinput">[num,den] = ss2tf(A,B,C,D)
</pre><pre class="codeoutput">num =
         0    0.5000    0.2500
den =
    1.0000    0.7500    0.5000
</pre><p>For example, suppose you had the following set of state equations:</p>
      <p><span class="eqn_num">(2)</span><img class="display_eqn" src="Content/Extras/html/Extras_Conversions_eq24075.png" alt="$$&#xA;\left[ \begin{array}{c} \dot{x} \\ \ddot{x} \end{array} \right] = \left[ \begin{array}{cc} 0 &amp; 1 \\ -\frac{k}{m}  &amp; -\frac{b}{m} \end{array} \right] \left[ \begin{array}{c} x \\ \dot{x} \end{array} \right] + \left[ \begin{array}{c} 0 \\ \frac{1}{m} \end{array} \right] F(t)&#xA;$$"></p>
      <p><span class="eqn_num">(3)</span><img class="display_eqn" src="Content/Extras/html/Extras_Conversions_eq73060.png" alt="$$&#xA;y = \left[ \begin{array}{cc} 1 &amp; 0 \end{array} \right] \left[&#xA;\begin{array}{c} x \\ \dot{x} \end{array} \right]&#xA;$$"></p>
      <p>with</p>
      <div>
         <ul>
            <li>m = 100 kg</li>
            <li>b = 50 Ns/m</li>
            <li>u = 500 N</li>
         </ul>
      </div>
      <p>If you want to change this to a transfer function, just run the following m-file:</p><pre class="codeinput">A = [0   1
     0   -0.05];

B = [0;
     0.001];

C = [0   1];

D = 0;

[num,den]=ss2tf(A,B,C,D)
</pre><pre class="codeoutput">num =
   1.0e-03 *
         0    1.0000         0
den =
    1.0000    0.0500         0
</pre><p>Here are some notes about ss2tf:</p>
      <div>
         <ul>
            <li>The numerator, num, will have as many rows as there are outputs (or rows in the matrix C).</li>
            <li>The numerator and denominator are returned in descending powers of s</li>
            <li>Care must be taken to check the numerator and denominator, as zeros at infinity may produce erroneous transfer functions.</li>
         </ul>
      </div>
      <h2>Zeros at Infinity<a name="25"></a></h2>
      <p>This last point needs some further explanation. We say that a system has zeros at infinity if the limit as s-&gt;infinity of
         the value of the transfer function is equal to zero; this happens whenever you have more poles than zeros. You will see this
         in the root locus plot as asymptotes which go to infinity (the number of asymptotes is equal to the number of zeros at infinity).
         MATLAB sometimes computes these zeros at infinity as being large finite numbers.When this happens, some of the coefficients
         in the numerator that are supposed to be zero end up being very small numbers. It may not seem like a big deal, but it can
         cause errors when trying to use the transfer function later on. You should always check your transfer function, and if numbers
         that are 0.0000 show up that are supposed to be zero, rewrite the numerator into MATLAB to compensate.
      </p>
      <p>A good example follows:</p><pre class="codeinput">A = [0    1    0      0
     0 -0.1818 2.6727 0
     0    0    0      1
     0 -4.545 31.1818 0];

B = [0
     1.8182
     0
     4.5455];

C = [1 0 0 0
	 0 0 1 0];

D = [0
     0];

[num,den]=ss2tf(A,B,C,D)
</pre><pre class="codeoutput">num =
         0         0    1.8182   -0.0000  -44.5460
         0         0    4.5455   -7.4373   -0.0000
den =
    1.0000    0.1818  -31.1818    6.4786         0
</pre><p>If you look at the numerator, the first and last element of each row are 0, while the second and fourth element in each row
         are 0.0000. If you look closer at each of these elements, you will find that they are not zero, but in fact some very small
         number. To see this, enter any of the following commands into the MATLAB command window: num(1,2), num(1,4), num(2,2) or num(2,4).
         You should get something similar to the following as an answer: 7.1054e-15, -6.2172e-15, 1.2434e-14, or 4.4409e-15. Look at
         the roots of the numerator polynomials using roots(num(1,:)) and you will see the roots of the numerator which are almost
         at infinity but not quite.
      </p>
      <p>This numerical inconsistency can be eliminated by adding the following line after the ss2tf command to get rid of the numbers
         that are not supposed to be there:
      </p><pre class="codeinput">num = [num(1,3) 0 num(1,5)
       num(2,3) 0 num(2,5)];
</pre><p>Now all of the small numbers have been replaced with zeros. Always make sure to look at your transfer function and understand
         what it means before you use it in the design process.
      </p>
      <h2>Transfer Function to State-Space<a name="30"></a></h2>
      <p>The reverse of the command ss2tf is the tf2ss command, which converts a transfer function of a system into state-space form.
         The command is issued like this:
      </p><pre class="codeinput">[A,B,C,D] = tf2ss(num,den)
</pre><pre class="codeoutput">A =
   -0.1818   31.1818   -6.4786         0
    1.0000         0         0         0
         0    1.0000         0         0
         0         0    1.0000         0
B =
     1
     0
     0
     0
C =
         0    1.8182         0  -44.5460
         0    4.5455         0   -0.0000
D =
     0
     0
</pre><p>One important fact to note is that although there is only one transfer function that describes a system, you can have multiple
         state-space equations that describe a system. The tf2ss command returns the state-space matrices in control canonical form.
         Therefore, if you take a set of state-space equations, convert them into a transfer function, and then convert it back, you
         will not have the same set of state-space equations you started with unless you started with matrices in control canonical
         form.
      </p>
      <p>As an example, take the numerator and denominator created above and convert it back to state-space. This can be done with
         the following MATLAB code:
      </p><pre class="codeinput">[A,B,C,D] = tf2ss(num,den)
</pre><pre class="codeoutput">A =
   -0.1818   31.1818   -6.4786         0
    1.0000         0         0         0
         0    1.0000         0         0
         0         0    1.0000         0
B =
     1
     0
     0
     0
C =
         0    1.8182         0  -44.5460
         0    4.5455         0   -0.0000
D =
     0
     0
</pre><p>This is obviously not the same set of matrices that were initially used, but the input-output behavior of this system is the
         same as that of the previous one. There are infinitely many ways to represent a given transfer function in state-space form;
         MATLAB chooses the control canonical form. The states will not have the same meaning as they originally did.
      </p>
      <h2>State-Space to Zero/Pole and Transfer Function to Zero/Pole:<a name="35"></a></h2>
      <p>There is also a third way to represent a dynamic system, and that is the pole-zero model. This model is basically the same
         as the transfer function model, except that the polynomials have been factored so the poles are all in the denominator and
         the zeros are in the numerator. The basic format looks like the following:
      </p>
      <p><span class="eqn_num">(4)</span><img class="display_eqn" src="Content/Extras/html/Extras_Conversions_eq50043.png" alt="$$&#xA;G(s) = k\frac{(s-z_1)(s-z_2)\cdots(s-z_m)}{(s-p_1)(s-p_2)\cdots(s-p_n)}&#xA;$$"></p>
      <p>Remember that for a proper transfer function, the number of poles n is greater than or equal to the number of zeros m. MATLAB
         can make the transformations from either state-space or transfer function to the pole-zero representation. The commands to
         get the system into zero-pole form are:
      </p><pre class="codeinput">[z,p,k] = tf2zp(num,den)
</pre><pre class="codeoutput">z =
    4.9498    0.0000
   -4.9498   -0.0000
p =
         0
   -5.7753
    5.3851
    0.2083
k =
    1.8182
    4.5455
</pre><p>if you have a transfer function, and:</p><pre class="codeinput">[z,p,k] = ss2zp(A,B,C,D)
</pre><pre class="codeoutput">z =
    4.9498    0.0000
   -4.9498   -0.0000
p =
         0
   -5.7753
    5.3851
    0.2083
k =
    1.8182
    4.5455
</pre><p>if you have a state-space model</p>
      <p>Both of these commands should return three variab: z, p, k. The variable z returns all of the zeros in columns. There should
         be one column for every row in the transfer function numerator or every output, y (rows in the C matrix). The variable p returns
         all of the poles in a column. The variable k returns a column of gain values. The column should have as many rows as numerator
         rows or outputs, y. For example, using t he state space model and transfer function above, enter either of the following m-files:
      </p><pre class="codeinput">num = [1.8182    0       -44.5460;
	   4.5455   -7.4373   0];

den = [1 0.1818 -31.1818 6.4786 0];

[z,p,k] = tf2zp(num,den)
</pre><pre class="codeoutput">z =
    4.9498         0
   -4.9498    1.6362
p =
         0
   -5.7753
    5.3851
    0.2083
k =
    1.8182
    4.5455
</pre><p>or</p><pre class="codeinput">A = [0      1      	0      		0
 	 0     -0.1818    2.6727          0
 	 0      0         0               1
     0     -4.545     31.1818         0];

B = [0
     1.8182
     0
     4.5455];

C = [1 0 0 0
     0 0 1 0];

D = [0
     0];

[z,p,k] = ss2zp(A,B,C,D)
</pre><pre class="codeoutput">z =
    4.9498    1.6362
   -4.9498   -0.0000
p =
         0
   -5.7753
    0.2083
    5.3851
k =
    1.8182
    4.5455
</pre><p>There are two columns of zeros, and therefore the k matrix has two rows (one for each z column).</p>
      <h2>Pole/Zero to State-Space and Pole/Zero to Transfer Function<a name="44"></a></h2>
      <p>As you may have already guessed, if you have a system described by the pole-zero method, you can convert that to either the
         state-space model or the transfer function. To get the state-space model, enter the following command:
      </p><pre class="codeinput">[A,B,C,D] = zp2ss(z,p,k)
</pre><pre class="codeoutput">A =
   -0.1818   31.1818   -6.4786         0
    1.0000         0         0         0
         0    1.0000         0         0
         0         0    1.0000         0
B =
     1
     0
     0
     0
C =
         0    1.8182   -0.0000  -44.5460
         0    4.5455   -7.4373   -0.0000
D =
     0
     0
</pre><p>Again, it is important to note that more than one set of state-space matrices can describe a system. The state-space matrices
         returned from this command are also in control canonical form. For example, take the z, p, and k matrices you just created
         and convert them back to state-space:
      </p><pre class="codeinput">[A,B,C,D] = zp2ss(z,p,k)
</pre><pre class="codeoutput">A =
   -0.1818   31.1818   -6.4786         0
    1.0000         0         0         0
         0    1.0000         0         0
         0         0    1.0000         0
B =
     1
     0
     0
     0
C =
         0    1.8182   -0.0000  -44.5460
         0    4.5455   -7.4373   -0.0000
D =
     0
     0
</pre><p>Again, it is important to note that more than one set of state-space matrices can describe a system. The state-space matrices
         returned from this command are also in control canonical form
      </p>
      <p>You will recognize this as the same set of matrices you got using the command, tf2ss.</p>
      <p>To get a system described by a pole-zero model into a transfer function model, use the following command:</p><pre class="codeinput">[num,den] = zp2tf(z,p,k)
</pre><pre class="codeoutput">num =
         0         0    1.8182   -0.0000  -44.5460
         0         0    4.5455   -7.4373   -0.0000
den =
    1.0000    0.1818  -31.1818    6.4786         0
</pre><p>You will recognize this as the same transfer function we started out with.</p>
      <p class="footer"><br>
         Published with MATLAB&reg; 7.14<br></p>
   </div>
</div>
<!--
##### SOURCE BEGIN #####
%% Extras: Converting Between System Representations
%
% Key MATLAB Commands used in this tutorial are:
% <http://www.mathworks.com/help/toolbox/control/ref/ss.html |tf|> , 
% <http://www.mathworks.com/help/toolbox/control/ref/ssdata.html |ssdata|>
%
%%
% A dynamic system is most commonly described in one of three ways: 
%%
% # By a set of state-space equations and the corresponding matrices
% # By a transfer function using the symbolic s variable or numerator and denominator polynomials
% # By a list of poles and zeros and the associated gain
%%
% From time to time, it is useful to convert between these various 
% representations. MATLAB can do these conversions quickly and easily.
%
% In addition, beginning with version 5.0, MATLAB has the ability to represent 
% systems in a generic sense in a system variable. System variables are used 
% independently of the original system notation, and it is easy to both 
% store a system variable from any representation and to extract any of the 
% three system representations from a system variable. 
%
%% System variable conversions
% Suppose you have a transfer function of the form 
%%
% $$
% G(s) = \frac{2s+1}{4s^2+3s+2}
% $$
%
% This can be represented in state space form with the following commands: 
%%

s = tf('s');
G = (2*s+1)/(4*s^2+3*s+2)

%%
%
% or equivalently by assigning the numerator and denominator coefficient
% vectors as follows:
%
%%

num = [2 1];
den = [4 3 2];
G = tf(num,den)

%%
%
% A state-space model can be extracted from the system variable G with the
% following command: 
%%

[A,B,C,D] = ssdata(G)

%%
%
% This state-space representation can be stored in another (equivalent)
% system variable, H, with the following commands which returns the
% following output showing the relationships between the state, input, and
% output variables
%
%%

H = ss(A,B,C,D)

%%
%
% To extract a zero-pole-gain model from this system variable, you enter
% the following command 
%
%%

[z,p,k] = zpkdata(H,'v')

%%
%
% The 'v' causes the function to return a vectorized version of the zeros
% and poles, which is useful for SISO systems.
%
% We can now form another system variable, K, from this zpk representation
% with the following command 
%
%%

K = zpk(z,p,k)

%%
%
% Finally, given this system variable, we can extract a transfer function
% representation with the following command 
%
%%

[num,den] = tfdata(K,'v')

%%
%
% (Again, the 'v' is useful for SISO systems.) This returns the following
% transfer function representation which is equal to the original transfer 
% function before all the conversions (although both the numerator and 
% denominator are scaled by a factor of 4) 
%
%% State-Space to Transfer Function
%
% In addition to using system variab to convert between representations,
% you can convert between representations directly. 
%
% Suppose you have a set of state-space equations and you would like to
% convert them to the equivalent transfer function. This is done using the 
% command
%
%%

[num,den] = ss2tf(A,B,C,D)

%%
%
% For example, suppose you had the following set of state equations: 
%
% $$
% \left[ \begin{array}{c} \dot{x} \\ \ddot{x} \end{array} \right] = \left[ \begin{array}{cc} 0 & 1 \\ -\frac{k}{m}  & -\frac{b}{m} \end{array} \right] \left[ \begin{array}{c} x \\ \dot{x} \end{array} \right] + \left[ \begin{array}{c} 0 \\ \frac{1}{m} \end{array} \right] F(t)
% $$
%
% $$
% y = \left[ \begin{array}{cc} 1 & 0 \end{array} \right] \left[
% \begin{array}{c} x \\ \dot{x} \end{array} \right]
% $$
%
% with
%
% * m = 100 kg
% * b = 50 Ns/m
% * u = 500 N
%
% If you want to change this to a transfer function, just run the following
% m-file: 
%
%%

A = [0   1 
     0   -0.05];
     	
B = [0; 
     0.001];
     	
C = [0   1];
     
D = 0;     
     	
[num,den]=ss2tf(A,B,C,D)

%%
%
% Here are some notes about ss2tf:
%
% * The numerator, num, will have as many rows as there are outputs (or rows in the matrix C).
% * The numerator and denominator are returned in descending powers of s
% * Care must be taken to check the numerator and denominator, as zeros at infinity may produce erroneous transfer functions. 
%
%% Zeros at Infinity
%
% This last point needs some further explanation. We say that a system has
% zeros at infinity if the limit as s->infinity of the value of the transfer 
% function is equal to zero; this happens whenever you have more poles than 
% zeros. You will see this in the root locus plot as asymptotes which go to 
% infinity (the number of asymptotes is equal to the number of zeros at 
% infinity). MATLAB sometimes computes these zeros at infinity as being 
% large finite numbers.When this happens, some of the coefficients in the 
% numerator that are supposed to be zero end up being very small numbers. 
% It may not seem like a big deal, but it can cause errors when trying to 
% use the transfer function later on. You should always check your transfer 
% function, and if numbers that are 0.0000 show up that are supposed to be 
% zero, rewrite the numerator into MATLAB to compensate. 
%
% A good example follows:
%
%%

A = [0    1    0      0
     0 -0.1818 2.6727 0
     0    0    0      1          
     0 -4.545 31.1818 0];
          
B = [0
     1.8182	  
     0
     4.5455];     
	  
C = [1 0 0 0	  
	 0 0 1 0];     
	  
D = [0
     0];     
	  
[num,den]=ss2tf(A,B,C,D)

%%
%
% If you look at the numerator, the first and last element of each row are
% 0, while the second and fourth element in each row are 0.0000. If you 
% look closer at each of these elements, you will find that they are not 
% zero, but in fact some very small number. To see this, enter any of the 
% following commands into the MATLAB command window: num(1,2), num(1,4), 
% num(2,2) or num(2,4). You should get something similar to the following 
% as an answer: 7.1054e-15, -6.2172e-15, 1.2434e-14, or 4.4409e-15. Look 
% at the roots of the numerator polynomials using roots(num(1,:)) and you 
% will see the roots of the numerator which are almost at infinity but not 
% quite. 
%
% This numerical inconsistency can be eliminated by adding the following
% line after the ss2tf command to get rid of the numbers that are not supposed to be there: 
%
%%

num = [num(1,3) 0 num(1,5)
       num(2,3) 0 num(2,5)];
        
%%
%
% Now all of the small numbers have been replaced with zeros. Always make
% sure to look at your transfer function and understand what it means before 
% you use it in the design process. 
%
%% Transfer Function to State-Space
%
% The reverse of the command ss2tf is the tf2ss command, which converts a
% transfer function of a system into state-space form. The command is 
% issued like this: 
%
%%

[A,B,C,D] = tf2ss(num,den)

%%
%
% One important fact to note is that although there is only one transfer
% function that describes a system, you can have multiple state-space 
% equations that describe a system. The tf2ss command returns the state-space 
% matrices in control canonical form. Therefore, if you take a set of 
% state-space equations, convert them into a transfer function, and then 
% convert it back, you will not have the same set of state-space equations 
% you started with unless you started with matrices in control canonical form. 
%
% As an example, take the numerator and denominator created above and
% convert it back to state-space. This can be done with the following MATLAB code:
%
%%

[A,B,C,D] = tf2ss(num,den)

%%
%
% This is obviously not the same set of matrices that were initially used,
% but the input-output behavior of this system is the same as that of the 
% previous one. There are infinitely many ways to represent a given transfer
% function in state-space form; MATLAB chooses the control canonical form. 
% The states will not have the same meaning as they originally did. 
%
%% State-Space to Zero/Pole and Transfer Function to Zero/Pole:
%
% There is also a third way to represent a dynamic system, and that is the
% pole-zero model. This model is basically the same as the transfer function 
% model, except that the polynomials have been factored so the poles are all 
% in the denominator and the zeros are in the numerator. The basic format 
% looks like the following: 
%
% $$
% G(s) = k\frac{(s-z_1)(s-z_2)\cdots(s-z_m)}{(s-p_1)(s-p_2)\cdots(s-p_n)}
% $$
%
% Remember that for a proper transfer function, the number of poles n is
% greater than or equal to the number of zeros m. MATLAB can make the 
% transformations from either state-space or transfer function to the 
% pole-zero representation. The commands to get the system into zero-pole 
% form are: 
%
%%

[z,p,k] = tf2zp(num,den)

%%
%
% if you have a transfer function, and: 
%
%%

[z,p,k] = ss2zp(A,B,C,D)

%%
%
% if you have a state-space model
%
% Both of these commands should return three variab: z, p, k. The variable
% z returns all of the zeros in columns. There should be one column for 
% every row in the transfer function numerator or every output, y (rows in 
% the C matrix). The variable p returns all of the poles in a column. The 
% variable k returns a column of gain values. The column should have as 
% many rows as numerator rows or outputs, y. For example, using t he state 
% space model and transfer function above, enter either of the following m-files: 
%
%% 

num = [1.8182    0       -44.5460; 
	   4.5455   -7.4373   0];
	 	      
den = [1 0.1818 -31.1818 6.4786 0];
 	  
[z,p,k] = tf2zp(num,den)

%%
% or
%%

A = [0      1      	0      		0
 	 0     -0.1818    2.6727          0
 	 0      0         0               1
     0     -4.545     31.1818         0];
 
B = [0
     1.8182 
     0 	  
     4.5455];
               
C = [1 0 0 0
     0 0 1 0];
               
D = [0	  
     0];
               
[z,p,k] = ss2zp(A,B,C,D)

%%
%
% There are two columns of zeros, and therefore the k matrix has two rows
% (one for each z column). 
%
%% Pole/Zero to State-Space and Pole/Zero to Transfer Function
%
% As you may have already guessed, if you have a system described by the
% pole-zero method, you can convert that to either the state-space model 
% or the transfer function. To get the state-space model, enter the 
% following command: 
%
%% 

[A,B,C,D] = zp2ss(z,p,k)

%%
%
% Again, it is important to note that more than one set of state-space
% matrices can describe a system. The state-space matrices returned from 
% this command are also in control canonical form. For example, take the z, 
% p, and k matrices you just created and convert them back to state-space: 
%
%% 

[A,B,C,D] = zp2ss(z,p,k)

%%
%
% Again, it is important to note that more than one set of state-space
% matrices can describe a system. The state-space matrices returned from 
% this command are also in control canonical form
%
% You will recognize this as the same set of matrices you got using the
% command, tf2ss. 
%
% To get a system described by a pole-zero model into a transfer function
% model, use the following command: 
%
%%

[num,den] = zp2tf(z,p,k)

%%
%
% You will recognize this as the same transfer function we started out with. 







##### SOURCE END #####
-->				</div>
				
				<div id="left">

					<ul class="section">
						<li class="heading" id="System">SYSTEM<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SystemModeling"><a href="indexf617.html?example=Introduction&amp;section=SystemModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SystemAnalysis"><a href="indexa13b.html?example=Introduction&amp;section=SystemAnalysis">ANALYSIS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Control">CONTROL<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="ControlPID"><a href="index6e33.html?example=Introduction&amp;section=ControlPID">PID<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlRootLocus"><a href="indexe528.html?example=Introduction&amp;section=ControlRootLocus">ROOT&nbsp;LOCUS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlFrequency"><a href="index7f35.html?example=Introduction&amp;section=ControlFrequency">FREQUENCY<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlStateSpace"><a href="index9b18.html?example=Introduction&amp;section=ControlStateSpace">STATE-SPACE<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlDigital"><a href="index4e79.html?example=Introduction&amp;section=ControlDigital">DIGITAL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Simulink">SIMULINK<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SimulinkModeling"><a href="index5af4.html?example=Introduction&amp;section=SimulinkModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SimulinkControl"><a href="index87ee.html?example=Introduction&amp;section=SimulinkControl">CONTROL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
		
				</div>
			
				<div style="clear:both"></div>
				
				<div id="bottombar"><span style="color:#FF5500;font-weight:bold">.</div>
				
			</div>
			
		</div>
	
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?aux=Extras_Conversions by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:13:52 GMT -->
</html>

	onversions by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:13:52 GMT -->
</html>

	/div>
			
		</div>
	
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?aux=Extras_Conversions by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:13:52 GMT -->
</html>

	onversions by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:13:52 GMT -->
</html>

	pier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:13:52 GMT -->
</html>

	onversions by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:13:52 GMT -->
</html>

	