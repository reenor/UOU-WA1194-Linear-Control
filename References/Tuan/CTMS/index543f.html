<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

	
<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=BallBeam&section=ControlPID by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:13:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

		<script type="text/javascript" src="jquery.js"></script>
					
		<link rel='stylesheet' type='text/css' href='style.css' />
		<script type="text/javascript">
	
			var example = "BallBeam"; 
			var section = "ControlPID"; 
			var aux = ""; 
			var effects = Boolean(1); 
			var tips = Boolean(1); 
			$.fx.off = !effects;
			
			$(document).keydown(function(e){
				if (!$("#search_field").is(":focus")){
					if (e.keyCode == 39) { 
						window.location = "indexc9b8.html?example=BallBeam&amp;section=ControlRootLocus";
					}
					if (e.keyCode == 37) { 
						window.history.back()
					}
				}
			});		
			
		</script>
			
		<meta http-equiv="Content-Type" Content="text/html; charset=utf-8" />
		<meta http-equiv="PRAGMA" Content="NO-CACHE" />
		
		<title>Control Tutorials for MATLAB and Simulink - Ball & Beam: PID Controller Design</title>
			
	</head>

	<body>
	
		
		<div id="container">
		
			<form id="search_form"><input id="search_field" type="text" name="q" placeholder="Search Control Tutorials"/></form>
			<form class="option_form" method="post" onclick="submit()"><div>Effects</div><input type="hidden" name="effects" value="0"/><input type="checkbox" name="effects" value="1" checked='true' /></form>
			<form class="option_form" method="post" onclick="submit()"><div>Tips</div><input type="hidden" name="tips" value="0"/><input type="checkbox" name="tips" value="1" checked='true' /></form>	
				
			<div style="clear:both"></div>
		
			<div id="header">
		
				

				
				
				<div id="menu_container">
				
					<ul class="menu">
						<li class="heading" id="Tips"><a href="index80e7.html?aux=Extras_Tips">TIPS</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
				
					<ul class="menu">
						<li class="heading" id="About"><a>ABOUT</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="About_Tutorials"><a href="index64fe.html?aux=About_Tutorials">Tutorials</a></li>
							<li class="item" id="About_Contact"><a href="mailto:ControlTutorialsMatlabSimulink@gmail.com">Contact</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Basics"><a>BASICS</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Basics_Matlab"><a href="index87b6.html?aux=Basics_Matlab">MATLAB</a></li>
							<li class="item" id="Basics_Simulink"><a href="indexe9ea.html?aux=Basics_Simulink">Simulink</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Index"><a>INDEX</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Index_Tutorials"><a href="index5e52.html?aux=Index_Tutorials">Tutorials</a></li>
							<li class="item" id="Index_Commands"><a href="index111e.html?aux=Index_Commands">Commands</a></li>
							<li class="item" id="Index_Animations"><a href="indexc3c5.html?aux=Index_Animations">Animations</a></li>
							<li class="item" id="Index_Extras"><a href="indexb290.html?aux=Index_Extras">Extras</a></li>
						</div></div>
					</ul>
									
					<ul class="menu">
						<li class="heading" id="Next"><a href="indexc9b8.html?example=BallBeam&amp;section=ControlRootLocus">NEXT&nbsp;&#x25BA;</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
											
				</div>

			</div>
			
			<div id="body_container">
			
				<div id="gradient_container"></div>
			
				<div id="top">
				
					<a href="index1304.html?aux=Home"><img id="CTMS_logo" src="Images/CTMS_logo.png"></a>
				
					<ul class="example">
					
						<li class="item" id="Introduction"><a href="index6e33.html?example=Introduction&amp;section=ControlPID"><img class="icon" src="Images/Introduction_Icon.png"><div class="tab">INTRODUCTION</div></a></li>
						<li class="item" id="CruiseControl"><a href="index08fb.html?example=CruiseControl&amp;section=ControlPID"><img class="icon" src="Images/CruiseControl_Icon.png"><div class="tab">CRUISE&nbsp;CONTROL</div></a></li>
						<li class="item" id="MotorSpeed"><a href="index84c7.html?example=MotorSpeed&amp;section=ControlPID"><img class="icon" src="Images/MotorSpeed_Icon.png"><div class="tab">MOTOR&nbsp;SPEED</div></a></li>
						<li class="item" id="MotorPosition"><a href="indexe534.html?example=MotorPosition&amp;section=ControlPID"><img class="icon" src="Images/MotorPosition_Icon.png"><div class="tab">MOTOR&nbsp;POSITION</div></a></li>
						<li class="item" id="Suspension"><a href="index24ea.html?example=Suspension&amp;section=ControlPID"><img class="icon" src="Images/Suspension_Icon.png"><div class="tab">SUSPENSION</div></a></li>
						<li class="item" id="InvertedPendulum"><a href="index9b2d.html?example=InvertedPendulum&amp;section=ControlPID"><img class="icon" src="Images/InvertedPendulum_Icon.png"><div class="tab">INVERTED&nbsp;PENDULUM</div></a></li>
						<li class="item" id="AircraftPitch"><a href="indexb04e.html?example=AircraftPitch&amp;section=ControlPID"><img class="icon" src="Images/AircraftPitch_Icon.png"><div class="tab">AIRCRAFT&nbsp;PITCH</div></a></li>
						<li class="item" id="BallBeam"><a href="index543f.html?example=BallBeam&amp;section=ControlPID"><img class="icon" src="Images/BallBeam_Icon.png"><div class="tab">BALL&nbsp;&amp;&nbsp;BEAM</div></a></li>
					
					</ul> 
		
				</div>
				
				<div id="content_container">
					<div class="content">
   <div class="content_fx">
      <h1>Ball &amp; Beam: PID Controller Design</h1>
      <!--introduction-->
      <p>Key MATLAB commands used in this tutorial are: <a href="http://www.mathworks.com/help/toolbox/control/ref/tf.html"><tt>tf</tt></a> , <a href="http://www.mathworks.com/help/toolbox/control/ref/step.html"><tt>step</tt></a> , <a href="http://www.mathworks.com/help/toolbox/control/ref/feedback.html"><tt>feedback</tt></a></p>
      <!--/introduction-->
      <h2>Contents</h2>
      <div>
         <ul>
            <li><a href="#2">Closed-loop representation</a></li>
            <li><a href="#3">Proportional control</a></li>
            <li><a href="#8">Proportional-derivative control</a></li>
         </ul>
      </div>
      <p>The open-loop transfer function of the plant for the ball and beam experiment is given below:</p>
      <p><span class="eqn_num">(1)</span><img class="display_eqn" src="Content/BallBeam/Control/PID/html/BallBeam_ControlPID_eq15044.png" alt="$$&#xA;P(s) = \frac{R(s)}{\Theta(s)} =&#xA;-\frac{mgd}{L\left(\frac{J}{R^2}+m\right)}\frac{1}{s^2} \qquad [ \frac{m}{rad} ]&#xA;$$"></p>
      <p>The design criteria for this problem are:</p>
      <div>
         <ul>
            <li>Settling time less than 3 seconds</li>
            <li>Overshoot less than 5%</li>
         </ul>
      </div>
      <p>To see the derivation of the equations for this problem refer to the <a href="index9ee5.html?example=BallBeam&amp;section=SystemModeling">Ball &amp; Beam: System Modeling</a> page.
      </p>
      <h2>Closed-loop representation<a name="2"></a></h2>
      <p>The block diagram for this example with a controller and unity feedback of the ball's position is shown below:</p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/BallBeam/Control/PID/figures/feedback_ball.png" alt=""> </p>
      <p>First, we will study the response of the system shown above when a proportional controller is used. Then, derivative and/or
         integral control will be added if necessary.
      </p>
      <p>Recall, that the transfer function for a PID controller is:</p>
      <p><span class="eqn_num">(2)</span><img class="display_eqn" src="Content/BallBeam/Control/PID/html/BallBeam_ControlPID_eq40391.png" alt="$$&#xA;C(s) = K_p + \frac{K_i}{s} + K_d s = \frac{K_d s^2 + K_p s + K_i}{s}&#xA;$$"></p>
      <h2>Proportional control<a name="3"></a></h2>
      <p>The closed-loop transfer function for proportional control with a proportional gain (Kp) equal to 100, can be modeled by copying
         the following lines of MATLAB code into a new <a href="indexd754.html?aux=Extras_Mfile">m-file</a> (or a '.m' file located in the same directory as MATLAB)
      </p><pre class="codeinput">m = 0.111;
R = 0.015;
g = -9.8;
L = 1.0;
d = 0.03;
J = 9.99e-6;
s = tf(<span class="string">'s'</span>);
P_ball = -m*g*d/L/(J/R^2+m)/s^2;

Kp = 1;
C = pid(Kp);
sys_cl=feedback(C*P_ball,1);
</pre><p>Now, we can model the system's response to a step input of 0.25 m. Add the following line of code to your m-file and run it.
         You should get the following output:
      </p><pre class="codeinput">step(0.25*sys_cl)
axis([0 70 0 0.5])
</pre><img class="figure"vspace="5" hspace="5" src="Content/BallBeam/Control/PID/html/BallBeam_ControlPID_01.png" alt=""> <p>As you can see, the system remains marginally stable with the addition of a proportional gain. Try changing the value of Kp
         and note that the system remains unstable.
      </p>
      <h2>Proportional-derivative control<a name="8"></a></h2>
      <p>Now, we will add a derivative term to the controller. Copy the following lines of code to an m-file and run it to view the
         system's response to this control method. Your plot should be similar to the following:
      </p><pre class="codeinput">m = 0.111;
R = 0.015;
g = -9.8;
L = 1.0;
d = 0.03;
J = 9.99e-6;
s = tf(<span class="string">'s'</span>);
P_ball = -m*g*d/L/(J/R^2+m)/s^2;

Kp = 10;
Kd = 10;
C = pid(Kp,0,Kd);

sys_cl=feedback(C*P_ball,1);

t=0:0.01:5;
step(0.25*sys_cl)
</pre><img class="figure"vspace="5" hspace="5" src="Content/BallBeam/Control/PID/html/BallBeam_ControlPID_02.png" alt=""> <p>Now the system is stable but the overshoot is much too high and the settling time needs to go down a bit. From the PID tutorial
         page in the section on characteristics of P, I, and D controllers, we see that by increasing Kd we can lower the overshoot
         and decrease the settling time slightly. Therefore, make Kd = 20 in your m-file and run it again. Your output should be:
      </p><pre class="codeinput">Kp = 10;
Kd = 20;
C = pid(Kp,0,Kd);
sys_cl=feedback(C*P_ball,1);
step(0.25*sys_cl)
</pre><img class="figure"vspace="5" hspace="5" src="Content/BallBeam/Control/PID/html/BallBeam_ControlPID_03.png" alt=""> <p>The overshoot criterion is met but the settling time needs to come down a bit. To decrease the settling time we may try increasing
         the Kp slightly to increase the rise time. The derivative gain (Kd) can also be increased to take off some of the overshoot
         that increasing Kp will cause. After playing with the gains a bit, the following step response plot can be achieved with Kp
         = 15 and Kd = 40:
      </p><pre class="codeinput">Kp = 15;
Kd = 40;
C = pid(Kp,0,Kd);
sys_cl=feedback(C*P_ball,1);
step(0.25*sys_cl)
</pre><img class="figure"vspace="5" hspace="5" src="Content/BallBeam/Control/PID/html/BallBeam_ControlPID_04.png" alt=""> <p>As you can see from the above plot all the control objectives have been met without the use of an integral controller (settling
         time for this example is considered achieved when the response is less than 2% of its final value). Remember, that for a control
         problem there is usually more than one solution for the problem.
      </p>
      <p class="footer"><br>
         Published with MATLAB&reg; 7.14<br></p>
   </div>
</div>
<!--
##### SOURCE BEGIN #####
%% Ball & Beam: PID Controller Design
%
% Key MATLAB commands used in this tutorial are:
% <http://www.mathworks.com/help/toolbox/control/ref/tf.html |tf|> , 
% <http://www.mathworks.com/help/toolbox/control/ref/step.html |step|> , 
% <http://www.mathworks.com/help/toolbox/control/ref/feedback.html |feedback|>
%
%% 
% 
% The open-loop transfer function of the plant for the ball and beam
% experiment is given below:
%
% $$ 
% P(s) = \frac{R(s)}{\Theta(s)} =
% -\frac{mgd}{L\left(\frac{J}{R^2}+m\right)}\frac{1}{s^2} \qquad [ \frac{m}{rad} ]
% $$
%
% The design criteria for this problem are:
%
% * Settling time less than 3 seconds
% * Overshoot less than 5% 
%
% To see the derivation of the equations for this problem refer to the 
% < ?example=BallBeam&section=SystemModeling Ball & Beam: System Modeling> page.
%
%% Closed-loop representation
%
% The block diagram for this example with a controller and unity feedback
% of the ball's position is shown below:
%
% <<Content/BallBeam/Control/PID/figures/feedback_ball.png>>
%
% First, we will study the response of the system shown above when a
% proportional controller is used. Then, derivative and/or integral control 
% will be added if necessary. 
%
% Recall, that the transfer function for a PID controller is:
%
% $$
% C(s) = K_p + \frac{K_i}{s} + K_d s = \frac{K_d s^2 + K_p s + K_i}{s}
% $$
%
%% Proportional control
%
% The closed-loop transfer function for proportional control with a
% proportional gain (Kp) equal to 100, can be modeled by copying the 
% following lines of MATLAB code into a new < ?aux=Extras_Mfile
% m-file> (or a '.m' file located in
% the same directory as MATLAB) 
%
%% 

m = 0.111;
R = 0.015;
g = -9.8;
L = 1.0;
d = 0.03;
J = 9.99e-6;
s = tf('s');
P_ball = -m*g*d/L/(J/R^2+m)/s^2;

Kp = 1;
C = pid(Kp);
sys_cl=feedback(C*P_ball,1);

%%
%
% Now, we can model the system's response to a step input of 0.25 m. Add
% the following line of code to your m-file and run it. You should get the
% following output:
%
%%

step(0.25*sys_cl)
axis([0 70 0 0.5])

%%
%
% As you can see, the system remains marginally stable with the addition of 
% a proportional gain. Try changing the value of Kp and note that the system 
% remains unstable. 
%
%% Proportional-derivative control
%
% Now, we will add a derivative term to the controller. Copy the following
% lines of code to an m-file and run it to view the system's response to 
% this control method. Your plot should be similar to the following: 
%
%%
m = 0.111;
R = 0.015;
g = -9.8;
L = 1.0;
d = 0.03;
J = 9.99e-6;
s = tf('s');
P_ball = -m*g*d/L/(J/R^2+m)/s^2;

Kp = 10;
Kd = 10;
C = pid(Kp,0,Kd);

sys_cl=feedback(C*P_ball,1);

t=0:0.01:5;
step(0.25*sys_cl)

%%
%
% Now the system is stable but the overshoot is much too high and the 
% settling time needs to go down a bit. From the PID tutorial page in the 
% section on characteristics of P, I, and D controllers, we see that by 
% increasing Kd we can lower the overshoot and decrease the settling time 
% slightly. Therefore, make Kd = 20 in your m-file and run it again. Your 
% output should be: 
%
%%

Kp = 10;
Kd = 20;
C = pid(Kp,0,Kd);
sys_cl=feedback(C*P_ball,1);
step(0.25*sys_cl)

%%
%
% The overshoot criterion is met but the settling time needs to come down a
% bit. To decrease the settling time we may try increasing the Kp slightly to 
% increase the rise time. The derivative gain (Kd) can also be increased to 
% take off some of the overshoot that increasing Kp will cause. After playing 
% with the gains a bit, the following step response plot can be achieved with 
% Kp = 15 and Kd = 40: 
%
%%

Kp = 15;
Kd = 40;
C = pid(Kp,0,Kd);
sys_cl=feedback(C*P_ball,1);
step(0.25*sys_cl)

%%
%
% As you can see from the above plot all the control objectives have been
% met without the use of an integral controller (settling time for this example 
% is considered achieved when the response is less than 2% of its final value). 
% Remember, that for a control problem there is usually more than one solution 
% for the problem.
##### SOURCE END #####
-->				</div>
				
				<div id="left">

					<ul class="section">
						<li class="heading" id="System">SYSTEM<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SystemModeling"><a href="index9ee5.html?example=BallBeam&amp;section=SystemModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SystemAnalysis"><a href="index136b.html?example=BallBeam&amp;section=SystemAnalysis">ANALYSIS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Control">CONTROL<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="ControlPID"><a href="index543f.html?example=BallBeam&amp;section=ControlPID">PID<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlRootLocus"><a href="indexc9b8.html?example=BallBeam&amp;section=ControlRootLocus">ROOT&nbsp;LOCUS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlFrequency"><a href="index28b6.html?example=BallBeam&amp;section=ControlFrequency">FREQUENCY<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlStateSpace"><a href="indexfa3e.html?example=BallBeam&amp;section=ControlStateSpace">STATE-SPACE<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlDigital"><a href="index447e.html?example=BallBeam&amp;section=ControlDigital">DIGITAL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Simulink">SIMULINK<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SimulinkModeling"><a href="indexc9d4.html?example=BallBeam&amp;section=SimulinkModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SimulinkControl"><a href="index7413.html?example=BallBeam&amp;section=SimulinkControl">CONTROL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
		
				</div>
			
				<div style="clear:both"></div>
				
				<div id="bottombar"><span style="color:#FF5500;font-weight:bold">.</div>
				
			</div>
			
		</div>
	
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=BallBeam&section=ControlPID by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:13:28 GMT -->
</html>

	ControlPID by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:13:28 GMT -->
</html>

		</div>
	
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=BallBeam&section=ControlPID by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:13:28 GMT -->
</html>

	ControlPID by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:13:28 GMT -->
</html>

	pier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:13:28 GMT -->
</html>

	ControlPID by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:13:28 GMT -->
</html>

	