<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

	
<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=MotorSpeed&section=SimulinkModeling by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:22 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

		<script type="text/javascript" src="jquery.js"></script>
					
		<link rel='stylesheet' type='text/css' href='style.css' />
		<script type="text/javascript">
	
			var example = "MotorSpeed"; 
			var section = "SimulinkModeling"; 
			var aux = ""; 
			var effects = Boolean(1); 
			var tips = Boolean(1); 
			$.fx.off = !effects;
			
			$(document).keydown(function(e){
				if (!$("#search_field").is(":focus")){
					if (e.keyCode == 39) { 
						window.location = "indexc535.html?example=MotorSpeed&amp;section=SimulinkControl";
					}
					if (e.keyCode == 37) { 
						window.history.back()
					}
				}
			});		
			
		</script>
			
		<meta http-equiv="Content-Type" Content="text/html; charset=utf-8" />
		<meta http-equiv="PRAGMA" Content="NO-CACHE" />
		
		<title>Control Tutorials for MATLAB and Simulink - Motor Speed: Simulink Modeling</title>
			
	</head>

	<body>
	
		
		<div id="container">
		
			<form id="search_form"><input id="search_field" type="text" name="q" placeholder="Search Control Tutorials"/></form>
			<form class="option_form" method="post" onclick="submit()"><div>Effects</div><input type="hidden" name="effects" value="0"/><input type="checkbox" name="effects" value="1" checked='true' /></form>
			<form class="option_form" method="post" onclick="submit()"><div>Tips</div><input type="hidden" name="tips" value="0"/><input type="checkbox" name="tips" value="1" checked='true' /></form>	
				
			<div style="clear:both"></div>
		
			<div id="header">
		
				

				
				
				<div id="menu_container">
				
					<ul class="menu">
						<li class="heading" id="Tips"><a href="index80e7.html?aux=Extras_Tips">TIPS</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
				
					<ul class="menu">
						<li class="heading" id="About"><a>ABOUT</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="About_Tutorials"><a href="index64fe.html?aux=About_Tutorials">Tutorials</a></li>
							<li class="item" id="About_Contact"><a href="mailto:ControlTutorialsMatlabSimulink@gmail.com">Contact</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Basics"><a>BASICS</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Basics_Matlab"><a href="index87b6.html?aux=Basics_Matlab">MATLAB</a></li>
							<li class="item" id="Basics_Simulink"><a href="indexe9ea.html?aux=Basics_Simulink">Simulink</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Index"><a>INDEX</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Index_Tutorials"><a href="index5e52.html?aux=Index_Tutorials">Tutorials</a></li>
							<li class="item" id="Index_Commands"><a href="index111e.html?aux=Index_Commands">Commands</a></li>
							<li class="item" id="Index_Animations"><a href="indexc3c5.html?aux=Index_Animations">Animations</a></li>
							<li class="item" id="Index_Extras"><a href="indexb290.html?aux=Index_Extras">Extras</a></li>
						</div></div>
					</ul>
									
					<ul class="menu">
						<li class="heading" id="Next"><a href="indexc535.html?example=MotorSpeed&amp;section=SimulinkControl">NEXT&nbsp;&#x25BA;</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
											
				</div>

			</div>
			
			<div id="body_container">
			
				<div id="gradient_container"></div>
			
				<div id="top">
				
					<a href="index1304.html?aux=Home"><img id="CTMS_logo" src="Images/CTMS_logo.png"></a>
				
					<ul class="example">
					
						<li class="item" id="Introduction"><a href="index5af4.html?example=Introduction&amp;section=SimulinkModeling"><img class="icon" src="Images/Introduction_Icon.png"><div class="tab">INTRODUCTION</div></a></li>
						<li class="item" id="CruiseControl"><a href="index3818.html?example=CruiseControl&amp;section=SimulinkModeling"><img class="icon" src="Images/CruiseControl_Icon.png"><div class="tab">CRUISE&nbsp;CONTROL</div></a></li>
						<li class="item" id="MotorSpeed"><a href="index5d5e.html?example=MotorSpeed&amp;section=SimulinkModeling"><img class="icon" src="Images/MotorSpeed_Icon.png"><div class="tab">MOTOR&nbsp;SPEED</div></a></li>
						<li class="item" id="MotorPosition"><a href="index6d09.html?example=MotorPosition&amp;section=SimulinkModeling"><img class="icon" src="Images/MotorPosition_Icon.png"><div class="tab">MOTOR&nbsp;POSITION</div></a></li>
						<li class="item" id="Suspension"><a href="index0ab7.html?example=Suspension&amp;section=SimulinkModeling"><img class="icon" src="Images/Suspension_Icon.png"><div class="tab">SUSPENSION</div></a></li>
						<li class="item" id="InvertedPendulum"><a href="indexffaa.html?example=InvertedPendulum&amp;section=SimulinkModeling"><img class="icon" src="Images/InvertedPendulum_Icon.png"><div class="tab">INVERTED&nbsp;PENDULUM</div></a></li>
						<li class="item" id="AircraftPitch"><a href="indexdf56.html?example=AircraftPitch&amp;section=SimulinkModeling"><img class="icon" src="Images/AircraftPitch_Icon.png"><div class="tab">AIRCRAFT&nbsp;PITCH</div></a></li>
						<li class="item" id="BallBeam"><a href="indexc9d4.html?example=BallBeam&amp;section=SimulinkModeling"><img class="icon" src="Images/BallBeam_Icon.png"><div class="tab">BALL&nbsp;&amp;&nbsp;BEAM</div></a></li>
					
					</ul> 
		
				</div>
				
				<div id="content_container">
					<div class="content">
   <div class="content_fx">
      <h1>DC Motor Speed: Simulink Modeling</h1>
      <!--introduction-->
      <!--/introduction-->
      <h2>Contents</h2>
      <div>
         <ul>
            <li><a href="#1">Physical setup</a></li>
            <li><a href="#3">Building the model with Simulink</a></li>
            <li><a href="#8">Building the model with Simscape</a></li>
         </ul>
      </div>
      <h2>Physical setup<a name="1"></a></h2>
      <p>A common actuator in control systems is the DC motor. It directly provides rotary motion and, coupled with wheels or drums
         and cables, can provide translational motion. The electric circuit of the armature and the free-body diagram of the rotor
         are shown in the following figure:
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Modeling/figures/motor.png" alt=""> </p>
      <p>For this example, we will assume that the input of the system is the voltage source (<i>V</i>) applied to the motor's armature, while the output is the rotational speed of the shaft d(<i>theta</i>)/dt. The rotor and shaft are assumed to be rigid. We further assume a viscous friction model, that is, the friction torque
         is proportional to shaft angular velocity.
      </p>
      <p>The physical parameters for our example are:</p><pre>(J)     moment of inertia of the rotor     0.01 kg.m^2</pre><pre>(b)     motor viscous friction constant    0.1 N.m.s</pre><pre>(Ke)    electromotive force constant       0.01 V/rad/sec</pre><pre>(Kt)    motor torque constant              0.01 N.m/Amp</pre><pre>(R)     electric resistance                1 Ohm</pre><pre>(L)     electric inductance                0.5 H</pre><p>In general, the torque generated by a DC motor is proportional to the armature current and the strength of the magnetic field.
         In this example we will assume that the magnetic field is constant and, therefore, that the motor torque is proportional to
         only the armature current <i>i</i> by a constant factor <i>Kt</i> as shown in the equation below. This is referred to as an armature-controlled motor.
      </p>
      <p><span class="eqn_num">(1)</span><img class="display_eqn" src="Content/MotorSpeed/Simulink/Modeling/html/MotorSpeed_SimulinkModeling_eq76022.png" alt="$$  T = K_{t} i$$"></p>
      <p>The back emf, <i>e</i>, is proportional to the angular velocity of the shaft by a constant factor <i>Ke</i>.
      </p>
      <p><span class="eqn_num">(2)</span><img class="display_eqn" src="Content/MotorSpeed/Simulink/Modeling/html/MotorSpeed_SimulinkModeling_eq17936.png" alt="$$  e = K_{e} \dot{\theta}$$"></p>
      <p>In SI units, the motor torque and back emf constants are equal, that is, <i>Kt = Ke</i>; therefore, we will use <i>K</i> to represent both the motor torque constant and the back emf constant.
      </p>
      <h2>Building the model with Simulink<a name="3"></a></h2>
      <p>This system will be modeled by summing the torques acting on the rotor inertia and integrating the acceleration to give velocity.
         Also, Kirchoff's laws will be applied to the armature circuit. First, we will model the integrals of the rotational acceleration
         and of the rate of change of the armature current.
      </p>
      <p><span class="eqn_num">(3)</span><img class="display_eqn" src="Content/MotorSpeed/Simulink/Modeling/html/MotorSpeed_SimulinkModeling_eq36925.png" alt="$$ \int \frac{d^2{\theta}}{dt^2} \ dt = \frac{d{\theta}}{dt} $$"></p>
      <p><span class="eqn_num">(4)</span><img class="display_eqn" src="Content/MotorSpeed/Simulink/Modeling/html/MotorSpeed_SimulinkModeling_eq99536.png" alt="$$ \int \frac{di}{dt} \ dt = i  $$"></p>
      <p>To build the simulation model, open Simulink and open a new model window. Then follow the steps listed below.</p>
      <div>
         <ul>
            <li>Insert an Integrator block from the Simulink/Continuous library and draw lines to and from its input and output terminals.</li>
            <li>Label the input line "d2/dt2(theta)" and the output line "d/dt(theta)" as shown below. To add such a label, double-click in
               the empty space just below the line.
            </li>
            <li>Insert another Integrator block above the previous one and draw lines to and from its input and output terminals.</li>
            <li>Label the input line "d/dt(i)" and the output line "i".</li>
         </ul>
      </div>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Modeling/figures/Picture1.png" alt=""> </p>
      <p>Next, we will apply Newton's law and Kirchoff's law to the motor system to generate the following equations:</p>
      <p><span class="eqn_num">(5)</span><img class="display_eqn" src="Content/MotorSpeed/Simulink/Modeling/html/MotorSpeed_SimulinkModeling_eq33740.png" alt="$$ J \frac{d^2 \theta}{dt^2} = T - b \frac{d{\theta}}{dt} \Longrightarrow&#xA;\frac{d^2 \theta}{dt^2} = \frac{1}{J}(K_{t}i - b \frac{d{\theta}}{dt})  $$"></p>
      <p><span class="eqn_num">(6)</span><img class="display_eqn" src="Content/MotorSpeed/Simulink/Modeling/html/MotorSpeed_SimulinkModeling_eq70617.png" alt="$$ L \frac{di}{dt} = -Ri + V-e \Longrightarrow \frac{di}{dt} =&#xA;\frac{1}{L}(-Ri + V-K_{e} \frac{d{\theta}}{dt})  $$"></p>
      <p>The angular acceleration is equal to 1 / <i>J</i> multiplied by the sum of two terms (one positive, one negative). Similarly, the derivative of current is equal to 1 / <i>L</i> multiplied by the sum of three terms (one positive, two negative). Continuing to model these equations in Simulink, follow
         the steps given below.
      </p>
      <div>
         <ul>
            <li>Insert two Gain blocks from the Simulink/Math Operations library, one attached to each of the integrators.</li>
            <li>Edit the Gain block corresponding to angular acceleration by double-clicking it and changing its value to "1/J".</li>
            <li>Change the label of this Gain block to "Inertia" by clicking on the word "Gain" underneath the block.</li>
            <li>Similarly, edit the other Gain's value to "1/L" and its label to "Inductance".</li>
            <li>Insert two Add blocks from the Simulink/Math Operations library, one attached by a line to each of the Gain blocks.</li>
            <li>Edit the signs of the Add block corresponding to rotation to "+-" since one term is positive and one is negative.</li>
            <li>Edit the signs of the other Add block to "-+-" to represent the signs of the terms in the electrical equation.</li>
         </ul>
      </div>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Modeling/figures/Picture2.png" alt=""> </p>
      <p>Now, we will add in the torques which are represented in the rotational equation. First, we will add in the damping torque.</p>
      <div>
         <ul>
            <li>Insert a Gain block below the "Inertia" block. Next right-click on the block and select <b>Format &gt; Flip Block</b> from the resulting menu to flip the block from left to right. You can also flip a selected block by holding down <b>Ctrl-I</b>.
            </li>
            <li>Set the Gain value to "b" and rename this block to "Damping".</li>
            <li>Tap a line (hold <b>Ctrl</b> while drawing or right-click on the line) off the rotational Integrator's output and connect it to the input of the "Damping"
               block.
            </li>
            <li>Draw a line from the "Damping" block output to the negative input of the rotational Add block.</li>
         </ul>
      </div>
      <p>Next, we will add in the torque from the armature.</p>
      <div>
         <ul>
            <li>Insert a Gain block attached to the positive input of the rotational Add block with a line.</li>
            <li>Edit its value to "K" to represent the motor constant and Label it "Kt".</li>
            <li>Continue drawing the line leading from the current Integrator and connect it to the "Kt" block.</li>
         </ul>
      </div>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Modeling/figures/Picture3.png" alt=""> </p>
      <p>Now, we will add in the voltage terms which are represented in the electrical equation. First, we will add in the voltage
         drop across the armature resistance.
      </p>
      <div>
         <ul>
            <li>Insert a Gain block above the "Inductance" block and flip it from left to right.</li>
            <li>Set the Gain value to "R" and rename this block to "Resistance".</li>
            <li>Tap a line off the current Integrator's output and connect it to the input of the "Resistance" block.</li>
            <li>Draw a line from the "Resistance" block's output to the upper negative input of the current equation Add block.</li>
         </ul>
      </div>
      <p>Next, we will add in the back emf from the motor.</p>
      <div>
         <ul>
            <li>Insert a Gain block attached to the other negative input of the current Add block with a line.</li>
            <li>Edit it's value to "K" to represent the motor back emf constant and Label it "Ke".</li>
            <li>Tap a line off the rotational Integrator's output and connect it to the "Ke" block.</li>
            <li>Add In1 and Out1 blocks from the Simulink/Ports &amp; Subsystems library and respectively label them "Voltage" and "Speed".</li>
         </ul>
      </div>
      <p>The final design should look like the example shown in the figure below.</p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Modeling/figures/Picture4.png" alt=""> </p>
      <p>In order to save all of these components as a single subsystem block, first select all of the blocks, then select <b>Create Subsystem</b> from the <b>Edit</b> menu. Name the subsystem "DC Motor" and then save the model. Your model should appear as follows. You can also download the
         file for this system here, <a href="Content/MotorSpeed/Simulink/Modeling/Motor_Model.mdl">Motor_Model.mdl</a>. We use this model in the <a href="indexc535.html?example=MotorSpeed&amp;section=SimulinkControl">DC Motor Speed: Simulink Controller Design</a> section.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Modeling/figures/Picture44.png" alt=""> </p>
      <h2>Building the model with Simscape<a name="8"></a></h2>
      <p>In this section, we alternatively show how to build the DC Motor model using the physical modeling blocks of the Simscape
         extension to Simulink. The blocks in the Simscape library represent actual physical components; therefore, complex multi-domain
         models can be built without the need to build mathematical equations from physical principles as was done above by applying
         Newton's laws and Kirchoff's laws.
      </p>
      <p>Open a new Simulink model and insert the following blocks to represent the electrical and mechanical elements of the DC motor.</p>
      <div>
         <ul>
            <li>Resistor, Inductor and Rotational Electromechanical Converter blocks from the Simscape/Foundation Library/Electrical/Electrical
               Elements library
            </li>
            <li>Rotational Damper and Inertia blocks from the Simscape/Foundation Library/Mechanical/Rotational Elements library</li>
            <li>Four Connection Port blocks from the Simscape/Utilities library</li>
         </ul>
      </div>
      <p>Double-click on the Connection Port blocks to make the location of ports 1 and 2 from the <tt>Left</tt> and the location of ports 3 and 4 from the <tt>Right</tt>.
      </p>
      <p>Connect and label the components as shown in the following figure. You can rotate a block in a similar manner to the way you
         flipped blocks, that is, by right-clicking on the block then selecting <b>Rotate Block</b> from the <b>Format</b> menu.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Modeling/figures/Picture6.png" alt=""> </p>
      <p>Complete the design of the DC motor Simscape model by assigning values to the physical parameters of each of the blocks to
         match our assumed values. To assign the necessary values, double-click on the Resistor, Inductor, Inertia, Rotational Damper,
         and Rotational Electromechanical Converter blocks and enter the following parameters and associated units:
      </p><pre>Resistance                   = R [Ohm]</pre><pre>Inductance                   = L [H]</pre><pre>Inertia                      = J [kg*m^2]</pre><pre>Constant of Proportionality  = K [V/(rad/s)]</pre><pre>Damping coefficient          = b [N*m/(rad/s)]</pre><p>The Rotational Damper block serves to model the viscous friction of the motor. This type of friction model was chosen because
         it is linear. In most cases real friction is more complicated than this. If you wish to employ a more complicated friction
         model, for instance to add Coulomb friction to the model, then you may use the Rotational Friction block from the Simscape/Foundation
         Library/Mechanical/Rotational Elements library.
      </p>
      <p>Also note that in the above you generated a DC Motor model from the individual mechanical and electrical aspects of the motor.
         The Simscape library also includes a DC Motor block under the Simscape/SimElectronics/Actuators library. This block is used
         in the <a href="index6d09.html?example=MotorPosition&amp;section=SimulinkModeling">DC Motor Position: Simulink Modeling</a> section.
      </p>
      <p>The physical parameters must now be set. Enter the following commands at the MATLAB prompt.</p><pre class="codeinput">J = 0.01;
b = 0.1;
K = 0.01;
R = 1;
L = 0.5;
</pre><p>These values are the same ones listed in the physical setup section.</p>
      <p>You can then save these components in a single subsystem. Select all of the blocks and then choose <b>Create Subsystem</b> from the <b>Edit</b> menu. You can also change the subsystem block color by right-clicking on the block and choosing <b>Format &gt; Background Color</b> from the resulting menu. This subsystem block can then be used to simulate the DC motor.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Modeling/figures/Picture6a.png" alt=""> </p>
      <p>In order to simulate the response of this system it is further necessary to add sensor blocks to the model to simulate the
         measurement of various physical parameters and a voltage source to provide excitation to the motor. Furthermore, blocks are
         needed to interface Simscape blocks with tradtional Simulink blocks since the Simscape signals represent physical quantities
         with units, while the Simulink signals are dimensionless numbers. Add the following blocks to the model you just built to
         address these functions.
      </p>
      <div>
         <ul>
            <li>Current Sensor block from the Simscape/Foundation Library/Electrical/Electrical Sensors library</li>
            <li>Controlled Voltage Source block from the Simscape/Foundation Library/Electrical/Electrical Sources library</li>
            <li>Two PS-Simulink Converter blocks and a Solver Configuration block from the Simscape/Utilities library</li>
            <li>Electrical Reference block from the Simscape/Foundation Library/Electrical/Electrical Elements library</li>
            <li>Ideal Rotational Motion Sensor block from the Simscape/Foundation Library/Mechanical/Mechanical Sensors library</li>
            <li>Mechanical Rotational Reference block from the Simscape/Foundation Library/Mechanical/Rotational Elements library</li>
            <li>Three Out1 blocks and one In1 block from the Simulink/Ports &amp; Subsystems library</li>
         </ul>
      </div>
      <p>The Ideal Rotational Motion Sensor block represents a device that measures the difference in angular position and angular
         velocity between two nodes. In this case, we employ the block to measure the position and velocity of the motor shaft as compared
         to a fixed reference represented by the Mechanical Rotational Reference block. You can leave the <b>Initial angle</b> of the Rotational Motion Sensor block as the default 0 radians.
      </p>
      <p>The Current Sensor block represents another sensor, specifically it measures the current drawn by the motor. The ground for
         the electrical portion of our system is defined by the Electrical Reference block.
      </p>
      <p>The Controlled Voltage Source block serves as the power source for the motor where you can externally define the voltage signal
         by connecting an input to the block.
      </p>
      <p>The PS-Simulink blocks convert physical signals to Simulink output signals, while the Simulink-PS block conversely converts
         a Simulink input signal to a physical signal. These blocks can be employed to convert the Simscape signals, which represent
         physical quantities with units, to Simulink signals, which don't explicitly have units attached to them. These blocks, in
         essence, can perform a units conversion between the physical signals and the Simulink signals. In our case, we can leave the
         units undefined since the input and output of each of the conversion blocks have the same units. In general, the Simscape
         blockset is employed to model the physical plant, while the Simulink blockset is employed to model the controller.
      </p>
      <p>The Solver Configuration block is employed for defining the details of the numerical solver employed in running the Simscape
         simulation. We will use the default settings for this block.
      </p>
      <p>Next, connect and label the components so that they appear as in the figure below. Double-click on the lines which are connected
         to the Out1 blocks and label them "Current", "Position", and "Speed". Also double-click on the In1 block and label it "Voltage".
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Modeling/figures/Picture7.png" alt=""> </p>
      <p>You can save these components in a single subsystem with one input and three outputs. Select all of the blocks and then choose
         <b>Create Subsystem</b> from the <b>Edit</b> menu. Also label the subsystem and signals as shown in the following figure.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorSpeed/Simulink/Modeling/figures/Picture7a.png" alt=""> </p>
      <p>You can download the complete model file here, <a href="Content/MotorSpeed/Simulink/Modeling/Motor_Model_Simscape.mdl">Motor_Model_Simscape.mdl</a>, but note that you will need the Simscape addition to Simulink in order to run the file.
      </p>
      <p>Note that the two models generated above will behave equivalently as long as they are built using the same parameter values.
         The difference between them is then only the ease with which they are built and interfaced with, and how transparent they
         are in presenting information to the user.
      </p>
      <p>If you would like to actually run the models developed above and use them to simulate and develop control algorithms, you
         may continue on to the <a href="indexc535.html?example=MotorSpeed&amp;section=SimulinkControl">DC Motor Speed: Simulink Control</a> page.
      </p>
      <p class="footer"><br>
         Published with MATLAB&reg; 7.14<br></p>
   </div>
</div>
<!--
##### SOURCE BEGIN #####
%% DC Motor Speed: Simulink Modeling
%
%% Physical setup
% A common actuator in control systems is the DC motor. It directly
% provides rotary motion and, coupled with wheels or drums and cables, can
% provide translational motion. The electric circuit of the armature and
% the free-body diagram of the rotor are shown in the following figure: 
%
% <<Content/MotorSpeed/Simulink/Modeling/figures/motor.png>>
%
%%
% For this example, we will assume that the input of the system is the
% voltage source (_V_) applied to the motor's armature, while the output is the 
% rotational speed of the shaft d(_theta_)/dt. The rotor and shaft are
% assumed to be rigid. We further assume a viscous
% friction model, that is, the friction torque is proportional to shaft
% angular velocity. 
%
% The physical parameters for our example are:
%
%  (J)     moment of inertia of the rotor     0.01 kg.m^2 
% 
%  (b)     motor viscous friction constant    0.1 N.m.s 
%
%  (Ke)    electromotive force constant       0.01 V/rad/sec 
%
%  (Kt)    motor torque constant              0.01 N.m/Amp 
%
%  (R)     electric resistance                1 Ohm
%
%  (L)     electric inductance                0.5 H
%
% In general, the torque generated by a DC motor is proportional to the
% armature current and the strength of the magnetic field. In this
% example we will assume that the magnetic field is constant and,
% therefore, that the motor torque is proportional to only the armature current
% _i_ by a constant factor _Kt_ as shown in the equation below. This
% is referred to as an armature-controlled motor.
%
% $$  T = K_{t} i$$
%
% The back emf, _e_, is proportional to the angular velocity of the shaft by
% a constant factor _Ke_.
%
% $$  e = K_{e} \dot{\theta}$$
%
% In SI units, the motor torque and back emf constants are equal, that
% is, _Kt = Ke_; therefore, we will use _K_ to represent both the motor
% torque constant and the back emf constant.
%
%% Building the model with Simulink
% This system will be modeled by summing the torques acting on the rotor
% inertia and integrating the acceleration to give velocity. Also,
% Kirchoff's laws will be applied to the armature circuit. First, we will
% model the integrals of the rotational acceleration and of the rate of
% change of the armature current.   
%
% $$ \int \frac{d^2{\theta}}{dt^2} \ dt = \frac{d{\theta}}{dt} $$
%
% $$ \int \frac{di}{dt} \ dt = i  $$
%
% To build the simulation model, open Simulink and open a new model
% window. Then follow the steps listed below.
%
% * Insert an Integrator block from the Simulink/Continuous library and draw
% lines to and from its input and output terminals. 
% * Label the input line "d2/dt2(theta)" and the output line "d/dt(theta)"
% as shown below. To add such a label, double-click in the empty space just
% below the line.  
% * Insert another Integrator block above the previous one and draw lines
% to and from its input and output terminals. 
% * Label the input line "d/dt(i)" and the output line "i". 
%
% <<Content/MotorSpeed/Simulink/Modeling/figures/Picture1.png>>
%
%%
% Next, we will apply Newton's law and Kirchoff's law to the motor system
% to generate the following equations:   
%
% $$ J \frac{d^2 \theta}{dt^2} = T - b \frac{d{\theta}}{dt} \Longrightarrow
% \frac{d^2 \theta}{dt^2} = \frac{1}{J}(K_{t}i - b \frac{d{\theta}}{dt})  $$ 
%
% $$ L \frac{di}{dt} = -Ri + V-e \Longrightarrow \frac{di}{dt} =
% \frac{1}{L}(-Ri + V-K_{e} \frac{d{\theta}}{dt})  $$
%
% The angular acceleration is equal to 1 / _J_ multiplied by the sum of two
% terms (one positive, one negative). Similarly, the derivative of current is equal
% to 1 / _L_ multiplied by the sum of three terms (one positive, two
% negative). Continuing to model these equations in Simulink, follow the
% steps given below.
%
% * Insert two Gain blocks from the Simulink/Math Operations library, one
% attached to each of the integrators. 
% * Edit the Gain block corresponding to angular acceleration by
% double-clicking it and changing its value to "1/J". 
% * Change the label of this Gain block to "Inertia" by clicking on the
% word "Gain" underneath the block. 
% * Similarly, edit the other Gain's value to "1/L" and its label to
% "Inductance". 
% * Insert two Add blocks from the Simulink/Math Operations library, one
% attached by a line to each of the Gain blocks. 
% * Edit the signs of the Add block corresponding to rotation to "+-" since
% one term is positive and one is negative. 
% * Edit the signs of the other Add block to "-+-" to represent the signs
% of the terms in the electrical equation.  
%
% <<Content/MotorSpeed/Simulink/Modeling/figures/Picture2.png>>
%
%%
% Now, we will add in the torques which are represented in the rotational
% equation. First, we will add in the damping torque. 
%
% * Insert a Gain block below the "Inertia" block. Next right-click on the
% block and select *Format > Flip Block* from the resulting menu to flip
% the block from left to right. You can also flip a selected block by
% holding down *Ctrl-I*.    
% * Set the Gain value to "b" and rename this block to "Damping".
% * Tap a line (hold *Ctrl* while drawing or right-click on the line) off the
% rotational Integrator's output and connect it to the input of the
% "Damping" block.  
% * Draw a line from the "Damping" block output to the negative input of the
% rotational Add block. 
%
% Next, we will add in the torque from the armature.
%
% * Insert a Gain block attached to the positive input of the rotational
% Add block with a line. 
% * Edit its value to "K" to represent the motor constant and Label it
% "Kt". 
% * Continue drawing the line leading from the current Integrator and
% connect it to the "Kt" block.  
%
% <<Content/MotorSpeed/Simulink/Modeling/figures/Picture3.png>>
%
%%
% Now, we will add in the voltage terms which are represented in the
% electrical equation. First, we will add in the voltage drop across the
% armature resistance.  
%
% * Insert a Gain block above the "Inductance" block and flip it from left
% to right. 
% * Set the Gain value to "R" and rename this block to "Resistance".
% * Tap a line off the current Integrator's output and connect it to the
% input of the "Resistance" block.  
% * Draw a line from the "Resistance" block's output to the upper negative input
% of the current equation Add block.  
%
% Next, we will add in the back emf from the motor.
%
% * Insert a Gain block attached to the other negative input of the current
% Add block with a line. 
% * Edit it's value to "K" to represent the motor back emf constant and Label it "Ke".
% * Tap a line off the rotational Integrator's output and connect it to the "Ke" block. 
% * Add In1 and Out1 blocks from the Simulink/Ports & Subsystems library
% and respectively label them "Voltage" and "Speed". 
%
% The final design should look like the example shown in the figure below.
%
% <<Content/MotorSpeed/Simulink/Modeling/figures/Picture4.png>>
%
%%
% In order to save all of these components as a single subsystem block,
% first select all of the blocks, then select *Create Subsystem* from the
% *Edit* menu. Name the subsystem "DC Motor" and then save the model. Your
% model should appear as follows. You can also download the file for this
% system here, <Content/MotorSpeed/Simulink/Modeling/Motor_Model.mdl Motor_Model.mdl>. We use this model in
% the
% < ?example=MotorSpeed&section=SimulinkControl
% DC Motor Speed: Simulink Controller Design> section.  
%
% <<Content/MotorSpeed/Simulink/Modeling/figures/Picture44.png>>
%
%% Building the model with Simscape
%
% In this section, we alternatively show how to build the DC Motor model
% using the physical modeling blocks of the Simscape extension to Simulink.
% The blocks in the Simscape library represent actual physical components;
% therefore, complex multi-domain models can be built without the need to
% build mathematical equations from physical principles as was done above
% by applying Newton's laws and Kirchoff's laws. 
%
% Open a new Simulink model and insert the following blocks to represent
% the electrical and mechanical elements of the DC motor.
%
% * Resistor, Inductor and Rotational Electromechanical Converter blocks from the
% Simscape/Foundation Library/Electrical/Electrical Elements library
% * Rotational Damper and Inertia blocks from the Simscape/Foundation Library/Mechanical/Rotational
% Elements library
% * Four Connection Port blocks from the Simscape/Utilities library
%
% Double-click on the Connection Port blocks to make the location of
% ports 1 and 2 from the |Left| and the location of ports 3 and 4
% from the |Right|.
%
% Connect and label the components as shown in the following figure. You 
% can rotate a block in a similar manner to the way you flipped blocks,
% that is, by right-clicking on the block then selecting *Rotate Block*
% from the *Format* menu.  
%
% <<Content/MotorSpeed/Simulink/Modeling/figures/Picture6.png>>
%
%%
% Complete the design of the DC motor Simscape model by assigning values to the
% physical parameters of each of the blocks to match our assumed values. 
% To assign the necessary values, double-click on the Resistor, Inductor,
% Inertia, Rotational Damper, and Rotational Electromechanical Converter
% blocks and enter the following parameters and associated units: 
%
%  Resistance                   = R [Ohm]
%
%  Inductance                   = L [H]
%
%  Inertia                      = J [kg*m^2]
%
%  Constant of Proportionality  = K [V/(rad/s)]
%
%  Damping coefficient          = b [N*m/(rad/s)]
%
% The Rotational Damper block serves to model the viscous friction of the
% motor. This type of friction model was chosen because it is linear. In
% most cases real friction is more complicated than this. If you wish to
% employ a more complicated friction model, for instance to add Coulomb
% friction to the model, then you may use the Rotational Friction block
% from the Simscape/Foundation Library/Mechanical/Rotational Elements
% library. 
%
% Also note that in the above you generated a DC Motor model from the
% individual mechanical and electrical aspects of the motor. The Simscape
% library also includes a DC Motor block under the
% Simscape/SimElectronics/Actuators library. This block is used in the
% < ?example=MotorPosition&section=SimulinkModeling DC Motor Position: Simulink Modeling> section.
%
% The physical parameters must now be set. Enter the following commands at
% the MATLAB prompt.

J = 0.01;
b = 0.1;
K = 0.01;
R = 1;
L = 0.5;

%%
% These values are the same ones listed in the physical setup section. 
%
% You can then save these components in a single subsystem. Select all of
% the blocks and then choose *Create Subsystem* from the *Edit* menu. You
% can also change the subsystem block color by right-clicking on the block
% and choosing *Format > Background Color* from the resulting menu. This
% subsystem block can then be used to simulate the DC motor.
%
% <<Content/MotorSpeed/Simulink/Modeling/figures/Picture6a.png>>
%
%%
% In order to simulate the response of this system it is further necessary
% to add sensor blocks to the model to simulate the measurement of various
% physical parameters and a voltage source to provide excitation to the
% motor. Furthermore, blocks are needed to interface Simscape blocks with tradtional
% Simulink blocks since the Simscape signals represent physical quantities
% with units, while the Simulink signals are dimensionless numbers. Add the
% following blocks to the model you just built to address these functions.
%
% * Current Sensor block from the Simscape/Foundation
% Library/Electrical/Electrical Sensors library
% * Controlled Voltage Source block from the Simscape/Foundation
% Library/Electrical/Electrical Sources library
% * Two PS-Simulink Converter blocks and a Solver Configuration block from
% the Simscape/Utilities library
% * Electrical Reference block from the Simscape/Foundation
% Library/Electrical/Electrical Elements library
% * Ideal Rotational Motion Sensor block from the Simscape/Foundation
% Library/Mechanical/Mechanical Sensors library
% * Mechanical Rotational Reference block from the Simscape/Foundation
% Library/Mechanical/Rotational Elements library
% * Three Out1 blocks and one In1 block from the Simulink/Ports & Subsystems library
% 
%%
% The Ideal Rotational Motion Sensor block represents a device that
% measures the difference in angular position and angular velocity between
% two nodes. In this case, we employ the block to measure the position and
% velocity of the motor shaft as compared to a fixed reference represented
% by the Mechanical Rotational Reference block. You can leave the *Initial
% angle* of the Rotational Motion Sensor block as the default 0 radians. 
%
% The Current Sensor block represents another sensor, specifically it
% measures the current drawn by the motor. The ground for the electrical
% portion of our system is defined by the Electrical Reference block.
%
% The Controlled Voltage Source block serves as the power source for the
% motor where you can externally define the voltage signal by connecting an
% input to the block.
%
% The PS-Simulink blocks convert physical signals to Simulink
% output signals, while the Simulink-PS block conversely converts a
% Simulink input signal to a physical signal. These blocks can be employed
% to convert the Simscape signals, which represent physical 
% quantities with units, to Simulink signals, which don't explicitly have
% units attached to them. These blocks, in essence, can perform a units
% conversion between the physical signals and the Simulink signals. In our
% case, we can leave the units undefined since the input
% and output of each of the conversion blocks have the same units. In
% general, the Simscape blockset is employed to model the physical plant,
% while the Simulink blockset is employed to model the controller.
%
% The Solver Configuration block is employed for defining the details of
% the numerical solver employed in running the Simscape simulation. 
% We will use the default settings for this block.
%
% Next, connect and label the components so that they appear as in
% the figure below. Double-click on the lines which are connected
% to the Out1 blocks and label them "Current", "Position", and "Speed". Also
% double-click on the In1 block and label it "Voltage".
%
% <<Content/MotorSpeed/Simulink/Modeling/figures/Picture7.png>>
%
% You can save these components in a single subsystem with one input and
% three outputs. Select all of the blocks and then choose *Create
% Subsystem* from the *Edit* menu. Also label the subsystem and signals as
% shown in the following figure.
% 
% <<Content/MotorSpeed/Simulink/Modeling/figures/Picture7a.png>>
%
%%
% You can download the complete model file here,
% <Content/MotorSpeed/Simulink/Modeling/Motor_Model_Simscape.mdl Motor_Model_Simscape.mdl>,
% but note that you will need the Simscape addition to Simulink in order to
% run the file.  
%
% Note that the two models generated above will behave
% equivalently as long as they are built using the same parameter values.
% The difference between them is then only the ease with which they are
% built and interfaced with, and how transparent they are in presenting
% information to the user. 
%
% If you would like to actually run the models developed above and use
% them to simulate and develop control algorithms, you may continue on to the 
% < ?example=MotorSpeed&section=SimulinkControl DC Motor Speed: Simulink Control> page.

##### SOURCE END #####
-->				</div>
				
				<div id="left">

					<ul class="section">
						<li class="heading" id="System">SYSTEM<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SystemModeling"><a href="index9e20.html?example=MotorSpeed&amp;section=SystemModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SystemAnalysis"><a href="index123f.html?example=MotorSpeed&amp;section=SystemAnalysis">ANALYSIS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Control">CONTROL<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="ControlPID"><a href="index84c7.html?example=MotorSpeed&amp;section=ControlPID">PID<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlRootLocus"><a href="index9e58.html?example=MotorSpeed&amp;section=ControlRootLocus">ROOT&nbsp;LOCUS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlFrequency"><a href="index5e29.html?example=MotorSpeed&amp;section=ControlFrequency">FREQUENCY<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlStateSpace"><a href="indexd22e.html?example=MotorSpeed&amp;section=ControlStateSpace">STATE-SPACE<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlDigital"><a href="indexf267.html?example=MotorSpeed&amp;section=ControlDigital">DIGITAL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Simulink">SIMULINK<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SimulinkModeling"><a href="index5d5e.html?example=MotorSpeed&amp;section=SimulinkModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SimulinkControl"><a href="indexc535.html?example=MotorSpeed&amp;section=SimulinkControl">CONTROL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
		
				</div>
			
				<div style="clear:both"></div>
				
				<div id="bottombar"><span style="color:#FF5500;font-weight:bold">.</div>
				
			</div>
			
		</div>
	
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=MotorSpeed&section=SimulinkModeling by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:31 GMT -->
</html>

	nkModeling by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:31 GMT -->
</html>

	
	
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=MotorSpeed&section=SimulinkModeling by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:31 GMT -->
</html>

	nkModeling by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:31 GMT -->
</html>

	pier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:31 GMT -->
</html>

	nkModeling by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:31 GMT -->
</html>

	