<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

	
<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=CruiseControl&section=ControlDigital by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:02:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

		<script type="text/javascript" src="jquery.js"></script>
					
		<link rel='stylesheet' type='text/css' href='style.css' />
		<script type="text/javascript">
	
			var example = "CruiseControl"; 
			var section = "ControlDigital"; 
			var aux = ""; 
			var effects = Boolean(1); 
			var tips = Boolean(1); 
			$.fx.off = !effects;
			
			$(document).keydown(function(e){
				if (!$("#search_field").is(":focus")){
					if (e.keyCode == 39) { 
						window.location = "index3818.html?example=CruiseControl&amp;section=SimulinkModeling";
					}
					if (e.keyCode == 37) { 
						window.history.back()
					}
				}
			});		
			
		</script>
			
		<meta http-equiv="Content-Type" Content="text/html; charset=utf-8" />
		<meta http-equiv="PRAGMA" Content="NO-CACHE" />
		
		<title>Control Tutorials for MATLAB and Simulink - Cruise Control: Digital Controller Design</title>
			
	</head>

	<body>
	
		
		<div id="container">
		
			<form id="search_form"><input id="search_field" type="text" name="q" placeholder="Search Control Tutorials"/></form>
			<form class="option_form" method="post" onclick="submit()"><div>Effects</div><input type="hidden" name="effects" value="0"/><input type="checkbox" name="effects" value="1" checked='true' /></form>
			<form class="option_form" method="post" onclick="submit()"><div>Tips</div><input type="hidden" name="tips" value="0"/><input type="checkbox" name="tips" value="1" checked='true' /></form>	
				
			<div style="clear:both"></div>
		
			<div id="header">
		
				

				
				
				<div id="menu_container">
				
					<ul class="menu">
						<li class="heading" id="Tips"><a href="index80e7.html?aux=Extras_Tips">TIPS</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
				
					<ul class="menu">
						<li class="heading" id="About"><a>ABOUT</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="About_Tutorials"><a href="index64fe.html?aux=About_Tutorials">Tutorials</a></li>
							<li class="item" id="About_Contact"><a href="mailto:ControlTutorialsMatlabSimulink@gmail.com">Contact</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Basics"><a>BASICS</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Basics_Matlab"><a href="index87b6.html?aux=Basics_Matlab">MATLAB</a></li>
							<li class="item" id="Basics_Simulink"><a href="indexe9ea.html?aux=Basics_Simulink">Simulink</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Index"><a>INDEX</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Index_Tutorials"><a href="index5e52.html?aux=Index_Tutorials">Tutorials</a></li>
							<li class="item" id="Index_Commands"><a href="index111e.html?aux=Index_Commands">Commands</a></li>
							<li class="item" id="Index_Animations"><a href="indexc3c5.html?aux=Index_Animations">Animations</a></li>
							<li class="item" id="Index_Extras"><a href="indexb290.html?aux=Index_Extras">Extras</a></li>
						</div></div>
					</ul>
									
					<ul class="menu">
						<li class="heading" id="Next"><a href="index3818.html?example=CruiseControl&amp;section=SimulinkModeling">NEXT&nbsp;&#x25BA;</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
											
				</div>

			</div>
			
			<div id="body_container">
			
				<div id="gradient_container"></div>
			
				<div id="top">
				
					<a href="index1304.html?aux=Home"><img id="CTMS_logo" src="Images/CTMS_logo.png"></a>
				
					<ul class="example">
					
						<li class="item" id="Introduction"><a href="index4e79.html?example=Introduction&amp;section=ControlDigital"><img class="icon" src="Images/Introduction_Icon.png"><div class="tab">INTRODUCTION</div></a></li>
						<li class="item" id="CruiseControl"><a href="index6e12.html?example=CruiseControl&amp;section=ControlDigital"><img class="icon" src="Images/CruiseControl_Icon.png"><div class="tab">CRUISE&nbsp;CONTROL</div></a></li>
						<li class="item" id="MotorSpeed"><a href="indexf267.html?example=MotorSpeed&amp;section=ControlDigital"><img class="icon" src="Images/MotorSpeed_Icon.png"><div class="tab">MOTOR&nbsp;SPEED</div></a></li>
						<li class="item" id="MotorPosition"><a href="index7d62.html?example=MotorPosition&amp;section=ControlDigital"><img class="icon" src="Images/MotorPosition_Icon.png"><div class="tab">MOTOR&nbsp;POSITION</div></a></li>
						<li class="item" id="Suspension"><a href="index3cf8.html?example=Suspension&amp;section=ControlDigital"><img class="icon" src="Images/Suspension_Icon.png"><div class="tab">SUSPENSION</div></a></li>
						<li class="item" id="InvertedPendulum"><a href="index5759.html?example=InvertedPendulum&amp;section=ControlDigital"><img class="icon" src="Images/InvertedPendulum_Icon.png"><div class="tab">INVERTED&nbsp;PENDULUM</div></a></li>
						<li class="item" id="AircraftPitch"><a href="index3b26.html?example=AircraftPitch&amp;section=ControlDigital"><img class="icon" src="Images/AircraftPitch_Icon.png"><div class="tab">AIRCRAFT&nbsp;PITCH</div></a></li>
						<li class="item" id="BallBeam"><a href="index447e.html?example=BallBeam&amp;section=ControlDigital"><img class="icon" src="Images/BallBeam_Icon.png"><div class="tab">BALL&nbsp;&amp;&nbsp;BEAM</div></a></li>
					
					</ul> 
		
				</div>
				
				<div id="content_container">
					<div class="content">
   <div class="content_fx">
      <h1>Cruise Control: Digital Controller Design</h1>
      <!--introduction-->
      <p>In this digital control version of the cruise control problem, we are going to use the root-locus design method to design
         the digital controller.
      </p>
      <p>Key MATLAB commands used in this tutorial are: <a href="http://www.mathworks.com/help/toolbox/control/ref/tf.html"><tt>tf</tt></a> , <a href="http://www.mathworks.com/help/toolbox/control/ref/c2d.html"><tt>c2d</tt></a> , <a href="http://www.mathworks.com/help/toolbox/control/ref/rlocus.html"><tt>rlocus</tt></a> , <a href="http://www.mathworks.com/help/toolbox/control/ref/zgrid.html"><tt>zgrid</tt></a> , <a href="http://www.mathworks.com/help/toolbox/control/ref/feedback.html"><tt>feedback</tt></a> , <a href="http://www.mathworks.com/help/toolbox/control/ref/step.html"><tt>step</tt></a></p>
      <!--/introduction-->
      <h2>Contents</h2>
      <div>
         <ul>
            <li><a href="#1">System model</a></li>
            <li><a href="#2">System parameters</a></li>
            <li><a href="#3">Performance specifications</a></li>
            <li><a href="#4">Discrete-time transfer function</a></li>
            <li><a href="#5">Root locus in the z-Plane</a></li>
            <li><a href="#12">Compensation using a digital controller</a></li>
         </ul>
      </div>
      <h2>System model<a name="1"></a></h2>
      <p>The transfer function model for the cruise control problem is given below.  Please see the <a href="index9b00.html?example=CruiseControl&amp;section=SystemModeling">Cruise Control: System Modeling</a> page for the derivation.
      </p>
      <p><span class="eqn_num">(1)</span><img class="display_eqn" src="Content/CruiseControl/Control/Digital/html/CruiseControl_ControlDigital_eq55019.png" alt="$$&#xA;P(s) = \frac{V(s)}{U(s)} = \frac{1}{ms+b} \qquad  [ \frac{m/s}{N} ]&#xA;$$"></p>
      <h2>System parameters<a name="2"></a></h2>
      <p>For this example, let's assume that parameters of the system are</p><pre>(m)   vehicle mass            1000 kg</pre><pre>(b)   damping coefficient     50 N.s/m</pre><pre>(r)   reference speed         10 m/s</pre><pre>(u)   nominal control force   500 N</pre><h2>Performance specifications<a name="3"></a></h2>
      <p>We need to design a controller to meet the following design criteria for this problem:</p>
      <div>
         <ul>
            <li>Rise time &lt; 5 s</li>
            <li>Overshoot &lt; 10%</li>
            <li>Steady-state error &lt; 2%</li>
         </ul>
      </div>
      <h2>Discrete-time transfer function<a name="4"></a></h2>
      <p>The first step in performing a discrete analysis of a system is to find the discrete-time equivalent transfer function of
         the continuous portion.  We will convert the above transfer function (Y(s)/U(s)) to a discrete-time transfer function using
         the MATLAB function <tt>c2d</tt>.  To use this function, you need to specify three arguments: system, sampling time (Ts), and the <tt>'method'</tt>. You should already be familiar with how to enter num and den matrices. The sampling time (Ts), in the unit of sec/sample,
         should be smaller than 1/(30*BW), where BW is the closed-loop bandwidth frequency. For the method, we will use the zero-order
         hold (<tt>'zoh'</tt>).
      </p>
      <p>Let the sampling time equal 1/50 sec; this is sufficiently fast assuming that the bandwidth frequency is 1 rad/sec. Now enter
         the following commands into an <a href="indexd754.html?aux=Extras_Mfile">m-file</a> and run it in the command window.
      </p><pre class="codeinput">m = 1000;
b = 50;
u = 500;

s = tf(<span class="string">'s'</span>);
P_cruise = 1/(m*s+b);

Ts = 1/50;

dP_cruise = c2d(P_cruise,Ts,<span class="string">'zoh'</span>)
</pre><pre class="codeoutput">
dP_cruise =
 
  1.999e-05
  ---------
  z - 0.999
 
Sample time: 0.02 seconds
Discrete-time transfer function.

</pre><h2>Root locus in the z-Plane<a name="5"></a></h2>
      <p>Recall from the <a href="index4e79.html?example=Introduction&amp;section=ControlDigital">Digital Control Tutorial</a> page, the MATLAB function <tt>zgrid</tt> can be used to find an acceptable region of the discrete root-locus that gives the desired gain (K). The <tt>zgrid</tt> command requires two arguments: Natural frequency (Wn) and damping ratio (zeta). These two arguments can be found from the
         rise time and the overshoot requirements and the following two equations.
      </p>
      <p><span class="eqn_num">(2)</span><img class="display_eqn" src="Content/CruiseControl/Control/Digital/html/CruiseControl_ControlDigital_eq81911.png" alt="$$&#xA;\omega_n \geq \frac{1.8}{Tr}&#xA;$$"></p>
      <p><span class="eqn_num">(3)</span><img class="display_eqn" src="Content/CruiseControl/Control/Digital/html/CruiseControl_ControlDigital_eq85838.png" alt="$$&#xA;\zeta = \frac{-\ln(\%OS/100)}{\sqrt{\pi^2+\ln(\%OS/100)^2}}&#xA;$$"></p>
      <p>where,</p>
      <div>
         <ul>
            <li>zeta = Damping ratio</li>
            <li>Wn = Natural frequency (rad/sec)</li>
            <li>Tr = Rise time</li>
            <li>%OS = Maximum overshoot</li>
         </ul>
      </div>
      <p>Since our rise time and overshoot requirements are 5 seconds and 10%, respectively, we can determine that the natural frequency
         (Wn) must be greater than 0.36 rad/sec and the damping ratio (zeta) must be greater than 0.6.
      </p>
      <p>Let's generate the root-locus and use the <tt>zgrid</tt> command to find the acceptable region of the root-locus. But before doing that, if you refer to the <a href="index4e79.html?example=Introduction&amp;section=ControlDigital">Digital Control Tutorial</a>, the natural frequency argument for <tt>zgrid</tt> needs to be in units of rad/sample, so let Wn = 0.36*Ts = 0.0072 rad/sample. Now add the following commands to the above
         m-file and rerun it. You should get the following plot.
      </p><pre class="codeinput">Wn = 0.0072;
zeta = 0.6;

rlocus(dP_cruise)
zgrid(zeta, Wn)
axis ([-1 1 -1 1])
</pre><img class="figure"vspace="5" hspace="5" src="Content/CruiseControl/Control/Digital/html/CruiseControl_ControlDigital_01.png" alt=""> <p>The region of the complex plane which interests us is that which is near the point (1,0), so you should zoom in on this point.
         Rerun using the following axis command and your figure should now appear as shown below.
      </p><pre class="codeinput">axis ([0.95 1 -.1 .1])
</pre><img class="figure"vspace="5" hspace="5" src="Content/CruiseControl/Control/Digital/html/CruiseControl_ControlDigital_02.png" alt=""> <p>The dotted line on the right, indicates the locations of constant natural frequency (Wn), and the natural frequency is greater
         than 0.0072 outside the line. The other dotted line indicates the locations of constant damping ratio (zeta), and the damping
         ratio is greater than 0.6 inside the line. The jagged vertical line is a portion of the unit circle which is calculated at
         low resolution (hence the jaggedness).
      </p>
      <p>In the above plot, you can see that part of the root locus is inside the desired region. Let's find a specific gain (K) using
         the MATLAB function <tt>rlocfind</tt> and then obtain the corresponding step response. Running the command <tt>[K,poles] = rlocfind(dP_cruise)</tt> in the MATLAB command window will generate a prompt directing you to select a point on the root locus. Remember that if you
         choose a pole which is too far inside the unit circle, then the step response will be too fast indicating a physically unreasonable
         acceleration. Therefore, you should choose the pole which is near the intersection of the constant natural frequency and the
         real axis. Select the point near 0.99 as shown by the cross mark on the following root locus graph.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/CruiseControl/Control/Digital/figures/rlocus_dcruise.png" alt=""> </p>
      <p>After selecting a point, you should see the following output in the MATLAB command window indicating the point you chose,
         the point on the root locus closest to that point (the pole), and the gain K that places the closed-loop pole at that location.
      </p>
      <p>
         </p><pre class="codeoutput">Select a point in the graphics window
         </p>
         selected_point =
         </p>
         0.9900 - 0.0003i
         </p>
         K =
         </p>
         451.1104
         </p>
         poles =
         </p>
         0.9900
         </pre>
         
      </p>
      <p>Then to see the closed-loop step response, add the following code to your m-file.</p><pre class="codeinput">K = 451.1104;
sys_cl = feedback(K*dP_cruise,1);
r = 10;
figure
step(r*sys_cl,10);
</pre><img class="figure"vspace="5" hspace="5" src="Content/CruiseControl/Control/Digital/html/CruiseControl_ControlDigital_03.png" alt=""> <p>This response satisfies the rise time and overshoot requirements. But the steady-state error is about 11%. To obtain the desired
         steady-state error, we will modify the digital controller.
      </p>
      <h2>Compensation using a digital controller<a name="12"></a></h2>
      <p>Recall from the continuous <a href="index4431.html?example=CruiseControl&amp;section=ControlRootLocus">Cruise Control: Root Locus</a> page, a lag compensator was added to the system to obtain the desired response. In this digital control version of the cruise
         control problem, we will modify the existing digital controller by adding additional lag compensation of the form shown below.
      </p>
      <p><span class="eqn_num">(4)</span><img class="display_eqn" src="Content/CruiseControl/Control/Digital/html/CruiseControl_ControlDigital_eq38715.png" alt="$$&#xA;C_{lag}(z) = K\frac{(z+a)}{(z+b)}&#xA;$$"></p>
      <p>There is a guideline for the design <a href="index4158.html?aux=Extras_Dleadlag">digital lead and lag compensators</a> and a guideline for the design of <a href="index47e4.html?aux=Extras_Leadlag">continuous-time lead and lag compensators</a>. The discrete design method described says that the zero of the lag compensator should be chosen to (approximately) cancel
         one of the plant poles, as long as it is stable. Thus, we choose the zero to be at zo = 0.999.
      </p>
      <p>To reduce the steady-state error, we note that the low frequency gain of the discrete-time control system with a lag compensator
         is increased by a factor of (1 - zo)/(1 - po). To reduce the steady-state error by a factor of 5, we choose po = 0.9998. To
         have a gain of 1 at zero frequency, the numerator is multiplied by Kd = (1 - zp)/(1 - zo) = 0.2 before using the root locus.
         Note that the whole compensator is multiplied by the loop gain determined from the root locus.
      </p>
      <p>Now we have the discrete-time compensator transfer function. Let's generate the root-locus and obtain the step response. First
         create a new m-file and enter the following commands.
      </p><pre class="codeinput">m = 1000;
b = 50;
u = 500;

s = tf(<span class="string">'s'</span>);
P_cruise = 1/(m*s+b);
Ts = 1/50;
dP_cruise = c2d(P_cruise,Ts,<span class="string">'zoh'</span>);

z = tf(<span class="string">'z'</span>,Ts);
C = 0.2*(z - 0.999)/(z - 0.9998);

Wn = 0.0072;
zeta = 0.6;

rlocus(C*dP_cruise)
zgrid(zeta, Wn)
axis([0.98 1 -0.01 0.01])
</pre><img class="figure"vspace="5" hspace="5" src="Content/CruiseControl/Control/Digital/html/CruiseControl_ControlDigital_04.png" alt=""> <p>Then enter the command <tt>[K,poles] = rlocfind(C*dP_cruise)</tt> at the command line and again choose a pole location near 0.99 as indicated by the cross marks in the following figure.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/CruiseControl/Control/Digital/figures/rlocus_dcruise2.png" alt=""> </p>
      <p>After selecting a point, you should see the following output in the MATLAB command window indicating the point you chose,
         the point on the root locus closest to that point (the pole), and the gain K that places the closed-loop pole at that location.
      </p>
      <p>
         </p><pre class="codeoutput">Select a point in the graphics window
         </p>
         selected_point =
         </p>
         0.9900 - 0.0000i
         </p>
         K =
         </p>
         2.4454e+03
         </p>
         poles =
         </p>
         0.9900
         0.9900
         </pre>
         
      </p>
      <p>Finally, to see the closed-loop step response, add the following code to your m-file.</p><pre class="codeinput">K = 2.4454e+03;
sys_cl = feedback(K*C*dP_cruise,1);
r = 10;
step(r*sys_cl,10);
</pre><img class="figure"vspace="5" hspace="5" src="Content/CruiseControl/Control/Digital/html/CruiseControl_ControlDigital_05.png" alt=""> <p>This response rises about as fast as before, but the steady-state error has been reduced to 2%. This system satisfies all
         of the design requirements while requiring a reasonable amount of control effort.
      </p>
      <p><b>Note:</b> A design problem does not necessarily have a unique answer. For practice, you may try other compensators to obtain a better
         response than the one shown above.
      </p>
      <p class="footer"><br>
         Published with MATLAB&reg; 7.14<br></p>
   </div>
</div>
<!--
##### SOURCE BEGIN #####
%% Cruise Control: Digital Controller Design
%
% In this digital control version of the cruise control problem, we are
% going to use the root-locus design method to design the digital controller. 
%
% Key MATLAB commands used in this tutorial are:
% <http://www.mathworks.com/help/toolbox/control/ref/tf.html |tf|> , 
% <http://www.mathworks.com/help/toolbox/control/ref/c2d.html |c2d|> ,
% <http://www.mathworks.com/help/toolbox/control/ref/rlocus.html |rlocus|> ,
% <http://www.mathworks.com/help/toolbox/control/ref/zgrid.html |zgrid|> ,
% <http://www.mathworks.com/help/toolbox/control/ref/feedback.html |feedback|> ,
% <http://www.mathworks.com/help/toolbox/control/ref/step.html |step|> 
%
%% System model
%
% The transfer function model for the cruise control problem is given
% below.  Please see the 
% < ?example=CruiseControl&section=SystemModeling Cruise Control: System Modeling>
% page for the derivation.
%
% $$
% P(s) = \frac{V(s)}{U(s)} = \frac{1}{ms+b} \qquad  [ \frac{m/s}{N} ]
% $$
%
%% System parameters
%
% For this example, let's assume that parameters of the system are
% 
%  (m)   vehicle mass            1000 kg
%
%  (b)   damping coefficient     50 N.s/m
%
%  (r)   reference speed         10 m/s
%
%  (u)   nominal control force   500 N
%
%% Performance specifications
%
% We need to design a controller to meet the following design criteria
% for this problem:
%
% * Rise time < 5 s
% * Overshoot < 10%
% * Steady-state error < 2%
%
%% Discrete-time transfer function
%
% The first step in performing a discrete analysis of a system is to find
% the discrete-time equivalent transfer function of the continuous portion.  We
% will convert the above transfer function (Y(s)/U(s)) to a discrete-time transfer 
% function using the MATLAB function |c2d|.  To use this function, you need
% to specify three arguments: system, sampling time (Ts), and the |'method'|. 
% You should already be familiar with how to enter num and den matrices. The 
% sampling time (Ts), in the unit of sec/sample, should be smaller than 
% 1/(30*BW), where BW is the closed-loop bandwidth frequency. For the method, 
% we will use the zero-order hold (|'zoh'|). 
%
% Let the sampling time equal 1/50 sec; this is sufficiently fast assuming
% that the bandwidth frequency is 1 rad/sec. Now enter the following commands 
% into an < ?aux=Extras_Mfile m-file> and run it in the command window.
%

m = 1000;
b = 50;
u = 500;

s = tf('s');
P_cruise = 1/(m*s+b);

Ts = 1/50;

dP_cruise = c2d(P_cruise,Ts,'zoh')

%% Root locus in the z-Plane
%
% Recall from the < ?example=Introduction&section=ControlDigital
% Digital Control Tutorial> page, the MATLAB function 
% |zgrid| can be used to find an acceptable region of the discrete root-locus 
% that gives the desired gain (K). The |zgrid| command requires two arguments: 
% Natural frequency (Wn) and damping ratio (zeta). These two arguments can 
% be found from the rise time and the overshoot requirements and the following 
% two equations. 
%
% $$
% \omega_n \geq \frac{1.8}{Tr}
% $$
%
% $$
% \zeta = \frac{-\ln(\%OS/100)}{\sqrt{\pi^2+\ln(\%OS/100)^2}}
% $$
%
% where,
% 
% * zeta = Damping ratio
% * Wn = Natural frequency (rad/sec)
% * Tr = Rise time
% * %OS = Maximum overshoot 
%
% Since our rise time and overshoot requirements are 5 seconds and 10%,
% respectively, we can determine that the natural frequency (Wn) must be 
% greater than 0.36 rad/sec and the damping ratio (zeta) must be greater 
% than 0.6. 
%
% Let's generate the root-locus and use the |zgrid| command to find the acceptable
% region of the root-locus. But before doing that, if you refer to the 
% < ?example=Introduction&section=ControlDigital
% Digital Control Tutorial>, the natural frequency argument for |zgrid| needs 
% to be in units of rad/sample, so let Wn = 0.36*Ts = 0.0072 rad/sample. 
% Now add the following commands to the above m-file and rerun it. You should 
% get the following plot. 
%
%%

Wn = 0.0072;
zeta = 0.6;

rlocus(dP_cruise)
zgrid(zeta, Wn)
axis ([-1 1 -1 1])

%%
% The region of the complex plane which interests us is that which is near
% the point (1,0), so you should zoom in on this point. Rerun using the following axis 
% command and your figure should now appear as shown below.

axis ([0.95 1 -.1 .1])

%%
% The dotted line on the right, indicates the locations of constant natural
% frequency (Wn), and the natural frequency is greater than 0.0072 outside 
% the line. The other dotted line indicates the locations of constant damping 
% ratio (zeta), and the damping ratio is greater than 0.6 inside the line. 
% The jagged vertical line is a portion of the unit circle which is 
% calculated at low resolution (hence the jaggedness). 
%
% In the above plot, you can see that part of the root locus is inside the
% desired region. Let's find a specific gain (K) using the MATLAB function |rlocfind| 
% and then obtain the corresponding step response. Running the command
% |[K,poles] = rlocfind(dP_cruise)| in the MATLAB command window will
% generate a prompt directing you to select a 
% point on the root locus. Remember that if you choose a pole which is too 
% far inside the unit circle, then the step response will be too fast 
% indicating a physically unreasonable acceleration. Therefore, you should 
% choose the pole which is near the intersection of the constant natural 
% frequency and the real axis. Select the point near 0.99 as shown by the 
% cross mark on the following root locus graph. 
%
% <<Content/CruiseControl/Control/Digital/figures/rlocus_dcruise.png>>
%
% After selecting a point, you should see the following output in the MATLAB
% command window indicating the point you chose, the point on the root
% locus closest to that point (the pole), and the gain K that places
% the closed-loop pole at that location.
%%
% <html>
% </p><pre class="codeoutput">Select a point in the graphics window
% </p>
% selected_point =
% </p>
%  0.9900 - 0.0003i
% </p>
% K =
% </p>
%   451.1104
% </p>
% poles =
% </p>
%   0.9900 
% </pre>
% </html>
%%
% Then to see the closed-loop step response, add the following code to your m-file. 

K = 451.1104;
sys_cl = feedback(K*dP_cruise,1);
r = 10;
figure
step(r*sys_cl,10);

%%
% This response satisfies the rise time and overshoot requirements. But the
% steady-state error is about 11%. To obtain the desired steady-state error, 
% we will modify the digital controller.
%
%% Compensation using a digital controller
%
% Recall from the continuous
% < ?example=CruiseControl&section=ControlRootLocus Cruise Control: Root
% Locus> page, a lag compensator was added to the system to obtain the
% desired response. In this digital control version of the cruise control
% problem, we will modify the existing digital controller by adding
% additional lag compensation of the form shown below.
%
% $$
% C_{lag}(z) = K\frac{(z+a)}{(z+b)}
% $$
%
% There is a guideline for the design < ?aux=Extras_Dleadlag digital lead and lag
% compensators> and a 
% guideline for the design of < ?aux=Extras_Leadlag continuous-time lead and
% lag compensators>. The  
% discrete design method described says that the zero of the lag compensator 
% should be chosen to (approximately) cancel one of the plant poles, as long 
% as it is stable. Thus, we choose the zero to be at zo = 0.999. 
%
% To reduce the steady-state error, we note that the low frequency gain of
% the discrete-time control system with a lag compensator is increased by a 
% factor of (1 - zo)/(1 - po). To reduce the steady-state error by a 
% factor of 5, we choose po = 0.9998. To have a gain of 1 at zero frequency, 
% the numerator is multiplied by Kd = (1 - zp)/(1 - zo) = 0.2 before using 
% the root locus. Note that the whole compensator is multiplied by the loop gain 
% determined from the root locus. 
%
% Now we have the discrete-time compensator transfer function. Let's generate
% the root-locus and obtain the step response. First create a new m-file and 
% enter the following commands. 

m = 1000;
b = 50;
u = 500;

s = tf('s');
P_cruise = 1/(m*s+b);
Ts = 1/50;
dP_cruise = c2d(P_cruise,Ts,'zoh');

z = tf('z',Ts);
C = 0.2*(z - 0.999)/(z - 0.9998);

Wn = 0.0072;
zeta = 0.6;

rlocus(C*dP_cruise)
zgrid(zeta, Wn)
axis([0.98 1 -0.01 0.01])

%%
% Then enter the command |[K,poles] = rlocfind(C*dP_cruise)| at the command
% line and again choose a pole location near 0.99 as indicated by the cross
% marks in the following figure.
%
% <<Content/CruiseControl/Control/Digital/figures/rlocus_dcruise2.png>>
%
% After selecting a point, you should see the following output in the MATLAB
% command window indicating the point you chose, the point on the root
% locus closest to that point (the pole), and the gain K that places
% the closed-loop pole at that location.
%%
% <html>
% </p><pre class="codeoutput">Select a point in the graphics window
% </p>
% selected_point =
% </p>
%  0.9900 - 0.0000i
% </p>
% K =
% </p>
%   2.4454e+03
% </p>
% poles =
% </p>
%   0.9900 
%   0.9900
% </pre>
% </html>
%%
% Finally, to see the closed-loop step response, add the following code to your m-file. 

K = 2.4454e+03;
sys_cl = feedback(K*C*dP_cruise,1);
r = 10;
step(r*sys_cl,10);

%%
% This response rises about as fast as before, but the steady-state error
% has been reduced to 2%. This system satisfies all of the design requirements 
% while requiring a reasonable amount of control effort.
%
% *Note:* A design problem does not necessarily have a unique answer. For
% practice, you may try other compensators to obtain a better response 
% than the one shown above. 


##### SOURCE END #####
-->				</div>
				
				<div id="left">

					<ul class="section">
						<li class="heading" id="System">SYSTEM<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SystemModeling"><a href="index9b00.html?example=CruiseControl&amp;section=SystemModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SystemAnalysis"><a href="index5c95.html?example=CruiseControl&amp;section=SystemAnalysis">ANALYSIS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Control">CONTROL<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="ControlPID"><a href="index08fb.html?example=CruiseControl&amp;section=ControlPID">PID<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlRootLocus"><a href="index4431.html?example=CruiseControl&amp;section=ControlRootLocus">ROOT&nbsp;LOCUS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlFrequency"><a href="index75ab.html?example=CruiseControl&amp;section=ControlFrequency">FREQUENCY<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlStateSpace"><a href="index1502.html?example=CruiseControl&amp;section=ControlStateSpace">STATE-SPACE<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlDigital"><a href="index6e12.html?example=CruiseControl&amp;section=ControlDigital">DIGITAL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Simulink">SIMULINK<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SimulinkModeling"><a href="index3818.html?example=CruiseControl&amp;section=SimulinkModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SimulinkControl"><a href="index8e57.html?example=CruiseControl&amp;section=SimulinkControl">CONTROL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
		
				</div>
			
				<div style="clear:both"></div>
				
				<div id="bottombar"><span style="color:#FF5500;font-weight:bold">.</div>
				
			</div>
			
		</div>
	
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=CruiseControl&section=ControlDigital by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:03:01 GMT -->
</html>

	rolDigital by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:03:01 GMT -->
</html>

		
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=CruiseControl&section=ControlDigital by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:03:01 GMT -->
</html>

	rolDigital by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:03:01 GMT -->
</html>

	pier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:03:01 GMT -->
</html>

	rolDigital by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:03:01 GMT -->
</html>

	