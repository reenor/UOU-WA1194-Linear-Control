<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

	
<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=MotorPosition&section=SimulinkModeling by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

		<script type="text/javascript" src="jquery.js"></script>
					
		<link rel='stylesheet' type='text/css' href='style.css' />
		<script type="text/javascript">
	
			var example = "MotorPosition"; 
			var section = "SimulinkModeling"; 
			var aux = ""; 
			var effects = Boolean(1); 
			var tips = Boolean(1); 
			$.fx.off = !effects;
			
			$(document).keydown(function(e){
				if (!$("#search_field").is(":focus")){
					if (e.keyCode == 39) { 
						window.location = "index4c9e.html?example=MotorPosition&amp;section=SimulinkControl";
					}
					if (e.keyCode == 37) { 
						window.history.back()
					}
				}
			});		
			
		</script>
			
		<meta http-equiv="Content-Type" Content="text/html; charset=utf-8" />
		<meta http-equiv="PRAGMA" Content="NO-CACHE" />
		
		<title>Control Tutorials for MATLAB and Simulink - Motor Position: Simulink Modeling</title>
			
	</head>

	<body>
	
		
		<div id="container">
		
			<form id="search_form"><input id="search_field" type="text" name="q" placeholder="Search Control Tutorials"/></form>
			<form class="option_form" method="post" onclick="submit()"><div>Effects</div><input type="hidden" name="effects" value="0"/><input type="checkbox" name="effects" value="1" checked='true' /></form>
			<form class="option_form" method="post" onclick="submit()"><div>Tips</div><input type="hidden" name="tips" value="0"/><input type="checkbox" name="tips" value="1" checked='true' /></form>	
				
			<div style="clear:both"></div>
		
			<div id="header">
		
				

				
				
				<div id="menu_container">
				
					<ul class="menu">
						<li class="heading" id="Tips"><a href="index80e7.html?aux=Extras_Tips">TIPS</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
				
					<ul class="menu">
						<li class="heading" id="About"><a>ABOUT</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="About_Tutorials"><a href="index64fe.html?aux=About_Tutorials">Tutorials</a></li>
							<li class="item" id="About_Contact"><a href="mailto:ControlTutorialsMatlabSimulink@gmail.com">Contact</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Basics"><a>BASICS</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Basics_Matlab"><a href="index87b6.html?aux=Basics_Matlab">MATLAB</a></li>
							<li class="item" id="Basics_Simulink"><a href="indexe9ea.html?aux=Basics_Simulink">Simulink</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Index"><a>INDEX</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Index_Tutorials"><a href="index5e52.html?aux=Index_Tutorials">Tutorials</a></li>
							<li class="item" id="Index_Commands"><a href="index111e.html?aux=Index_Commands">Commands</a></li>
							<li class="item" id="Index_Animations"><a href="indexc3c5.html?aux=Index_Animations">Animations</a></li>
							<li class="item" id="Index_Extras"><a href="indexb290.html?aux=Index_Extras">Extras</a></li>
						</div></div>
					</ul>
									
					<ul class="menu">
						<li class="heading" id="Next"><a href="index4c9e.html?example=MotorPosition&amp;section=SimulinkControl">NEXT&nbsp;&#x25BA;</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
											
				</div>

			</div>
			
			<div id="body_container">
			
				<div id="gradient_container"></div>
			
				<div id="top">
				
					<a href="index1304.html?aux=Home"><img id="CTMS_logo" src="Images/CTMS_logo.png"></a>
				
					<ul class="example">
					
						<li class="item" id="Introduction"><a href="index5af4.html?example=Introduction&amp;section=SimulinkModeling"><img class="icon" src="Images/Introduction_Icon.png"><div class="tab">INTRODUCTION</div></a></li>
						<li class="item" id="CruiseControl"><a href="index3818.html?example=CruiseControl&amp;section=SimulinkModeling"><img class="icon" src="Images/CruiseControl_Icon.png"><div class="tab">CRUISE&nbsp;CONTROL</div></a></li>
						<li class="item" id="MotorSpeed"><a href="index5d5e.html?example=MotorSpeed&amp;section=SimulinkModeling"><img class="icon" src="Images/MotorSpeed_Icon.png"><div class="tab">MOTOR&nbsp;SPEED</div></a></li>
						<li class="item" id="MotorPosition"><a href="index6d09.html?example=MotorPosition&amp;section=SimulinkModeling"><img class="icon" src="Images/MotorPosition_Icon.png"><div class="tab">MOTOR&nbsp;POSITION</div></a></li>
						<li class="item" id="Suspension"><a href="index0ab7.html?example=Suspension&amp;section=SimulinkModeling"><img class="icon" src="Images/Suspension_Icon.png"><div class="tab">SUSPENSION</div></a></li>
						<li class="item" id="InvertedPendulum"><a href="indexffaa.html?example=InvertedPendulum&amp;section=SimulinkModeling"><img class="icon" src="Images/InvertedPendulum_Icon.png"><div class="tab">INVERTED&nbsp;PENDULUM</div></a></li>
						<li class="item" id="AircraftPitch"><a href="indexdf56.html?example=AircraftPitch&amp;section=SimulinkModeling"><img class="icon" src="Images/AircraftPitch_Icon.png"><div class="tab">AIRCRAFT&nbsp;PITCH</div></a></li>
						<li class="item" id="BallBeam"><a href="indexc9d4.html?example=BallBeam&amp;section=SimulinkModeling"><img class="icon" src="Images/BallBeam_Icon.png"><div class="tab">BALL&nbsp;&amp;&nbsp;BEAM</div></a></li>
					
					</ul> 
		
				</div>
				
				<div id="content_container">
					<div class="content">
   <div class="content_fx">
      <h1>DC Motor Position: Simulink Modeling</h1>
      <!--introduction-->
      <!--/introduction-->
      <h2>Contents</h2>
      <div>
         <ul>
            <li><a href="#1">Physical setup</a></li>
            <li><a href="#2">Building the model with Simulink</a></li>
            <li><a href="#8">Building the model with Simscape</a></li>
            <li><a href="#12">Building the model through its LTI representation</a></li>
         </ul>
      </div>
      <h2>Physical setup<a name="1"></a></h2>
      <p>A common actuator in control systems is the DC motor. It directly provides rotary motion and, coupled with wheels or drums
         and cables, can provide translational motion. The electric circuit of the armature and the free-body diagram of the rotor
         are shown in the following figure:
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorPosition/Simulink/Modeling/figures/motor.png" alt=""> </p>
      <p>The input to the system is the voltage applied to the motor's armature (<i>V</i>), while the output is the angular position of the shaft (<i>theta</i>).
      </p>
      <p>The physical parameters for our example are:</p><pre>(J)     moment of inertia of the rotor     3.2284E-6 kg.m^2</pre><pre>(b)     motor viscous friction constant    3.5077E-6 Nms</pre><pre>(Ke)    electromotive force constant       0.0274 V/rad/sec</pre><pre>(Kt)    motor torque constant              0.0274 Nm/Amp</pre><pre>(R)     electric resistance                4 ohm</pre><pre>(L)     electric inductance                2.75E-6H</pre><p>The motor torque  is proportional to the armature current <i>i</i> by a constant factor <i>Kt</i> as shown in the relation below.
      </p>
      <p><span class="eqn_num">(1)</span><img class="display_eqn" src="Content/MotorPosition/Simulink/Modeling/html/MotorPosition_SimulinkModeling_eq21423.png" alt="$$ T = K_{t} i $$"></p>
      <p>The back emf, <i>e</i>, is proportional to the angular velocity of the shaft by a constant factor <i>Kb</i>.
      </p>
      <p><span class="eqn_num">(2)</span><img class="display_eqn" src="Content/MotorPosition/Simulink/Modeling/html/MotorPosition_SimulinkModeling_eq52024.png" alt="$$ e = K_{e} \dot{\theta} $$"></p>
      <p>In SI units, the motor torque and back emf constants are equal, that is, <i>K = Kt = Ke</i>.
      </p>
      <h2>Building the model with Simulink<a name="2"></a></h2>
      <p>This system will be modeled by summing the torques acting on the rotor inertia and integrating the rotor's angular acceleration
         to give the velocity, and integrating the velocity to get position. Also, Kirchoff's laws will be applied to the armature
         circuit. First, we will model the integrals of the rotor acceleration and of the rate of change of armature current shown
         below.
      </p>
      <p><span class="eqn_num">(3)</span><img class="display_eqn" src="Content/MotorPosition/Simulink/Modeling/html/MotorPosition_SimulinkModeling_eq93006.png" alt="$$ \int \ \int \ \frac{d^2{\theta}}{dt^2} \ dt= \int \frac{d{\theta}}{dt} \ dt = {\theta} $$"></p>
      <p><span class="eqn_num">(4)</span><img class="display_eqn" src="Content/MotorPosition/Simulink/Modeling/html/MotorPosition_SimulinkModeling_eq10858.png" alt="$$ \int \ \frac{di}{dt} \ dt = i  $$"></p>
      <p>To build the simulation model, open Simulink and open a new model window. Then follow the steps listed below.</p>
      <div>
         <ul>
            <li>Insert an Integrator block from the Simulink/Continous library and draw lines to and from its input and output terminals.</li>
            <li>Label the input line "d2/dt2(theta)" and the output line "d/dt(theta)" as shown below. To add such a label, double-click in
               the empty space just above the line.
            </li>
            <li>Insert another Integrator block attached to the output of the previous one and draw a line from its output terminal.</li>
            <li>Label the output line "theta".</li>
            <li>Insert a third Integrator block above the first one and draw lines to and from its input and output terminals.</li>
            <li>Label the input line "d/dt(i)" and the output line "i".</li>
         </ul>
      </div>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorPosition/Simulink/Modeling/figures/Picture1.png" alt=""> </p>
      <p>Next, we will apply Newton's law and Kirchoff's law to the motor system to generate the following equations.</p>
      <p><span class="eqn_num">(5)</span><img class="display_eqn" src="Content/MotorPosition/Simulink/Modeling/html/MotorPosition_SimulinkModeling_eq52346.png" alt="$$ J \frac{d^2 \theta}{dt^2} = T - b \frac{d{\theta}}{dt} \Longrightarrow&#xA;\frac{d^2 \theta}{dt^2} = \frac{1}{J}(K_{t}i - b \frac{d{\theta}}{dt}) $$"></p>
      <p><span class="eqn_num">(6)</span><img class="display_eqn" src="Content/MotorPosition/Simulink/Modeling/html/MotorPosition_SimulinkModeling_eq03392.png" alt="$$ L \frac{di}{dt} = -Ri + V-e \Longrightarrow \frac{di}{dt} =&#xA;\frac{1}{L}(-Ri + V-K_{b} \frac{d{\theta}}{dt}) $$"></p>
      <p>The angular acceleration is equal to 1 / <i>J</i> multiplied by the sum of two terms (one positive, one negative). Similarly, the derivative of current is equal to 1 / <i>L</i> multiplied by the sum of three terms (one positive, two negative). Continuing to model these equations in Simulink, follow
         the steps given below.
      </p>
      <div>
         <ul>
            <li>Insert two Gain blocks from the Simulink/Math Operations library, one attached to each of the leftmost integrators.</li>
            <li>Edit the Gain block corresponding to angular acceleration by double-clicking on it and changing its value to "1/J".</li>
            <li>Change the label of this Gain block to "Inertia" by clicking on the word "Gain" underneath the block.</li>
            <li>Similarly, edit the other Gain's value to "1/L" and it's label to "Inductance".</li>
            <li>Insert two Add blocks from the Simulink/Math Operations library, one attached by a line to each of the Gain blocks.</li>
            <li>Edit the signs of the Add block corresponding to rotation to "+-" since one term is positive and one is negative.</li>
            <li>Edit the signs of the other Add block to "-+-" to represent the signs of the terms in Kirchoff's equation.</li>
         </ul>
      </div>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorPosition/Simulink/Modeling/figures/Picture2.png" alt=""> </p>
      <p>Now, we will add in the torques which are represented in Newton's equation. First, we will add in the damping torque.</p>
      <div>
         <ul>
            <li>Insert a Gain block below the "Inertia" block, then select it by single-clicking on it. Next select <b>Flip Block</b> from the <b>Format</b> menu (reached by right-clicking) to flip the block from left to right. You can also flip the selected block by holding <b>Ctrl-I</b>.
            </li>
            <li>Set the Gain value to "b" and rename the block "damping".</li>
            <li>Tap a line (hold <b>Ctrl</b> while drawing or right-click) off the first rotational Integrator's output (d/dt(theta)) and connect it to the input of the
               damping Gain block.
            </li>
            <li>Draw a line from the damping Gain output to the negative input of the rotational Add block.</li>
         </ul>
      </div>
      <p>Next, we will add in the torque from the armature.</p>
      <div>
         <ul>
            <li>Insert a Gain block attached to the positive input of the rotational Add block with a line.</li>
            <li>Edit it's value to "K" to represent the motor constant and label it "Kt".</li>
            <li>Continue drawing the line leading from the current Integrator and connect it to the Kt Gain block.</li>
         </ul>
      </div>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorPosition/Simulink/Modeling/figures/Picture3.png" alt=""> </p>
      <p>Now, we will add in the voltage terms which are represented in Kirchoff's equation. First, we will add in the voltage drop
         across the armature resistance.
      </p>
      <div>
         <ul>
            <li>Insert a Gain block above the Inductance block and flip it left to right.</li>
            <li>Set the Gain value to "R" and rename this block "Resistance".</li>
            <li>Tap a line off the current Integrator's output and connect it to the input of the Resistance Gain block.</li>
            <li>Draw a line from the Resistance Gain output to the upper negative input of the current equation Add block.</li>
         </ul>
      </div>
      <p>Next, we will add in the back emf from the motor.</p>
      <div>
         <ul>
            <li>Insert a Gain block and attach it to the other negative input of the current Add block with a line.</li>
            <li>Edit it's value to "K" to represent the motor back emf constant and label it "Ke".</li>
            <li>Tap a line off the first rotational Integrator's output (d/dt(theta)) and connect it to the Ke Gain block.</li>
         </ul>
      </div>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorPosition/Simulink/Modeling/figures/Picture4.png" alt=""> </p>
      <p>Now the model is built and we just need to add the voltage input and monitor the position output. We will insert In1 and Out1
         ports from the Simulink/Ports &amp; Subsystems library as shown in the following figure so that we may save the motor model as
         a subsystem.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorPosition/Simulink/Modeling/figures/Picture5.png" alt=""> </p>
      <p>In order to save all of these components as a single subsystem block, first select all of the blocks, then select <b>Create Subsystem</b> from the <b>Edit</b> menu. Name the subsystem "Motor_pos" and then save the model. Your model should appear as follows. You can also download
         the file for this system here, <a href="Content/MotorPosition/Simulink/Modeling/Motor_Pos.mdl">Motor_Pos.mdl</a>. We use this model in the <a href="index4c9e.html?example=MotorPosition&amp;section=SimulinkControl">DC Motor Position: Simulink Controller Design</a> page
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorPosition/Simulink/Modeling/figures/Picture5b.png" alt=""> </p>
      <h2>Building the model with Simscape<a name="8"></a></h2>
      <p>In this section, we alternatively show how to build the DC Motor model using the physical modeling blocks of the Simscape
         extension to Simulink. The blocks in the Simscape library represent actual physical components; therefore, complex multi-domain
         models can be built without the need to build mathematical equations from physical principles as was done above by applying
         Newton's laws and Kirchoff's laws.
      </p>
      <p>Open a new Simulink model and insert the following list of blocks.</p>
      <div>
         <ul>
            <li>DC Motor block from the Simscape/SimElectronics/Actuators library</li>
            <li>Current Sensor block from the Simscape/Foundation Library/Electrical/Electrical Sensors library</li>
            <li>Controlled Voltage Source block from the Simscape/Foundation Library/Electrical/Electrical Sources library</li>
            <li>Three PS-Simulink Converter blocks, one Simulink-PS Converter, and a Solver Configuration block from the Simscape/Utilities
               library
            </li>
            <li>Electrical Reference block from the Simscape/Foundation Library/Electrical/Electrical Elements library</li>
            <li>Ideal Rotational Motion Sensor block from the Simscape/Foundation Library/Mechanical/Mechanical Sensors library</li>
            <li>Mechanical Rotational Reference block from the Simscape/Foundation Library/Mechanical/Rotational Elements library</li>
            <li>Three Out1 blocks and one In1 block from the Simulink/Ports &amp; Subsystems library</li>
         </ul>
      </div>
      <p>The DC Motor block models both the electrical and mechanical characteristics of the motor. Double-click on the block in order
         to assign numerical values to the motor's physical parameters.  We will specifically define the motor <tt>By equivalent circuit parameters</tt> as chosen from the <b>Motor Parameterization</b> drop-down menu. Assign the various parameters the following variables and units. We will eventually define these variables
         at the command line of the MATLAB workspace. Note that since the motor torque constant and the back emf constant are equal
         if the units are consistent, we only need to define one of the two.
      </p><pre>Armature resistance = R [Ohm]</pre><pre>Armature inductance = L [H]</pre><pre>Back emf constant   = K [V/(rad/s)]</pre><pre>Rotor inertia       = J [kg*m^2]</pre><pre>Rotor damping       = b [N*m/(rad/s)]</pre><p>The Ideal Rotational Motion Sensor block represents a device that measures the difference in angular position and angular
         velocity between two nodes. In this case, we employ the block to measure the position and velocity of the motor shaft as compared
         to a fixed reference represented by the Mechanical Rotational Reference block.
      </p>
      <p>The Current Sensor block represents another sensor, specifically it measures the current drawn by the motor.</p>
      <p>The PS-Simulink blocks convert physical signals to Simulink output signals, while the Simulink-PS block conversely converts
         a Simulink input signal to a physical signal. These blocks can be employed to convert the Simscape signals, which represent
         physical quantities with units, to Simulink signals, which don't explicitly have units attached to them. These blocks, in
         essence, can perform a units conversion between the physical signals and the Simulink signals. In our case, we can leave the
         units undefined since the input and output of each of the conversion blocks have the same units. In general, the Simscape
         blockset is employed to model the physical plant, while the Simulink blockset is employed to model the controller.
      </p>
      <p>The Solver Configuration block is employed for defining the details of the numerical solver employed in running the Simscape
         simulation. We will use the default settings for this block.
      </p>
      <p>Next, connect and label the components so that they appear as in the figure below. Double-click on the lines which are connected
         to the Out1 blocks and label them "Current", "Position", and "Speed". Also click on the In1 block and label it "Voltage".
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorPosition/Simulink/Modeling/figures/Picture6.png" alt=""> </p>
      <p>We now need to define the parameters used in our simulation. Type the following commands at the prompt of the MATLAB command
         window.
      </p><pre class="codeinput">R = 4;
L = 2.75E-6;
K = 0.0274;
J = 3.2284E-6;
b = 3.5077E-6;
</pre><p>You can save these components in a single subsystem with one input and three outputs. Select all of the blocks and then choose
         <b>Create Subsystem</b> from the <b>Edit</b> menu. Also label the subsystem and signals as shown in the following figure.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorPosition/Simulink/Modeling/figures/Picture7.png" alt=""> </p>
      <p>You can download the complete model file here, <a href="Content/MotorPosition/Simulink/Modeling/Motor_Pos_Simscape.mdl">Motor_Pos_Simscape.mdl</a>, but note that you will need the Simscape addition to Simulink in order to run the file.
      </p>
      <h2>Building the model through its LTI representation<a name="12"></a></h2>
      <p>You can also build the DC motor model in Simulink by importing one of the models we created in MATLAB in the <a href="index9ba6.html?example=MotorPosition&amp;section=SystemModeling">DC Motor Position: System Modeling</a> page. In this page we specifically created a transfer function model and a state-space model, both of which may be imported.
         A zero-pole-gain format model can also be imported. Recall the following commands used to build a state-space model of the
         DC motor in MATLAB.
      </p><pre class="codeinput">A = [0 1 0
     0 -b/J K/J
     0 -K/L -R/L];
B = [0 ; 0 ; 1/L];
C = [1 0 0];
D = 0;
</pre><p>This model can then be imported using the LTI System block from the Control System Toolbox library as shown below. This figure
         demonstrates how the model is defined by entering "ss(A,B,C,D)" into the <b>LTI system variable</b> cell, though the <tt>tf</tt> and <tt>zpk</tt> commands could also be employed.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorPosition/Simulink/Modeling/figures/Picture8.png" alt=""> </p>
      <p>Adding In1 and Out1 ports from the Ports &amp; Subsystems library then creates the model shown below.</p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/MotorPosition/Simulink/Modeling/figures/Picture9.png" alt=""> </p>
      <p>Note that all three of the models generated above will behave equivalently as long as they are built using the same parameter
         values. The difference between them is then only the ease with which they are built and interfaced with, and how transparent
         they are in presenting information to the user.
      </p>
      <p class="footer"><br>
         Published with MATLAB&reg; 7.14<br></p>
   </div>
</div>
<!--
##### SOURCE BEGIN #####
%% DC Motor Position: Simulink Modeling
%
%% Physical setup
% A common actuator in control systems is the DC motor. It directly
% provides rotary motion and, coupled with wheels or drums and cables, can
% provide translational motion. The electric circuit of the armature and
% the free-body diagram of the rotor are shown in the following figure: 
% 
% <<Content/MotorPosition/Simulink/Modeling/figures/motor.png>>
%
% The input to the system is the voltage applied to the motor's
% armature (_V_), while the output is the angular position of the shaft (_theta_).
%
% The physical parameters for our example are:
%
%  (J)     moment of inertia of the rotor     3.2284E-6 kg.m^2 
% 
%  (b)     motor viscous friction constant    3.5077E-6 Nms 
%
%  (Ke)    electromotive force constant       0.0274 V/rad/sec 
%
%  (Kt)    motor torque constant              0.0274 Nm/Amp 
%
%  (R)     electric resistance                4 ohm
%
%  (L)     electric inductance                2.75E-6H
%
% The motor torque  is proportional to the armature current _i_ by a
% constant factor _Kt_ as shown in the relation below.
%
% $$ T = K_{t} i $$
%
% The back emf, _e_, is proportional to the angular velocity of the shaft by
% a constant factor _Kb_.
%
% $$ e = K_{e} \dot{\theta} $$
%
% In SI units, the motor torque and back emf constants are equal, that is, _K = Kt = Ke_.
%
%% Building the model with Simulink
%
% This system will be modeled by summing the torques acting on the rotor
% inertia and integrating the rotor's angular acceleration to give the velocity, and
% integrating the velocity to get position. Also, Kirchoff's laws will be
% applied to the armature circuit. First, we will model the integrals of
% the rotor acceleration and of the rate of change of armature current shown below.  
%
% $$ \int \ \int \ \frac{d^2{\theta}}{dt^2} \ dt= \int \frac{d{\theta}}{dt} \ dt = {\theta} $$
%
% $$ \int \ \frac{di}{dt} \ dt = i  $$
%    
% To build the simulation model, open Simulink and open a new model
% window. Then follow the steps listed below.
%
% * Insert an Integrator block from the Simulink/Continous library and draw
% lines to and from its input and output terminals. 
% * Label the input line "d2/dt2(theta)" and the output line "d/dt(theta)"
% as shown below. To add such a label, double-click in the empty space just
% above the line.  
% * Insert another Integrator block attached to the output of the previous
% one and draw a line from its output terminal. 
% * Label the output line "theta".
% * Insert a third Integrator block above the first one and draw lines to
% and from its input and output terminals. 
% * Label the input line "d/dt(i)" and the output line "i". 
% 
% <<Content/MotorPosition/Simulink/Modeling/figures/Picture1.png>>
%
%%
% Next, we will apply Newton's law and Kirchoff's law to the motor system
% to generate the following equations.   
%
% $$ J \frac{d^2 \theta}{dt^2} = T - b \frac{d{\theta}}{dt} \Longrightarrow
% \frac{d^2 \theta}{dt^2} = \frac{1}{J}(K_{t}i - b \frac{d{\theta}}{dt}) $$ 
%
% $$ L \frac{di}{dt} = -Ri + V-e \Longrightarrow \frac{di}{dt} =
% \frac{1}{L}(-Ri + V-K_{b} \frac{d{\theta}}{dt}) $$
%
% The angular acceleration is equal to 1 / _J_ multiplied by the sum of two
% terms (one positive, one negative). Similarly, the derivative of current is equal
% to 1 / _L_ multiplied by the sum of three terms (one positive, two
% negative). Continuing to model these equations in Simulink, follow the
% steps given below.
%
% * Insert two Gain blocks from the Simulink/Math Operations library, one
% attached to each of the leftmost integrators. 
% * Edit the Gain block corresponding to angular acceleration by
% double-clicking on it and changing its value to "1/J". 
% * Change the label of this Gain block to "Inertia" by clicking on the
% word "Gain" underneath the block. 
% * Similarly, edit the other Gain's value to "1/L" and it's label to
% "Inductance". 
% * Insert two Add blocks from the Simulink/Math Operations library, one
% attached by a line to each of the Gain blocks. 
% * Edit the signs of the Add block corresponding to rotation to "+-" since
% one term is positive and one is negative. 
% * Edit the signs of the other Add block to "-+-" to represent the signs
% of the terms in Kirchoff's equation.  
% 
% <<Content/MotorPosition/Simulink/Modeling/figures/Picture2.png>>
%
%%
% Now, we will add in the torques which are represented in Newton's
% equation. First, we will add in the damping torque.
%
% * Insert a Gain block below the "Inertia" block, then select it by
% single-clicking on it. Next select *Flip Block* from the *Format* menu
% (reached by right-clicking) to flip the block from left to right. You can
% also flip the selected block by holding *Ctrl-I*. 
% * Set the Gain value to "b" and rename the block "damping".
% * Tap a line (hold *Ctrl* while drawing or right-click) off the first rotational
% Integrator's output (d/dt(theta)) and connect it to the input of the
% damping Gain block.  
% * Draw a line from the damping Gain output to the negative input of the
% rotational Add block.   
%
% Next, we will add in the torque from the armature.
%
% * Insert a Gain block attached to the positive input of the rotational
% Add block with a line. 
% * Edit it's value to "K" to represent the motor constant and label it
% "Kt". 
% * Continue drawing the line leading from the current Integrator and
% connect it to the Kt Gain block.
% 
% <<Content/MotorPosition/Simulink/Modeling/figures/Picture3.png>>
%
%%
% Now, we will add in the voltage terms which are represented in Kirchoff's
% equation. First, we will add in the voltage drop across the armature
% resistance.  
%
% * Insert a Gain block above the Inductance block and flip it
% left to right. 
% * Set the Gain value to "R" and rename this block "Resistance".
% * Tap a line off the current Integrator's
% output and connect it to the input of the Resistance Gain block. 
% * Draw a line from the Resistance Gain output to the upper negative input
% of the current equation Add block. 
%
% Next, we will add in the back emf from the motor.
%
% * Insert a Gain block and attach it to the other negative input of the current
% Add block with a line. 
% * Edit it's value to "K" to represent the motor back emf constant and
% label it "Ke". 
% * Tap a line off the first rotational Integrator's output (d/dt(theta))
% and connect it to the Ke Gain block. 
% 
% <<Content/MotorPosition/Simulink/Modeling/figures/Picture4.png>>
%
%%
% Now the model is built and we just need to add the voltage input and
% monitor the position output. We will insert In1 and Out1 ports from the
% Simulink/Ports & Subsystems library as shown in the following figure so that we
% may save the motor model as a subsystem.  
% 
% <<Content/MotorPosition/Simulink/Modeling/figures/Picture5.png>>
%
%%
% In order to save all of these components as a single subsystem block,
% first select all of the blocks, then select *Create Subsystem* from the
% *Edit* menu. Name the subsystem "Motor_pos" and then save the model. Your
% model should appear as follows. You can also download the file for this
% system here, <Content/MotorPosition/Simulink/Modeling/Motor_Pos.mdl Motor_Pos.mdl>.  
% We use this model in the
% < ?example=MotorPosition&section=SimulinkControl DC Motor Position: Simulink Controller Design> page
%
% <<Content/MotorPosition/Simulink/Modeling/figures/Picture5b.png>>
%
%% Building the model with Simscape
%
% In this section, we alternatively show how to build the DC Motor model
% using the physical modeling blocks of the Simscape extension to Simulink.
% The blocks in the Simscape library represent actual physical components;
% therefore, complex multi-domain models can be built without the need to
% build mathematical equations from physical principles as was done above
% by applying Newton's laws and Kirchoff's laws. 
%
% Open a new Simulink model and insert the following list of blocks.
%
% * DC Motor block from the Simscape/SimElectronics/Actuators library 
% * Current Sensor block from the Simscape/Foundation
% Library/Electrical/Electrical Sensors library
% * Controlled Voltage Source block from the Simscape/Foundation
% Library/Electrical/Electrical Sources library
% * Three PS-Simulink Converter blocks, one Simulink-PS Converter, and a Solver Configuration block from the
% Simscape/Utilities library
% * Electrical Reference block from the Simscape/Foundation
% Library/Electrical/Electrical Elements library
% * Ideal Rotational Motion Sensor block from the Simscape/Foundation
% Library/Mechanical/Mechanical Sensors library
% * Mechanical Rotational Reference block from the Simscape/Foundation
% Library/Mechanical/Rotational Elements library
% * Three Out1 blocks and one In1 block from the Simulink/Ports & Subsystems library
%
% The DC Motor block models both the electrical and mechanical
% characteristics of the motor. Double-click on the block in order to
% assign numerical values to the motor's physical parameters.  We will
% specifically define the motor |By equivalent circuit parameters| as
% chosen from the *Motor Parameterization* drop-down menu. Assign the
% various parameters the following variables and units. We will eventually
% define these variables at the command line of the MATLAB workspace. Note
% that since the motor torque constant and the back emf constant are equal
% if the units are consistent, we only need to define one of the two.
%
%  Armature resistance = R [Ohm]
%
%  Armature inductance = L [H]
%
%  Back emf constant   = K [V/(rad/s)]
%
%  Rotor inertia       = J [kg*m^2]
%
%  Rotor damping       = b [N*m/(rad/s)]
%
% The Ideal Rotational Motion Sensor block represents a device that
% measures the difference in angular position and angular velocity between
% two nodes. In this case, we employ the block to measure the position and
% velocity of the motor shaft as compared to a fixed reference represented
% by the Mechanical Rotational Reference block. 
%
% The Current Sensor block represents another sensor, specifically it
% measures the current drawn by the motor. 
%
% The PS-Simulink blocks convert physical signals to Simulink
% output signals, while the Simulink-PS block conversely converts a
% Simulink input signal to a physical signal. These blocks can be employed
% to convert the Simscape signals, which represent physical 
% quantities with units, to Simulink signals, which don't explicitly have
% units attached to them. These blocks, in essence, can perform a units
% conversion between the physical signals and the Simulink signals. In our
% case, we can leave the units undefined since the input
% and output of each of the conversion blocks have the same units. In
% general, the Simscape blockset is employed to model the physical plant,
% while the Simulink blockset is employed to model the controller.
%
% The Solver Configuration block is employed for defining the details of
% the numerical solver employed in running the Simscape simulation. 
% We will use the default settings for this block.
%
% Next, connect and label the components so that they appear as in
% the figure below. Double-click on the lines which are connected
% to the Out1 blocks and label them "Current", "Position", and "Speed". Also
% click on the In1 block and label it "Voltage".
% 
% <<Content/MotorPosition/Simulink/Modeling/figures/Picture6.png>>
%
%%
% We now need to define the parameters used in our simulation. Type the
% following commands at the prompt of the MATLAB command window.

R = 4;
L = 2.75E-6;
K = 0.0274;
J = 3.2284E-6;
b = 3.5077E-6;

%%
% You can save these components in a single subsystem with one input and
% three outputs. Select all of the blocks and then choose *Create
% Subsystem* from the *Edit* menu. Also label the subsystem and signals as
% shown in the following figure.
% 
% <<Content/MotorPosition/Simulink/Modeling/figures/Picture7.png>>
%
%%
% You can download the complete model file here, <Content/MotorPosition/Simulink/Modeling/Motor_Pos_Simscape.mdl
% Motor_Pos_Simscape.mdl>, but note that you will need the Simscape
% addition to Simulink in order to run the file. 
%
%% Building the model through its LTI representation
% You can also build the DC motor model in Simulink by importing one of the
% models we created in MATLAB in the
% < ?example=MotorPosition&section=SystemModeling DC Motor Position: System Modeling> page.
% In this page we specifically created a transfer function model and a state-space model,
% both of which may be imported. A zero-pole-gain format model can also be
% imported. Recall the following commands used to build a state-space model
% of the DC motor in MATLAB.

A = [0 1 0
     0 -b/J K/J
     0 -K/L -R/L];
B = [0 ; 0 ; 1/L];
C = [1 0 0];
D = 0;

%%
% This model can then be imported using the LTI System block from the
% Control System Toolbox library as shown below. This figure demonstrates
% how the model is defined by entering "ss(A,B,C,D)" into the *LTI system
% variable* cell, though the |tf| and |zpk| commands could also be
% employed.
% 
% <<Content/MotorPosition/Simulink/Modeling/figures/Picture8.png>>
%
%%
% Adding In1 and Out1 ports from the Ports & Subsystems library then
% creates the model shown below.
% 
% <<Content/MotorPosition/Simulink/Modeling/figures/Picture9.png>>
%
%% 
% Note that all three of the models generated above will behave
% equivalently as long as they are built using the same parameter values.
% The difference between them is then only the ease with which they are
% built and interfaced with, and how transparent they are in presenting
% information to the user.


##### SOURCE END #####
-->				</div>
				
				<div id="left">

					<ul class="section">
						<li class="heading" id="System">SYSTEM<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SystemModeling"><a href="index9ba6.html?example=MotorPosition&amp;section=SystemModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SystemAnalysis"><a href="indexb7ed.html?example=MotorPosition&amp;section=SystemAnalysis">ANALYSIS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Control">CONTROL<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="ControlPID"><a href="indexe534.html?example=MotorPosition&amp;section=ControlPID">PID<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlRootLocus"><a href="index3c83.html?example=MotorPosition&amp;section=ControlRootLocus">ROOT&nbsp;LOCUS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlFrequency"><a href="index1ae7.html?example=MotorPosition&amp;section=ControlFrequency">FREQUENCY<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlStateSpace"><a href="indexc79c.html?example=MotorPosition&amp;section=ControlStateSpace">STATE-SPACE<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlDigital"><a href="index7d62.html?example=MotorPosition&amp;section=ControlDigital">DIGITAL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Simulink">SIMULINK<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SimulinkModeling"><a href="index6d09.html?example=MotorPosition&amp;section=SimulinkModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SimulinkControl"><a href="index4c9e.html?example=MotorPosition&amp;section=SimulinkControl">CONTROL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
		
				</div>
			
				<div style="clear:both"></div>
				
				<div id="bottombar"><span style="color:#FF5500;font-weight:bold">.</div>
				
			</div>
			
		</div>
	
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=MotorPosition&section=SimulinkModeling by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:43 GMT -->
</html>

	nkModeling by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:43 GMT -->
</html>

	
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=MotorPosition&section=SimulinkModeling by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:43 GMT -->
</html>

	nkModeling by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:43 GMT -->
</html>

	pier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:43 GMT -->
</html>

	nkModeling by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:43 GMT -->
</html>

	