<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

	
<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=CruiseControl&section=ControlStateSpace by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:05:58 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>

		<script type="text/javascript" src="jquery.js"></script>
					
		<link rel='stylesheet' type='text/css' href='style.css' />
		<script type="text/javascript">
	
			var example = "CruiseControl"; 
			var section = "ControlStateSpace"; 
			var aux = ""; 
			var effects = Boolean(1); 
			var tips = Boolean(1); 
			$.fx.off = !effects;
			
			$(document).keydown(function(e){
				if (!$("#search_field").is(":focus")){
					if (e.keyCode == 39) { 
						window.location = "index6e12.html?example=CruiseControl&amp;section=ControlDigital";
					}
					if (e.keyCode == 37) { 
						window.history.back()
					}
				}
			});		
			
		</script>
			
		<meta http-equiv="Content-Type" Content="text/html; charset=utf-8" />
		<meta http-equiv="PRAGMA" Content="NO-CACHE" />
		
		<title>Control Tutorials for MATLAB and Simulink - Cruise Control: State-Space Methods for Controller Design</title>
			
	</head>

	<body>
	
		
		<div id="container">
		
			<form id="search_form"><input id="search_field" type="text" name="q" placeholder="Search Control Tutorials"/></form>
			<form class="option_form" method="post" onclick="submit()"><div>Effects</div><input type="hidden" name="effects" value="0"/><input type="checkbox" name="effects" value="1" checked='true' /></form>
			<form class="option_form" method="post" onclick="submit()"><div>Tips</div><input type="hidden" name="tips" value="0"/><input type="checkbox" name="tips" value="1" checked='true' /></form>	
				
			<div style="clear:both"></div>
		
			<div id="header">
		
				

				
				
				<div id="menu_container">
				
					<ul class="menu">
						<li class="heading" id="Tips"><a href="index80e7.html?aux=Extras_Tips">TIPS</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
				
					<ul class="menu">
						<li class="heading" id="About"><a>ABOUT</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="About_Tutorials"><a href="index64fe.html?aux=About_Tutorials">Tutorials</a></li>
							<li class="item" id="About_Contact"><a href="mailto:ControlTutorialsMatlabSimulink@gmail.com">Contact</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Basics"><a>BASICS</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Basics_Matlab"><a href="index87b6.html?aux=Basics_Matlab">MATLAB</a></li>
							<li class="item" id="Basics_Simulink"><a href="indexe9ea.html?aux=Basics_Simulink">Simulink</a></li>
						</div></div>
					</ul>
					
					<ul class="menu">
						<li class="heading" id="Index"><a>INDEX</a></li>
						<div class="collapse"><div class="expand">
							<li class="item" id="Index_Tutorials"><a href="index5e52.html?aux=Index_Tutorials">Tutorials</a></li>
							<li class="item" id="Index_Commands"><a href="index111e.html?aux=Index_Commands">Commands</a></li>
							<li class="item" id="Index_Animations"><a href="indexc3c5.html?aux=Index_Animations">Animations</a></li>
							<li class="item" id="Index_Extras"><a href="indexb290.html?aux=Index_Extras">Extras</a></li>
						</div></div>
					</ul>
									
					<ul class="menu">
						<li class="heading" id="Next"><a href="index6e12.html?example=CruiseControl&amp;section=ControlDigital">NEXT&nbsp;&#x25BA;</a></li>
						<div class="collapse"><div class="expand">
						</div></div>
					</ul>
											
				</div>

			</div>
			
			<div id="body_container">
			
				<div id="gradient_container"></div>
			
				<div id="top">
				
					<a href="index1304.html?aux=Home"><img id="CTMS_logo" src="Images/CTMS_logo.png"></a>
				
					<ul class="example">
					
						<li class="item" id="Introduction"><a href="index9b18.html?example=Introduction&amp;section=ControlStateSpace"><img class="icon" src="Images/Introduction_Icon.png"><div class="tab">INTRODUCTION</div></a></li>
						<li class="item" id="CruiseControl"><a href="index1502.html?example=CruiseControl&amp;section=ControlStateSpace"><img class="icon" src="Images/CruiseControl_Icon.png"><div class="tab">CRUISE&nbsp;CONTROL</div></a></li>
						<li class="item" id="MotorSpeed"><a href="indexd22e.html?example=MotorSpeed&amp;section=ControlStateSpace"><img class="icon" src="Images/MotorSpeed_Icon.png"><div class="tab">MOTOR&nbsp;SPEED</div></a></li>
						<li class="item" id="MotorPosition"><a href="indexc79c.html?example=MotorPosition&amp;section=ControlStateSpace"><img class="icon" src="Images/MotorPosition_Icon.png"><div class="tab">MOTOR&nbsp;POSITION</div></a></li>
						<li class="item" id="Suspension"><a href="index7de2.html?example=Suspension&amp;section=ControlStateSpace"><img class="icon" src="Images/Suspension_Icon.png"><div class="tab">SUSPENSION</div></a></li>
						<li class="item" id="InvertedPendulum"><a href="index96a8.html?example=InvertedPendulum&amp;section=ControlStateSpace"><img class="icon" src="Images/InvertedPendulum_Icon.png"><div class="tab">INVERTED&nbsp;PENDULUM</div></a></li>
						<li class="item" id="AircraftPitch"><a href="indexcff8.html?example=AircraftPitch&amp;section=ControlStateSpace"><img class="icon" src="Images/AircraftPitch_Icon.png"><div class="tab">AIRCRAFT&nbsp;PITCH</div></a></li>
						<li class="item" id="BallBeam"><a href="indexfa3e.html?example=BallBeam&amp;section=ControlStateSpace"><img class="icon" src="Images/BallBeam_Icon.png"><div class="tab">BALL&nbsp;&amp;&nbsp;BEAM</div></a></li>
					
					</ul> 
		
				</div>
				
				<div id="content_container">
					<div class="content">
   <div class="content_fx">
      <h1>Cruise Control: State-Space Methods for Controller Design</h1>
      <!--introduction-->
      <p>In this tutorial we will design a controller and observer for the cruise control system using the state-space model.</p>
      <p>Key MATLAB commands used in this tutorial are: <a href="http://www.mathworks.com/help/toolbox/control/ref/ss.html"><tt>ss</tt></a> , <a href="http://www.mathworks.com/help/toolbox/control/ref/feedback.html"><tt>feedback</tt></a></p>
      <!--/introduction-->
      <h2>Contents</h2>
      <div>
         <ul>
            <li><a href="#1">State-space equations</a></li>
            <li><a href="#2">Design requirements</a></li>
            <li><a href="#3">Control design using pole placement</a></li>
            <li><a href="#5">Reference input</a></li>
         </ul>
      </div>
      <h2>State-space equations<a name="1"></a></h2>
      <p>The equations of motion in state-space form are as follows:</p>
      <p><span class="eqn_num">(1)</span><img class="display_eqn" src="Content/CruiseControl/Control/StateSpace/html/CruiseControl_ControlStateSpace_eq21122.png" alt="$$[\dot{v}]=\left[\frac{-b}{m}\right][v]+\left[\frac{1}{m}\right][u] \ $$"></p>
      <p><span class="eqn_num">(2)</span><img class="display_eqn" src="Content/CruiseControl/Control/StateSpace/html/CruiseControl_ControlStateSpace_eq02567.png" alt="$$y=[1][v] \ $$"></p>
      <p>where</p><pre>(m)   vehicle mass            1000 kg</pre><pre>(b)   damping coefficient     50 N.s/m</pre><pre>(u)   nominal control force   500 N</pre><pre>(v)   vehicle velocity where y=v is the system output</pre><h2>Design requirements<a name="2"></a></h2>
      <div>
         <ul>
            <li>Rise time &lt; 5 s</li>
            <li>Overshoot &lt; 10%</li>
            <li>Steady-state error &lt; 2%</li>
         </ul>
      </div>
      <p>To see the original problem setup, see the <a href="index9b00.html?example=CruiseControl&amp;section=SystemModeling">Cruise Control: System Modeling</a> page.
      </p>
      <h2>Control design using pole placement<a name="3"></a></h2>
      <p>The schematic of a full state-feedback system is shown below.</p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/CruiseControl/Control/StateSpace/figures/statefeedback_cruise.png" alt=""> </p>
      <p><span class="eqn_num">(3)</span><img class="display_eqn" src="Content/CruiseControl/Control/StateSpace/html/CruiseControl_ControlStateSpace_eq63055.png" alt="$$ \frac{Y(s)}{U(s)} = \frac{1}{m s + b} \ $$"></p>
      <p>where</p>
      <div>
         <ul>
            <li>K = state-feedback gain matrix</li>
            <li>u = r-K.v = control input</li>
         </ul>
      </div>
      <p>Recall from the <a href="index9b18.html?example=Introduction&amp;section=ControlStateSpace">State-Space Tutorial</a> page, we can use a "pole placement" technique to obtain the desired output. Poles of a closed-loop system can be found from
         the characteristic equation: the determinant of the [sI-(A-B*K)] matrix. If the poles the system can be placed in the desired
         location by designing an appropriate control matrix (K), then the desired output can be obtained. In this tutorial, poles
         will be chosen first, then we will use MATLAB to find the corresponding control matrix (K).
      </p>
      <p>Now, we need to determine where to place poles for our system. Since our [sI-(A-B*K)] matrix is 1x1, we have only one pole
         to place. Let the pole be at -1.5 (arbitrary). Just as in the State-Space Tutorial, the MATLAB command <tt>place</tt> will be used to find the control matrix K. Create a new <a href="indexd754.html?aux=Extras_Mfile">m-file</a> and enter the following commands. Running the m-file in the MATLAB command window should give you the control matrix and
         step response shown below.
      </p><pre class="codeinput">m = 1000;
b = 50;
t = 0:0.1:10;
u = 500*ones(size(t));

A = [-b/m];
B = [1/m];
C = [1];
D = [0];
sys = ss(A,B,C,D);

x0 = [0];

p1 = -1.5;

K = place(A,B,[p1])

sys_cl = ss(A-B*K,B,C,D);
lsim(sys_cl,u,t,x0);
axis([0 10 0 0.35])
</pre><pre class="codeoutput">K =
        1450
</pre><img class="figure"vspace="5" hspace="5" src="Content/CruiseControl/Control/StateSpace/html/CruiseControl_ControlStateSpace_01.png" alt=""> <p>As you can see, the rise time is satisfactory, but the steady-state error is too large.</p>
      <h2>Reference input<a name="5"></a></h2>
      <p>Once again from the <a href="index9b18.html?example=Introduction&amp;section=ControlStateSpace">State-Space Tutorial</a> page, a scaling factor called Nbar (the schematic is shown below) can be used to eliminate the steady-state error. We can
         use the <a href="index1f18.html?aux=Extras_rscale">rscale</a> function to compute the scaling factor. Download it here, <a href="Content/CruiseControl/Control/StateSpace/rscale.m">rscale.m</a>. The input is already multiplied by 500, and we want the steady-state speed to be 10 m/sec, so we need to account for these
         factors as well.
      </p>
      <p><img class="figure"vspace="5" hspace="5" src="Content/CruiseControl/Control/StateSpace/figures/statefeedback_w_pre_cruise.png" alt=""> </p>
      <p>Copy the following commands to an m-file and run it in the MATLAB command window. You should get the step response shown below.</p><pre class="codeinput">Nbar = rscale(sys,K)*10/500;
sys_cl = ss(A-B*K,B*Nbar,C,D);

lsim(sys_cl,u,t,x0);
axis([0 10 0 11])
</pre><img class="figure"vspace="5" hspace="5" src="Content/CruiseControl/Control/StateSpace/html/CruiseControl_ControlStateSpace_02.png" alt=""> <p>As you can see, the steady-state error has been eliminated. The rise time is less than 5 seconds and the overshoot is, in
         fact, zero. All the design requirements are satisfied.
      </p>
      <p class="footer"><br>
         Published with MATLAB&reg; 7.14<br></p>
   </div>
</div>
<!--
##### SOURCE BEGIN #####
%% Cruise Control: State-Space Methods for Controller Design
%
% In this tutorial we will design a controller and observer for the cruise
% control system using the state-space model.
%
% Key MATLAB commands used in this tutorial are:
% <http://www.mathworks.com/help/toolbox/control/ref/ss.html |ss|> , 
% <http://www.mathworks.com/help/toolbox/control/ref/feedback.html |feedback|>
%
%% State-space equations
% The equations of motion in state-space form are as follows:
%
% $$[\dot{v}]=\left[\frac{-b}{m}\right][v]+\left[\frac{1}{m}\right][u] \ $$
%
% $$y=[1][v] \ $$
%
% where
% 
%  (m)   vehicle mass            1000 kg
%
%  (b)   damping coefficient     50 N.s/m
%
%  (u)   nominal control force   500 N
%
%  (v)   vehicle velocity where y=v is the system output
%
%% Design requirements
% * Rise time < 5 s
% * Overshoot < 10%
% * Steady-state error < 2%
%
% To see the original problem setup, see the 
% < ?example=CruiseControl&section=SystemModeling Cruise Control: System Modeling>
% page.
%
%% Control design using pole placement
% The schematic of a full state-feedback system is shown below.
%
% <<Content/CruiseControl/Control/StateSpace/figures/statefeedback_cruise.png>>
%
% $$ \frac{Y(s)}{U(s)} = \frac{1}{m s + b} \ $$
%
% where
% 
% * K = state-feedback gain matrix
% * u = r-K.v = control input 
%
% Recall from the < ?example=Introduction&section=ControlStateSpace
% State-Space Tutorial> page, we can use a "pole placement" technique to
% obtain the desired output. Poles of a closed-loop  
% system can be found from the characteristic equation: the determinant of the 
% [sI-(A-B*K)] matrix. If the poles the system can be placed in the desired location by 
% designing an appropriate control matrix (K), then the desired output can be obtained. 
% In this tutorial, poles will be chosen first, then we will use MATLAB to find the 
% corresponding control matrix (K).
%
% Now, we need to determine where to place poles for our system. Since our
% [sI-(A-B*K)] matrix is 1x1, we have only one pole to place. Let the pole 
% be at -1.5 (arbitrary). Just as in the State-Space Tutorial, the MATLAB 
% command |place| will be used to find the control matrix K. Create 
% a new < ?aux=Extras_Mfile m-file> and enter the following commands.
% Running the m-file in the MATLAB command window should give you the 
% control matrix and step response shown below.

m = 1000;
b = 50;
t = 0:0.1:10;
u = 500*ones(size(t));

A = [-b/m];
B = [1/m];
C = [1];
D = [0];
sys = ss(A,B,C,D);

x0 = [0];

p1 = -1.5;

K = place(A,B,[p1])

sys_cl = ss(A-B*K,B,C,D);
lsim(sys_cl,u,t,x0);
axis([0 10 0 0.35])
%%
% As you can see, the rise time is satisfactory, but the steady-state error
% is too large.
%
%% Reference input
% Once again from the < ?example=Introduction&section=ControlStateSpace
% State-Space Tutorial> page, a scaling factor called Nbar
% (the schematic is shown below) can be used to eliminate the steady-state 
% error. We can use the < ?aux=Extras_rscale rscale> function to compute the scaling factor. 
% Download it here, <Content/CruiseControl/Control/StateSpace/rscale.m rscale.m>.
% The input is already multiplied by 500, and we want the steady-state speed to 
% be 10 m/sec, so we need to account for these factors as well.
%
% <<Content/CruiseControl/Control/StateSpace/figures/statefeedback_w_pre_cruise.png>>
%
% Copy the following commands to an m-file and run it in the MATLAB command
% window. You should get the step response shown below.

Nbar = rscale(sys,K)*10/500;
sys_cl = ss(A-B*K,B*Nbar,C,D);

lsim(sys_cl,u,t,x0);
axis([0 10 0 11])
%%
% As you can see, the steady-state error has been eliminated. The rise time
% is less than 5 seconds and the overshoot is, in fact, zero. All the design 
% requirements are satisfied.


##### SOURCE END #####
-->				</div>
				
				<div id="left">

					<ul class="section">
						<li class="heading" id="System">SYSTEM<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SystemModeling"><a href="index9b00.html?example=CruiseControl&amp;section=SystemModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SystemAnalysis"><a href="index5c95.html?example=CruiseControl&amp;section=SystemAnalysis">ANALYSIS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Control">CONTROL<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="ControlPID"><a href="index08fb.html?example=CruiseControl&amp;section=ControlPID">PID<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlRootLocus"><a href="index4431.html?example=CruiseControl&amp;section=ControlRootLocus">ROOT&nbsp;LOCUS<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlFrequency"><a href="index75ab.html?example=CruiseControl&amp;section=ControlFrequency">FREQUENCY<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlStateSpace"><a href="index1502.html?example=CruiseControl&amp;section=ControlStateSpace">STATE-SPACE<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="ControlDigital"><a href="index6e12.html?example=CruiseControl&amp;section=ControlDigital">DIGITAL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
					
					<div class="section_break"></div>

					<ul class="section">
						<li class="heading" id="Simulink">SIMULINK<img class="section_heading_arrow" src="Images/section_heading_arrow.png"/></li>
						<li class="item" id="SimulinkModeling"><a href="index3818.html?example=CruiseControl&amp;section=SimulinkModeling">MODELING<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
						<li class="item" id="SimulinkControl"><a href="index8e57.html?example=CruiseControl&amp;section=SimulinkControl">CONTROL<img class="section_arrow" src="Images/section_arrow.png"/></a></li>
					</ul>
		
				</div>
			
				<div style="clear:both"></div>
				
				<div id="bottombar"><span style="color:#FF5500;font-weight:bold">.</div>
				
			</div>
			
		</div>
	
		<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=CruiseControl&section=ControlStateSpace by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:00 GMT -->
</html>

	StateSpace by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:00 GMT -->
</html>

			<script type="text/javascript" src="script.js"></script>
						
	</body>
	

<!-- Mirrored from ctms.engin.umich.edu/CTMS/index.php?example=CruiseControl&section=ControlStateSpace by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:00 GMT -->
</html>

	StateSpace by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:00 GMT -->
</html>

	pier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:00 GMT -->
</html>

	StateSpace by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 19 Jun 2014 21:06:00 GMT -->
</html>

	